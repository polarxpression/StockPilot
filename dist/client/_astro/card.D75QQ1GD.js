import{a as ev,r as f,b as za,g as tv,d as nv,R as gn}from"./index.CNB7ia0t.js";var Ri={exports:{}},xr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nu;function rv(){if(nu)return xr;nu=1;var n=ev(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(c,l,u){var h,m={},g=null,w=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(w=l.ref);for(h in l)r.call(l,h)&&!s.hasOwnProperty(h)&&(m[h]=l[h]);if(c&&c.defaultProps)for(h in l=c.defaultProps,l)m[h]===void 0&&(m[h]=l[h]);return{$$typeof:e,type:c,key:g,ref:w,props:m,_owner:o.current}}return xr.Fragment=t,xr.jsx=a,xr.jsxs=a,xr}var ru;function ov(){return ru||(ru=1,Ri.exports=rv()),Ri.exports}var y=ov();function ou(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function an(...n){return e=>{let t=!1;const r=n.map(o=>{const s=ou(o,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():ou(n[o],null)}}}}function Te(...n){return f.useCallback(an(...n),n)}var sv=Symbol.for("react.lazy"),es=za[" use ".trim().toString()];function iv(n){return typeof n=="object"&&n!==null&&"then"in n}function lh(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===sv&&"_payload"in n&&iv(n._payload)}function uh(n){const e=av(n),t=f.forwardRef((r,o)=>{let{children:s,...a}=r;lh(s)&&typeof es=="function"&&(s=es(s._payload));const c=f.Children.toArray(s),l=c.find(lv);if(l){const u=l.props.children,h=c.map(m=>m===l?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return y.jsx(e,{...a,ref:o,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return y.jsx(e,{...a,ref:o,children:s})});return t.displayName=`${n}.Slot`,t}var er=uh("Slot");function av(n){const e=f.forwardRef((t,r)=>{let{children:o,...s}=t;if(lh(o)&&typeof es=="function"&&(o=es(o._payload)),f.isValidElement(o)){const a=dv(o),c=uv(s,o.props);return o.type!==f.Fragment&&(c.ref=r?an(r,a):a),f.cloneElement(o,c)}return f.Children.count(o)>1?f.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var cv=Symbol("radix.slottable");function lv(n){return f.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===cv}function uv(n,e){const t={...e};for(const r in e){const o=n[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?t[r]=(...c)=>{const l=s(...c);return o(...c),l}:o&&(t[r]=o):r==="style"?t[r]={...o,...s}:r==="className"&&(t[r]=[o,s].filter(Boolean).join(" "))}return{...n,...t}}function dv(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function dh(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=dh(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function hh(){for(var n,e,t=0,r="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=dh(n))&&(r&&(r+=" "),r+=e);return r}const su=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,iu=hh,xs=(n,e)=>t=>{var r;if(e?.variants==null)return iu(n,t?.class,t?.className);const{variants:o,defaultVariants:s}=e,a=Object.keys(o).map(u=>{const h=t?.[u],m=s?.[u];if(h===null)return null;const g=su(h)||su(m);return o[u][g]}),c=t&&Object.entries(t).reduce((u,h)=>{let[m,g]=h;return g===void 0||(u[m]=g),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:m,className:g,...w}=h;return Object.entries(w).every(I=>{let[E,b]=I;return Array.isArray(b)?b.includes({...s,...c}[E]):{...s,...c}[E]===b})?[...u,m,g]:u},[]);return iu(n,a,l,t?.class,t?.className)};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fh=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=f.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:a,...c},l)=>f.createElement("svg",{ref:l,...fv,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:fh("lucide",o),...c},[...a.map(([u,h])=>f.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(n,e)=>{const t=f.forwardRef(({className:r,...o},s)=>f.createElement(pv,{ref:s,iconNode:e,className:fh(`lucide-${hv(n)}`,r),...o}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],gv=Xe("Boxes",mv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vv=Xe("Check",yv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wv=Xe("ChevronRight",_v);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bv=Xe("Circle",Ev);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],xv=Xe("Languages",Tv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Iv=Xe("LayoutDashboard",Av);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Rv=Xe("Monitor",Cv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],au=Xe("Moon",Sv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],cP=Xe("Package",Pv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Nv=Xe("PanelLeft",Dv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Mv=Xe("Printer",kv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ov=Xe("Settings",Vv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],cu=Xe("Sun",Lv);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ts=Xe("X",Fv),jv=768;function $v(){const[n,e]=f.useState(!1);return f.useEffect(()=>{const t=()=>{e(window.innerWidth<jv)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}const Bv=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},Uv=(n,e)=>({classGroupId:n,validator:e}),ph=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),ns="-",lu=[],zv="arbitrary..",Wv=n=>{const e=Hv(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return qv(a);const c=a.split(ns),l=c[0]===""&&c.length>1?1:0;return mh(c,l,e)},getConflictingClassGroupIds:(a,c)=>{if(c){const l=r[a],u=t[a];return l?u?Bv(u,l):l:u||lu}return t[a]||lu}}},mh=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const o=n[e],s=t.nextPart.get(o);if(s){const u=mh(n,e+1,s);if(u)return u}const a=t.validators;if(a===null)return;const c=e===0?n.join(ns):n.slice(e).join(ns),l=a.length;for(let u=0;u<l;u++){const h=a[u];if(h.validator(c))return h.classGroupId}},qv=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?zv+r:void 0})(),Hv=n=>{const{theme:e,classGroups:t}=n;return Gv(t,e)},Gv=(n,e)=>{const t=ph();for(const r in n){const o=n[r];Wa(o,t,r,e)}return t},Wa=(n,e,t,r)=>{const o=n.length;for(let s=0;s<o;s++){const a=n[s];Kv(a,e,t,r)}},Kv=(n,e,t,r)=>{if(typeof n=="string"){Qv(n,e,t);return}if(typeof n=="function"){Xv(n,e,t,r);return}Yv(n,e,t,r)},Qv=(n,e,t)=>{const r=n===""?e:gh(e,n);r.classGroupId=t},Xv=(n,e,t,r)=>{if(Jv(n)){Wa(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(Uv(t,n))},Yv=(n,e,t,r)=>{const o=Object.entries(n),s=o.length;for(let a=0;a<s;a++){const[c,l]=o[a];Wa(l,gh(e,c),t,r)}},gh=(n,e)=>{let t=n;const r=e.split(ns),o=r.length;for(let s=0;s<o;s++){const a=r[s];let c=t.nextPart.get(a);c||(c=ph(),t.nextPart.set(a,c)),t=c}return t},Jv=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,Zv=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const o=(s,a)=>{t[s]=a,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(s){let a=t[s];if(a!==void 0)return a;if((a=r[s])!==void 0)return o(s,a),a},set(s,a){s in t?t[s]=a:o(s,a)}}},ea="!",uu=":",e_=[],du=(n,e,t,r,o)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:o}),t_=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=o=>{const s=[];let a=0,c=0,l=0,u;const h=o.length;for(let E=0;E<h;E++){const b=o[E];if(a===0&&c===0){if(b===uu){s.push(o.slice(l,E)),l=E+1;continue}if(b==="/"){u=E;continue}}b==="["?a++:b==="]"?a--:b==="("?c++:b===")"&&c--}const m=s.length===0?o:o.slice(l);let g=m,w=!1;m.endsWith(ea)?(g=m.slice(0,-1),w=!0):m.startsWith(ea)&&(g=m.slice(1),w=!0);const I=u&&u>l?u-l:void 0;return du(s,w,g,I)};if(e){const o=e+uu,s=r;r=a=>a.startsWith(o)?s(a.slice(o.length)):du(e_,!1,a,void 0,!0)}if(t){const o=r;r=s=>t({className:s,parseClassName:o})}return r},n_=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let o=[];for(let s=0;s<t.length;s++){const a=t[s],c=a[0]==="[",l=e.has(a);c||l?(o.length>0&&(o.sort(),r.push(...o),o=[]),r.push(a)):o.push(a)}return o.length>0&&(o.sort(),r.push(...o)),r}},r_=n=>({cache:Zv(n.cacheSize),parseClassName:t_(n),sortModifiers:n_(n),...Wv(n)}),o_=/\s+/,s_=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:s}=e,a=[],c=n.trim().split(o_);let l="";for(let u=c.length-1;u>=0;u-=1){const h=c[u],{isExternal:m,modifiers:g,hasImportantModifier:w,baseClassName:I,maybePostfixModifierPosition:E}=t(h);if(m){l=h+(l.length>0?" "+l:l);continue}let b=!!E,P=r(b?I.substring(0,E):I);if(!P){if(!b){l=h+(l.length>0?" "+l:l);continue}if(P=r(I),!P){l=h+(l.length>0?" "+l:l);continue}b=!1}const D=g.length===0?"":g.length===1?g[0]:s(g).join(":"),k=w?D+ea:D,M=k+P;if(a.indexOf(M)>-1)continue;a.push(M);const O=o(P,b);for(let L=0;L<O.length;++L){const x=O[L];a.push(k+x)}l=h+(l.length>0?" "+l:l)}return l},i_=(...n)=>{let e=0,t,r,o="";for(;e<n.length;)(t=n[e++])&&(r=yh(t))&&(o&&(o+=" "),o+=r);return o},yh=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=yh(n[r]))&&(t&&(t+=" "),t+=e);return t},a_=(n,...e)=>{let t,r,o,s;const a=l=>{const u=e.reduce((h,m)=>m(h),n());return t=r_(u),r=t.cache.get,o=t.cache.set,s=c,c(l)},c=l=>{const u=r(l);if(u)return u;const h=s_(l,t);return o(l,h),h};return s=a,(...l)=>s(i_(...l))},c_=[],Ie=n=>{const e=t=>t[n]||c_;return e.isThemeGetter=!0,e},vh=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,_h=/^\((?:(\w[\w-]*):)?(.+)\)$/i,l_=/^\d+\/\d+$/,u_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,f_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kn=n=>l_.test(n),se=n=>!!n&&!Number.isNaN(Number(n)),Ut=n=>!!n&&Number.isInteger(Number(n)),Si=n=>n.endsWith("%")&&se(n.slice(0,-1)),St=n=>u_.test(n),m_=()=>!0,g_=n=>d_.test(n)&&!h_.test(n),wh=()=>!1,y_=n=>f_.test(n),v_=n=>p_.test(n),__=n=>!q(n)&&!H(n),w_=n=>tr(n,Th,wh),q=n=>vh.test(n),yn=n=>tr(n,xh,g_),Pi=n=>tr(n,A_,se),hu=n=>tr(n,Eh,wh),E_=n=>tr(n,bh,v_),Ro=n=>tr(n,Ah,y_),H=n=>_h.test(n),Ar=n=>nr(n,xh),b_=n=>nr(n,I_),fu=n=>nr(n,Eh),T_=n=>nr(n,Th),x_=n=>nr(n,bh),So=n=>nr(n,Ah,!0),tr=(n,e,t)=>{const r=vh.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},nr=(n,e,t=!1)=>{const r=_h.exec(n);return r?r[1]?e(r[1]):t:!1},Eh=n=>n==="position"||n==="percentage",bh=n=>n==="image"||n==="url",Th=n=>n==="length"||n==="size"||n==="bg-size",xh=n=>n==="length",A_=n=>n==="number",I_=n=>n==="family-name",Ah=n=>n==="shadow",C_=()=>{const n=Ie("color"),e=Ie("font"),t=Ie("text"),r=Ie("font-weight"),o=Ie("tracking"),s=Ie("leading"),a=Ie("breakpoint"),c=Ie("container"),l=Ie("spacing"),u=Ie("radius"),h=Ie("shadow"),m=Ie("inset-shadow"),g=Ie("text-shadow"),w=Ie("drop-shadow"),I=Ie("blur"),E=Ie("perspective"),b=Ie("aspect"),P=Ie("ease"),D=Ie("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...M(),H,q],L=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],v=()=>[H,q,l],T=()=>[kn,"full","auto",...v()],C=()=>[Ut,"none","subgrid",H,q],R=()=>["auto",{span:["full",Ut,H,q]},Ut,H,q],S=()=>[Ut,"auto",H,q],A=()=>["auto","min","max","fr",H,q],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...v()],re=()=>[kn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...v()],$=()=>[n,H,q],z=()=>[...M(),fu,hu,{position:[H,q]}],me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],De=()=>["auto","cover","contain",T_,w_,{size:[H,q]}],ve=()=>[Si,Ar,yn],te=()=>["","none","full",u,H,q],_e=()=>["",se,Ar,yn],ze=()=>["solid","dashed","dotted","double"],tt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ne=()=>[se,Si,fu,hu],dt=()=>["","none",I,H,q],Lt=()=>["none",se,H,q],ot=()=>["none",se,H,q],ht=()=>[se,H,q],ft=()=>[kn,"full",...v()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[St],breakpoint:[St],color:[m_],container:[St],"drop-shadow":[St],ease:["in","out","in-out"],font:[__],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[St],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[St],shadow:[St],spacing:["px",se],text:[St],"text-shadow":[St],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",kn,q,H,b]}],container:["container"],columns:[{columns:[se,q,H,c]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[Ut,"auto",H,q]}],basis:[{basis:[kn,"full","auto",c,...v()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[se,kn,"auto","initial","none",q]}],grow:[{grow:["",se,H,q]}],shrink:[{shrink:["",se,H,q]}],order:[{order:[Ut,"first","last","none",H,q]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":A()}],"auto-rows":[{"auto-rows":A()}],gap:[{gap:v()}],"gap-x":[{"gap-x":v()}],"gap-y":[{"gap-y":v()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:v()}],px:[{px:v()}],py:[{py:v()}],ps:[{ps:v()}],pe:[{pe:v()}],pt:[{pt:v()}],pr:[{pr:v()}],pb:[{pb:v()}],pl:[{pl:v()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":v()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":v()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[c,"screen",...re()]}],"min-w":[{"min-w":[c,"screen","none",...re()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...re()]}],h:[{h:["screen","lh",...re()]}],"min-h":[{"min-h":["screen","lh","none",...re()]}],"max-h":[{"max-h":["screen","lh",...re()]}],"font-size":[{text:["base",t,Ar,yn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,H,Pi]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Si,q]}],"font-family":[{font:[b_,q,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,H,q]}],"line-clamp":[{"line-clamp":[se,"none",H,Pi]}],leading:[{leading:[s,...v()]}],"list-image":[{"list-image":["none",H,q]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",H,q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ze(),"wavy"]}],"text-decoration-thickness":[{decoration:[se,"from-font","auto",H,yn]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[se,"auto",H,q]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:v()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",H,q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",H,q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:me()}],"bg-size":[{bg:De()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ut,H,q],radial:["",H,q],conic:[Ut,H,q]},x_,E_]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:ve()}],"gradient-via-pos":[{via:ve()}],"gradient-to-pos":[{to:ve()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ze(),"hidden","none"]}],"divide-style":[{divide:[...ze(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...ze(),"none","hidden"]}],"outline-offset":[{"outline-offset":[se,H,q]}],"outline-w":[{outline:["",se,Ar,yn]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",h,So,Ro]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",m,So,Ro]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[se,yn]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",g,So,Ro]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[se,H,q]}],"mix-blend":[{"mix-blend":[...tt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":tt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[se]}],"mask-image-linear-from-pos":[{"mask-linear-from":ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":ne()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":ne()}],"mask-image-t-to-pos":[{"mask-t-to":ne()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":ne()}],"mask-image-r-to-pos":[{"mask-r-to":ne()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":ne()}],"mask-image-b-to-pos":[{"mask-b-to":ne()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":ne()}],"mask-image-l-to-pos":[{"mask-l-to":ne()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":ne()}],"mask-image-x-to-pos":[{"mask-x-to":ne()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":ne()}],"mask-image-y-to-pos":[{"mask-y-to":ne()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[H,q]}],"mask-image-radial-from-pos":[{"mask-radial-from":ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":ne()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[se]}],"mask-image-conic-from-pos":[{"mask-conic-from":ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":ne()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:me()}],"mask-size":[{mask:De()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",H,q]}],filter:[{filter:["","none",H,q]}],blur:[{blur:dt()}],brightness:[{brightness:[se,H,q]}],contrast:[{contrast:[se,H,q]}],"drop-shadow":[{"drop-shadow":["","none",w,So,Ro]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",se,H,q]}],"hue-rotate":[{"hue-rotate":[se,H,q]}],invert:[{invert:["",se,H,q]}],saturate:[{saturate:[se,H,q]}],sepia:[{sepia:["",se,H,q]}],"backdrop-filter":[{"backdrop-filter":["","none",H,q]}],"backdrop-blur":[{"backdrop-blur":dt()}],"backdrop-brightness":[{"backdrop-brightness":[se,H,q]}],"backdrop-contrast":[{"backdrop-contrast":[se,H,q]}],"backdrop-grayscale":[{"backdrop-grayscale":["",se,H,q]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[se,H,q]}],"backdrop-invert":[{"backdrop-invert":["",se,H,q]}],"backdrop-opacity":[{"backdrop-opacity":[se,H,q]}],"backdrop-saturate":[{"backdrop-saturate":[se,H,q]}],"backdrop-sepia":[{"backdrop-sepia":["",se,H,q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":v()}],"border-spacing-x":[{"border-spacing-x":v()}],"border-spacing-y":[{"border-spacing-y":v()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",H,q]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[se,"initial",H,q]}],ease:[{ease:["linear","initial",P,H,q]}],delay:[{delay:[se,H,q]}],animate:[{animate:["none",D,H,q]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,H,q]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:Lt()}],"rotate-x":[{"rotate-x":Lt()}],"rotate-y":[{"rotate-y":Lt()}],"rotate-z":[{"rotate-z":Lt()}],scale:[{scale:ot()}],"scale-x":[{"scale-x":ot()}],"scale-y":[{"scale-y":ot()}],"scale-z":[{"scale-z":ot()}],"scale-3d":["scale-3d"],skew:[{skew:ht()}],"skew-x":[{"skew-x":ht()}],"skew-y":[{"skew-y":ht()}],transform:[{transform:[H,q,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ft()}],"translate-x":[{"translate-x":ft()}],"translate-y":[{"translate-y":ft()}],"translate-z":[{"translate-z":ft()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",H,q]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":v()}],"scroll-mx":[{"scroll-mx":v()}],"scroll-my":[{"scroll-my":v()}],"scroll-ms":[{"scroll-ms":v()}],"scroll-me":[{"scroll-me":v()}],"scroll-mt":[{"scroll-mt":v()}],"scroll-mr":[{"scroll-mr":v()}],"scroll-mb":[{"scroll-mb":v()}],"scroll-ml":[{"scroll-ml":v()}],"scroll-p":[{"scroll-p":v()}],"scroll-px":[{"scroll-px":v()}],"scroll-py":[{"scroll-py":v()}],"scroll-ps":[{"scroll-ps":v()}],"scroll-pe":[{"scroll-pe":v()}],"scroll-pt":[{"scroll-pt":v()}],"scroll-pr":[{"scroll-pr":v()}],"scroll-pb":[{"scroll-pb":v()}],"scroll-pl":[{"scroll-pl":v()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",H,q]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[se,Ar,yn,Pi]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},R_=a_(C_);function X(...n){return R_(hh(n))}const S_=xs("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),qa=f.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...o},s)=>{const a=r?er:"button";return y.jsx(a,{className:X(S_({variant:e,size:t,className:n})),ref:s,...o})});qa.displayName="Button";const Ih=f.forwardRef(({className:n,type:e,...t},r)=>y.jsx("input",{type:e,className:X("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Ih.displayName="Input";var As=nv();const P_=tv(As);var D_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],N_=D_.reduce((n,e)=>{const t=uh(`Primitive.${e}`),r=f.forwardRef((o,s)=>{const{asChild:a,...c}=o,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),k_="Separator",pu="horizontal",M_=["horizontal","vertical"],Ch=f.forwardRef((n,e)=>{const{decorative:t,orientation:r=pu,...o}=n,s=V_(r)?r:pu,c=t?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return y.jsx(N_.div,{"data-orientation":s,...c,...o,ref:e})});Ch.displayName=k_;function V_(n){return M_.includes(n)}var Rh=Ch;const Sh=f.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},o)=>y.jsx(Rh,{ref:o,decorative:t,orientation:e,className:X("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));Sh.displayName=Rh.displayName;function K(n,e,{checkForDefaultPrevented:t=!0}={}){return function(o){if(n?.(o),t===!1||!o.defaultPrevented)return e?.(o)}}function O_(n,e){const t=f.createContext(e),r=s=>{const{children:a,...c}=s,l=f.useMemo(()=>c,Object.values(c));return y.jsx(t.Provider,{value:l,children:a})};r.displayName=n+"Provider";function o(s){const a=f.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,o]}function cn(n,e=[]){let t=[];function r(s,a){const c=f.createContext(a),l=t.length;t=[...t,a];const u=m=>{const{scope:g,children:w,...I}=m,E=g?.[n]?.[l]||c,b=f.useMemo(()=>I,Object.values(I));return y.jsx(E.Provider,{value:b,children:w})};u.displayName=s+"Provider";function h(m,g){const w=g?.[n]?.[l]||c,I=f.useContext(w);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[u,h]}const o=()=>{const s=t.map(a=>f.createContext(a));return function(c){const l=c?.[n]||s;return f.useMemo(()=>({[`__scope${n}`]:{...c,[n]:l}}),[c,l])}};return o.scopeName=n,[r,L_(o,...e)]}function L_(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const a=r.reduce((c,{useScope:l,scopeName:u})=>{const m=l(s)[`__scope${u}`];return{...c,...m}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var Dt=globalThis?.document?f.useLayoutEffect:()=>{},F_=za[" useId ".trim().toString()]||(()=>{}),j_=0;function Pt(n){const[e,t]=f.useState(F_());return Dt(()=>{t(r=>r??String(j_++))},[n]),e?`radix-${e}`:""}var $_=za[" useInsertionEffect ".trim().toString()]||Dt;function rr({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[o,s,a]=B_({defaultProp:e,onChange:t}),c=n!==void 0,l=c?n:o;{const h=f.useRef(n!==void 0);f.useEffect(()=>{const m=h.current;m!==c&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=c},[c,r])}const u=f.useCallback(h=>{if(c){const m=U_(h)?h(n):h;m!==n&&a.current?.(m)}else s(h)},[c,n,s,a]);return[l,u]}function B_({defaultProp:n,onChange:e}){const[t,r]=f.useState(n),o=f.useRef(t),s=f.useRef(e);return $_(()=>{s.current=e},[e]),f.useEffect(()=>{o.current!==t&&(s.current?.(t),o.current=t)},[t,o]),[t,r,s]}function U_(n){return typeof n=="function"}function z_(n){const e=W_(n),t=f.forwardRef((r,o)=>{const{children:s,...a}=r,c=f.Children.toArray(s),l=c.find(H_);if(l){const u=l.props.children,h=c.map(m=>m===l?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return y.jsx(e,{...a,ref:o,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return y.jsx(e,{...a,ref:o,children:s})});return t.displayName=`${n}.Slot`,t}function W_(n){const e=f.forwardRef((t,r)=>{const{children:o,...s}=t;if(f.isValidElement(o)){const a=K_(o),c=G_(s,o.props);return o.type!==f.Fragment&&(c.ref=r?an(r,a):a),f.cloneElement(o,c)}return f.Children.count(o)>1?f.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var q_=Symbol("radix.slottable");function H_(n){return f.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===q_}function G_(n,e){const t={...e};for(const r in e){const o=n[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?t[r]=(...c)=>{const l=s(...c);return o(...c),l}:o&&(t[r]=o):r==="style"?t[r]={...o,...s}:r==="className"&&(t[r]=[o,s].filter(Boolean).join(" "))}return{...n,...t}}function K_(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Q_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],he=Q_.reduce((n,e)=>{const t=z_(`Primitive.${e}`),r=f.forwardRef((o,s)=>{const{asChild:a,...c}=o,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...c,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function Ha(n,e){n&&As.flushSync(()=>n.dispatchEvent(e))}function Qe(n){const e=f.useRef(n);return f.useEffect(()=>{e.current=n}),f.useMemo(()=>(...t)=>e.current?.(...t),[])}function X_(n,e=globalThis?.document){const t=Qe(n);f.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Y_="DismissableLayer",ta="dismissableLayer.update",J_="dismissableLayer.pointerDownOutside",Z_="dismissableLayer.focusOutside",mu,Ph=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yr=f.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:a,onDismiss:c,...l}=n,u=f.useContext(Ph),[h,m]=f.useState(null),g=h?.ownerDocument??globalThis?.document,[,w]=f.useState({}),I=Te(e,x=>m(x)),E=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),P=E.indexOf(b),D=h?E.indexOf(h):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,M=D>=P,O=tw(x=>{const v=x.target,T=[...u.branches].some(C=>C.contains(v));!M||T||(o?.(x),a?.(x),x.defaultPrevented||c?.())},g),L=nw(x=>{const v=x.target;[...u.branches].some(C=>C.contains(v))||(s?.(x),a?.(x),x.defaultPrevented||c?.())},g);return X_(x=>{D===u.layers.size-1&&(r?.(x),!x.defaultPrevented&&c&&(x.preventDefault(),c()))},g),f.useEffect(()=>{if(h)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(mu=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),gu(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=mu)}},[h,g,t,u]),f.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),gu())},[h,u]),f.useEffect(()=>{const x=()=>w({});return document.addEventListener(ta,x),()=>document.removeEventListener(ta,x)},[]),y.jsx(he.div,{...l,ref:I,style:{pointerEvents:k?M?"auto":"none":void 0,...n.style},onFocusCapture:K(n.onFocusCapture,L.onFocusCapture),onBlurCapture:K(n.onBlurCapture,L.onBlurCapture),onPointerDownCapture:K(n.onPointerDownCapture,O.onPointerDownCapture)})});Yr.displayName=Y_;var ew="DismissableLayerBranch",Dh=f.forwardRef((n,e)=>{const t=f.useContext(Ph),r=f.useRef(null),o=Te(e,r);return f.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),y.jsx(he.div,{...n,ref:o})});Dh.displayName=ew;function tw(n,e=globalThis?.document){const t=Qe(n),r=f.useRef(!1),o=f.useRef(()=>{});return f.useEffect(()=>{const s=c=>{if(c.target&&!r.current){let l=function(){Nh(J_,t,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function nw(n,e=globalThis?.document){const t=Qe(n),r=f.useRef(!1);return f.useEffect(()=>{const o=s=>{s.target&&!r.current&&Nh(Z_,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function gu(){const n=new CustomEvent(ta);document.dispatchEvent(n)}function Nh(n,e,t,{discrete:r}){const o=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),r?Ha(o,s):o.dispatchEvent(s)}var rw=Yr,ow=Dh,Di="focusScope.autoFocusOnMount",Ni="focusScope.autoFocusOnUnmount",yu={bubbles:!1,cancelable:!0},sw="FocusScope",Ga=f.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...a}=n,[c,l]=f.useState(null),u=Qe(o),h=Qe(s),m=f.useRef(null),g=Te(e,E=>l(E)),w=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let E=function(k){if(w.paused||!c)return;const M=k.target;c.contains(M)?m.current=M:zt(m.current,{select:!0})},b=function(k){if(w.paused||!c)return;const M=k.relatedTarget;M!==null&&(c.contains(M)||zt(m.current,{select:!0}))},P=function(k){if(document.activeElement===document.body)for(const O of k)O.removedNodes.length>0&&zt(c)};document.addEventListener("focusin",E),document.addEventListener("focusout",b);const D=new MutationObserver(P);return c&&D.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",b),D.disconnect()}}},[r,c,w.paused]),f.useEffect(()=>{if(c){_u.add(w);const E=document.activeElement;if(!c.contains(E)){const P=new CustomEvent(Di,yu);c.addEventListener(Di,u),c.dispatchEvent(P),P.defaultPrevented||(iw(dw(kh(c)),{select:!0}),document.activeElement===E&&zt(c))}return()=>{c.removeEventListener(Di,u),setTimeout(()=>{const P=new CustomEvent(Ni,yu);c.addEventListener(Ni,h),c.dispatchEvent(P),P.defaultPrevented||zt(E??document.body,{select:!0}),c.removeEventListener(Ni,h),_u.remove(w)},0)}}},[c,u,h,w]);const I=f.useCallback(E=>{if(!t&&!r||w.paused)return;const b=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,P=document.activeElement;if(b&&P){const D=E.currentTarget,[k,M]=aw(D);k&&M?!E.shiftKey&&P===M?(E.preventDefault(),t&&zt(k,{select:!0})):E.shiftKey&&P===k&&(E.preventDefault(),t&&zt(M,{select:!0})):P===D&&E.preventDefault()}},[t,r,w.paused]);return y.jsx(he.div,{tabIndex:-1,...a,ref:g,onKeyDown:I})});Ga.displayName=sw;function iw(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(zt(r,{select:e}),document.activeElement!==t)return}function aw(n){const e=kh(n),t=vu(e,n),r=vu(e.reverse(),n);return[t,r]}function kh(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function vu(n,e){for(const t of n)if(!cw(t,{upTo:e}))return t}function cw(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function lw(n){return n instanceof HTMLInputElement&&"select"in n}function zt(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&lw(n)&&e&&n.select()}}var _u=uw();function uw(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=wu(n,e),n.unshift(e)},remove(e){n=wu(n,e),n[0]?.resume()}}}function wu(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function dw(n){return n.filter(e=>e.tagName!=="A")}var hw="Portal",Is=f.forwardRef((n,e)=>{const{container:t,...r}=n,[o,s]=f.useState(!1);Dt(()=>s(!0),[]);const a=t||o&&globalThis?.document?.body;return a?P_.createPortal(y.jsx(he.div,{...r,ref:e}),a):null});Is.displayName=hw;function fw(n,e){return f.useReducer((t,r)=>e[t][r]??t,n)}var At=n=>{const{present:e,children:t}=n,r=pw(e),o=typeof t=="function"?t({present:r.isPresent}):f.Children.only(t),s=Te(r.ref,mw(o));return typeof t=="function"||r.isPresent?f.cloneElement(o,{ref:s}):null};At.displayName="Presence";function pw(n){const[e,t]=f.useState(),r=f.useRef(null),o=f.useRef(n),s=f.useRef("none"),a=n?"mounted":"unmounted",[c,l]=fw(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Po(r.current);s.current=c==="mounted"?u:"none"},[c]),Dt(()=>{const u=r.current,h=o.current;if(h!==n){const g=s.current,w=Po(u);n?l("MOUNT"):w==="none"||u?.display==="none"?l("UNMOUNT"):l(h&&g!==w?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,l]),Dt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,m=w=>{const E=Po(r.current).includes(CSS.escape(w.animationName));if(w.target===e&&E&&(l("ANIMATION_END"),!o.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},g=w=>{w.target===e&&(s.current=Po(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function Po(n){return n?.animationName||"none"}function mw(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var ki=0;function Mh(){f.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Eu()),document.body.insertAdjacentElement("beforeend",n[1]??Eu()),ki++,()=>{ki===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ki--}},[])}function Eu(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var mt=function(){return mt=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},mt.apply(this,arguments)};function Vh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function gw(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Uo="right-scroll-bar-position",zo="width-before-scroll-bar",yw="with-scroll-bars-hidden",vw="--removed-body-scroll-bar-size";function Mi(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function _w(n,e){var t=f.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var o=t.value;o!==r&&(t.value=r,t.callback(r,o))}}}})[0];return t.callback=e,t.facade}var ww=typeof window<"u"?f.useLayoutEffect:f.useEffect,bu=new WeakMap;function Ew(n,e){var t=_w(null,function(r){return n.forEach(function(o){return Mi(o,r)})});return ww(function(){var r=bu.get(t);if(r){var o=new Set(r),s=new Set(n),a=t.current;o.forEach(function(c){s.has(c)||Mi(c,null)}),s.forEach(function(c){o.has(c)||Mi(c,a)})}bu.set(t,n)},[n]),t}function bw(n){return n}function Tw(n,e){e===void 0&&(e=bw);var t=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var a=e(s,r);return t.push(a),function(){t=t.filter(function(c){return c!==a})}},assignSyncMedium:function(s){for(r=!0;t.length;){var a=t;t=[],a.forEach(s)}t={push:function(c){return s(c)},filter:function(){return t}}},assignMedium:function(s){r=!0;var a=[];if(t.length){var c=t;t=[],c.forEach(s),a=t}var l=function(){var h=a;a=[],h.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),t={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),t}}}};return o}function xw(n){n===void 0&&(n={});var e=Tw(null);return e.options=mt({async:!0,ssr:!1},n),e}var Oh=function(n){var e=n.sideCar,t=Vh(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,mt({},t))};Oh.isSideCarExport=!0;function Aw(n,e){return n.useMedium(e),Oh}var Lh=xw(),Vi=function(){},Cs=f.forwardRef(function(n,e){var t=f.useRef(null),r=f.useState({onScrollCapture:Vi,onWheelCapture:Vi,onTouchMoveCapture:Vi}),o=r[0],s=r[1],a=n.forwardProps,c=n.children,l=n.className,u=n.removeScrollBar,h=n.enabled,m=n.shards,g=n.sideCar,w=n.noRelative,I=n.noIsolation,E=n.inert,b=n.allowPinchZoom,P=n.as,D=P===void 0?"div":P,k=n.gapMode,M=Vh(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=g,L=Ew([t,e]),x=mt(mt({},M),o);return f.createElement(f.Fragment,null,h&&f.createElement(O,{sideCar:Lh,removeScrollBar:u,shards:m,noRelative:w,noIsolation:I,inert:E,setCallbacks:s,allowPinchZoom:!!b,lockRef:t,gapMode:k}),a?f.cloneElement(f.Children.only(c),mt(mt({},x),{ref:L})):f.createElement(D,mt({},x,{className:l,ref:L}),c))});Cs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cs.classNames={fullWidth:zo,zeroRight:Uo};var Iw=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cw(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Iw();return e&&n.setAttribute("nonce",e),n}function Rw(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function Sw(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Pw=function(){var n=0,e=null;return{add:function(t){n==0&&(e=Cw())&&(Rw(e,t),Sw(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Dw=function(){var n=Pw();return function(e,t){f.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Fh=function(){var n=Dw(),e=function(t){var r=t.styles,o=t.dynamic;return n(r,o),null};return e},Nw={left:0,top:0,right:0,gap:0},Oi=function(n){return parseInt(n||"",10)||0},kw=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],o=e[n==="padding"?"paddingRight":"marginRight"];return[Oi(t),Oi(r),Oi(o)]},Mw=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Nw;var e=kw(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},Vw=Fh(),zn="data-scroll-locked",Ow=function(n,e,t,r){var o=n.left,s=n.top,a=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(yw,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(zn,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Uo,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(zo,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Uo," .").concat(Uo,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(zo," .").concat(zo,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zn,`] {
    `).concat(vw,": ").concat(c,`px;
  }
`)},Tu=function(){var n=parseInt(document.body.getAttribute(zn)||"0",10);return isFinite(n)?n:0},Lw=function(){f.useEffect(function(){return document.body.setAttribute(zn,(Tu()+1).toString()),function(){var n=Tu()-1;n<=0?document.body.removeAttribute(zn):document.body.setAttribute(zn,n.toString())}},[])},Fw=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,o=r===void 0?"margin":r;Lw();var s=f.useMemo(function(){return Mw(o)},[o]);return f.createElement(Vw,{styles:Ow(s,!e,o,t?"":"!important")})},na=!1;if(typeof window<"u")try{var Do=Object.defineProperty({},"passive",{get:function(){return na=!0,!0}});window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{na=!1}var Mn=na?{passive:!1}:!1,jw=function(n){return n.tagName==="TEXTAREA"},jh=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!jw(n)&&t[e]==="visible")},$w=function(n){return jh(n,"overflowY")},Bw=function(n){return jh(n,"overflowX")},xu=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=$h(n,r);if(o){var s=Bh(n,r),a=s[1],c=s[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Uw=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},zw=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},$h=function(n,e){return n==="v"?$w(e):Bw(e)},Bh=function(n,e){return n==="v"?Uw(e):zw(e)},Ww=function(n,e){return n==="h"&&e==="rtl"?-1:1},qw=function(n,e,t,r,o){var s=Ww(n,window.getComputedStyle(e).direction),a=s*r,c=t.target,l=e.contains(c),u=!1,h=a>0,m=0,g=0;do{if(!c)break;var w=Bh(n,c),I=w[0],E=w[1],b=w[2],P=E-b-s*I;(I||P)&&$h(n,c)&&(m+=P,g+=I);var D=c.parentNode;c=D&&D.nodeType===Node.DOCUMENT_FRAGMENT_NODE?D.host:D}while(!l&&c!==document.body||l&&(e.contains(c)||e===c));return(h&&Math.abs(m)<1||!h&&Math.abs(g)<1)&&(u=!0),u},No=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Au=function(n){return[n.deltaX,n.deltaY]},Iu=function(n){return n&&"current"in n?n.current:n},Hw=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Gw=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Kw=0,Vn=[];function Qw(n){var e=f.useRef([]),t=f.useRef([0,0]),r=f.useRef(),o=f.useState(Kw++)[0],s=f.useState(Fh)[0],a=f.useRef(n);f.useEffect(function(){a.current=n},[n]),f.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(o));var E=gw([n.lockRef.current],(n.shards||[]).map(Iu),!0).filter(Boolean);return E.forEach(function(b){return b.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),E.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(o))})}}},[n.inert,n.lockRef.current,n.shards]);var c=f.useCallback(function(E,b){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!a.current.allowPinchZoom;var P=No(E),D=t.current,k="deltaX"in E?E.deltaX:D[0]-P[0],M="deltaY"in E?E.deltaY:D[1]-P[1],O,L=E.target,x=Math.abs(k)>Math.abs(M)?"h":"v";if("touches"in E&&x==="h"&&L.type==="range")return!1;var v=window.getSelection(),T=v&&v.anchorNode,C=T?T===L||T.contains(L):!1;if(C)return!1;var R=xu(x,L);if(!R)return!0;if(R?O=x:(O=x==="v"?"h":"v",R=xu(x,L)),!R)return!1;if(!r.current&&"changedTouches"in E&&(k||M)&&(r.current=O),!O)return!0;var S=r.current||O;return qw(S,b,E,S==="h"?k:M)},[]),l=f.useCallback(function(E){var b=E;if(!(!Vn.length||Vn[Vn.length-1]!==s)){var P="deltaY"in b?Au(b):No(b),D=e.current.filter(function(O){return O.name===b.type&&(O.target===b.target||b.target===O.shadowParent)&&Hw(O.delta,P)})[0];if(D&&D.should){b.cancelable&&b.preventDefault();return}if(!D){var k=(a.current.shards||[]).map(Iu).filter(Boolean).filter(function(O){return O.contains(b.target)}),M=k.length>0?c(b,k[0]):!a.current.noIsolation;M&&b.cancelable&&b.preventDefault()}}},[]),u=f.useCallback(function(E,b,P,D){var k={name:E,delta:b,target:P,should:D,shadowParent:Xw(P)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(M){return M!==k})},1)},[]),h=f.useCallback(function(E){t.current=No(E),r.current=void 0},[]),m=f.useCallback(function(E){u(E.type,Au(E),E.target,c(E,n.lockRef.current))},[]),g=f.useCallback(function(E){u(E.type,No(E),E.target,c(E,n.lockRef.current))},[]);f.useEffect(function(){return Vn.push(s),n.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",l,Mn),document.addEventListener("touchmove",l,Mn),document.addEventListener("touchstart",h,Mn),function(){Vn=Vn.filter(function(E){return E!==s}),document.removeEventListener("wheel",l,Mn),document.removeEventListener("touchmove",l,Mn),document.removeEventListener("touchstart",h,Mn)}},[]);var w=n.removeScrollBar,I=n.inert;return f.createElement(f.Fragment,null,I?f.createElement(s,{styles:Gw(o)}):null,w?f.createElement(Fw,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function Xw(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Yw=Aw(Lh,Qw);var Ka=f.forwardRef(function(n,e){return f.createElement(Cs,mt({},n,{ref:e,sideCar:Yw}))});Ka.classNames=Cs.classNames;var Jw=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},On=new WeakMap,ko=new WeakMap,Mo={},Li=0,Uh=function(n){return n&&(n.host||Uh(n.parentNode))},Zw=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=Uh(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},eE=function(n,e,t,r){var o=Zw(e,Array.isArray(n)?n:[n]);Mo[t]||(Mo[t]=new WeakMap);var s=Mo[t],a=[],c=new Set,l=new Set(o),u=function(m){!m||c.has(m)||(c.add(m),u(m.parentNode))};o.forEach(u);var h=function(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,function(g){if(c.has(g))h(g);else try{var w=g.getAttribute(r),I=w!==null&&w!=="false",E=(On.get(g)||0)+1,b=(s.get(g)||0)+1;On.set(g,E),s.set(g,b),a.push(g),E===1&&I&&ko.set(g,!0),b===1&&g.setAttribute(t,"true"),I||g.setAttribute(r,"true")}catch(P){console.error("aria-hidden: cannot operate on ",g,P)}})};return h(e),c.clear(),Li++,function(){a.forEach(function(m){var g=On.get(m)-1,w=s.get(m)-1;On.set(m,g),s.set(m,w),g||(ko.has(m)||m.removeAttribute(r),ko.delete(m)),w||m.removeAttribute(t)}),Li--,Li||(On=new WeakMap,On=new WeakMap,ko=new WeakMap,Mo={})}},zh=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),o=Jw(n);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),eE(r,o,t,"aria-hidden")):function(){return null}};function tE(n){const e=nE(n),t=f.forwardRef((r,o)=>{const{children:s,...a}=r,c=f.Children.toArray(s),l=c.find(oE);if(l){const u=l.props.children,h=c.map(m=>m===l?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return y.jsx(e,{...a,ref:o,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return y.jsx(e,{...a,ref:o,children:s})});return t.displayName=`${n}.Slot`,t}function nE(n){const e=f.forwardRef((t,r)=>{const{children:o,...s}=t;if(f.isValidElement(o)){const a=iE(o),c=sE(s,o.props);return o.type!==f.Fragment&&(c.ref=r?an(r,a):a),f.cloneElement(o,c)}return f.Children.count(o)>1?f.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var rE=Symbol("radix.slottable");function oE(n){return f.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===rE}function sE(n,e){const t={...e};for(const r in e){const o=n[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?t[r]=(...c)=>{const l=s(...c);return o(...c),l}:o&&(t[r]=o):r==="style"?t[r]={...o,...s}:r==="className"&&(t[r]=[o,s].filter(Boolean).join(" "))}return{...n,...t}}function iE(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Rs="Dialog",[Wh,lP]=cn(Rs),[aE,ut]=Wh(Rs),qh=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:o,onOpenChange:s,modal:a=!0}=n,c=f.useRef(null),l=f.useRef(null),[u,h]=rr({prop:r,defaultProp:o??!1,onChange:s,caller:Rs});return y.jsx(aE,{scope:e,triggerRef:c,contentRef:l,contentId:Pt(),titleId:Pt(),descriptionId:Pt(),open:u,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:a,children:t})};qh.displayName=Rs;var Hh="DialogTrigger",Gh=f.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ut(Hh,t),s=Te(e,o.triggerRef);return y.jsx(he.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Ya(o.open),...r,ref:s,onClick:K(n.onClick,o.onOpenToggle)})});Gh.displayName=Hh;var Qa="DialogPortal",[cE,Kh]=Wh(Qa,{forceMount:void 0}),Qh=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:o}=n,s=ut(Qa,e);return y.jsx(cE,{scope:e,forceMount:t,children:f.Children.map(r,a=>y.jsx(At,{present:t||s.open,children:y.jsx(Is,{asChild:!0,container:o,children:a})}))})};Qh.displayName=Qa;var rs="DialogOverlay",Xh=f.forwardRef((n,e)=>{const t=Kh(rs,n.__scopeDialog),{forceMount:r=t.forceMount,...o}=n,s=ut(rs,n.__scopeDialog);return s.modal?y.jsx(At,{present:r||s.open,children:y.jsx(uE,{...o,ref:e})}):null});Xh.displayName=rs;var lE=tE("DialogOverlay.RemoveScroll"),uE=f.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ut(rs,t);return y.jsx(Ka,{as:lE,allowPinchZoom:!0,shards:[o.contentRef],children:y.jsx(he.div,{"data-state":Ya(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),bn="DialogContent",Yh=f.forwardRef((n,e)=>{const t=Kh(bn,n.__scopeDialog),{forceMount:r=t.forceMount,...o}=n,s=ut(bn,n.__scopeDialog);return y.jsx(At,{present:r||s.open,children:s.modal?y.jsx(dE,{...o,ref:e}):y.jsx(hE,{...o,ref:e})})});Yh.displayName=bn;var dE=f.forwardRef((n,e)=>{const t=ut(bn,n.__scopeDialog),r=f.useRef(null),o=Te(e,t.contentRef,r);return f.useEffect(()=>{const s=r.current;if(s)return zh(s)},[]),y.jsx(Jh,{...n,ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(n.onCloseAutoFocus,s=>{s.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:K(n.onPointerDownOutside,s=>{const a=s.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&s.preventDefault()}),onFocusOutside:K(n.onFocusOutside,s=>s.preventDefault())})}),hE=f.forwardRef((n,e)=>{const t=ut(bn,n.__scopeDialog),r=f.useRef(!1),o=f.useRef(!1);return y.jsx(Jh,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{n.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||t.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{n.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const a=s.target;t.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),Jh=f.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...a}=n,c=ut(bn,t),l=f.useRef(null),u=Te(e,l);return Mh(),y.jsxs(y.Fragment,{children:[y.jsx(Ga,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:y.jsx(Yr,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Ya(c.open),...a,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(fE,{titleId:c.titleId}),y.jsx(mE,{contentRef:l,descriptionId:c.descriptionId})]})]})}),Xa="DialogTitle",Zh=f.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ut(Xa,t);return y.jsx(he.h2,{id:o.titleId,...r,ref:e})});Zh.displayName=Xa;var ef="DialogDescription",tf=f.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ut(ef,t);return y.jsx(he.p,{id:o.descriptionId,...r,ref:e})});tf.displayName=ef;var nf="DialogClose",rf=f.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ut(nf,t);return y.jsx(he.button,{type:"button",...r,ref:e,onClick:K(n.onClick,()=>o.onOpenChange(!1))})});rf.displayName=nf;function Ya(n){return n?"open":"closed"}var of="DialogTitleWarning",[uP,sf]=O_(of,{contentName:bn,titleName:Xa,docsSlug:"dialog"}),fE=({titleId:n})=>{const e=sf(of),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},pE="DialogDescriptionWarning",mE=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sf(pE).contentName}}.`;return f.useEffect(()=>{const o=n.current?.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},gE=qh,dP=Gh,yE=Qh,af=Xh,cf=Yh,lf=Zh,uf=tf,df=rf;const Cu=n=>y.jsx(gE,{...n}),Ru=df,vE=yE,hf=f.forwardRef(({className:n,...e},t)=>y.jsx(af,{className:X("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));hf.displayName=af.displayName;const _E=xs("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ra=f.forwardRef(({side:n="right",className:e,children:t,...r},o)=>y.jsxs(vE,{children:[y.jsx(hf,{}),y.jsxs(cf,{ref:o,className:X(_E({side:n}),e),...r,children:[t,y.jsxs(df,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[y.jsx(ts,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ra.displayName=cf.displayName;const oa=f.forwardRef(({className:n,...e},t)=>y.jsx(lf,{ref:t,className:X("text-lg font-semibold text-foreground",n),...e}));oa.displayName=lf.displayName;const wE=f.forwardRef(({className:n,...e},t)=>y.jsx(uf,{ref:t,className:X("text-sm text-muted-foreground",n),...e}));wE.displayName=uf.displayName;function Su({className:n,...e}){return y.jsx("div",{className:X("animate-pulse rounded-md bg-muted",n),...e})}const EE=["top","right","bottom","left"],Xt=Math.min,Je=Math.max,os=Math.round,Vo=Math.floor,yt=n=>({x:n,y:n}),bE={left:"right",right:"left",bottom:"top",top:"bottom"},TE={start:"end",end:"start"};function sa(n,e,t){return Je(n,Xt(e,t))}function Nt(n,e){return typeof n=="function"?n(e):n}function kt(n){return n.split("-")[0]}function or(n){return n.split("-")[1]}function Ja(n){return n==="x"?"y":"x"}function Za(n){return n==="y"?"height":"width"}const xE=new Set(["top","bottom"]);function gt(n){return xE.has(kt(n))?"y":"x"}function ec(n){return Ja(gt(n))}function AE(n,e,t){t===void 0&&(t=!1);const r=or(n),o=ec(n),s=Za(o);let a=o==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=ss(a)),[a,ss(a)]}function IE(n){const e=ss(n);return[ia(n),e,ia(e)]}function ia(n){return n.replace(/start|end/g,e=>TE[e])}const Pu=["left","right"],Du=["right","left"],CE=["top","bottom"],RE=["bottom","top"];function SE(n,e,t){switch(n){case"top":case"bottom":return t?e?Du:Pu:e?Pu:Du;case"left":case"right":return e?CE:RE;default:return[]}}function PE(n,e,t,r){const o=or(n);let s=SE(kt(n),t==="start",r);return o&&(s=s.map(a=>a+"-"+o),e&&(s=s.concat(s.map(ia)))),s}function ss(n){return n.replace(/left|right|bottom|top/g,e=>bE[e])}function DE(n){return{top:0,right:0,bottom:0,left:0,...n}}function ff(n){return typeof n!="number"?DE(n):{top:n,right:n,bottom:n,left:n}}function is(n){const{x:e,y:t,width:r,height:o}=n;return{width:r,height:o,top:t,left:e,right:e+r,bottom:t+o,x:e,y:t}}function Nu(n,e,t){let{reference:r,floating:o}=n;const s=gt(e),a=ec(e),c=Za(a),l=kt(e),u=s==="y",h=r.x+r.width/2-o.width/2,m=r.y+r.height/2-o.height/2,g=r[c]/2-o[c]/2;let w;switch(l){case"top":w={x:h,y:r.y-o.height};break;case"bottom":w={x:h,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:m};break;case"left":w={x:r.x-o.width,y:m};break;default:w={x:r.x,y:r.y}}switch(or(e)){case"start":w[a]-=g*(t&&u?-1:1);break;case"end":w[a]+=g*(t&&u?-1:1);break}return w}async function NE(n,e){var t;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:a,elements:c,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:g=!1,padding:w=0}=Nt(e,n),I=ff(w),b=c[g?m==="floating"?"reference":"floating":m],P=is(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(b)))==null||t?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:u,rootBoundary:h,strategy:l})),D=m==="floating"?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),M=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},O=is(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:D,offsetParent:k,strategy:l}):D);return{top:(P.top-O.top+I.top)/M.y,bottom:(O.bottom-P.bottom+I.bottom)/M.y,left:(P.left-O.left+I.left)/M.x,right:(O.right-P.right+I.right)/M.x}}const kE=async(n,e,t)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:a}=t,c=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:n,floating:e,strategy:o}),{x:h,y:m}=Nu(u,r,l),g=r,w={},I=0;for(let b=0;b<c.length;b++){var E;const{name:P,fn:D}=c[b],{x:k,y:M,data:O,reset:L}=await D({x:h,y:m,initialPlacement:r,placement:g,strategy:o,middlewareData:w,rects:u,platform:{...a,detectOverflow:(E=a.detectOverflow)!=null?E:NE},elements:{reference:n,floating:e}});h=k??h,m=M??m,w={...w,[P]:{...w[P],...O}},L&&I<=50&&(I++,typeof L=="object"&&(L.placement&&(g=L.placement),L.rects&&(u=L.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:o}):L.rects),{x:h,y:m}=Nu(u,g,l)),b=-1)}return{x:h,y:m,placement:g,strategy:o,middlewareData:w}},ME=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:o,rects:s,platform:a,elements:c,middlewareData:l}=e,{element:u,padding:h=0}=Nt(n,e)||{};if(u==null)return{};const m=ff(h),g={x:t,y:r},w=ec(o),I=Za(w),E=await a.getDimensions(u),b=w==="y",P=b?"top":"left",D=b?"bottom":"right",k=b?"clientHeight":"clientWidth",M=s.reference[I]+s.reference[w]-g[w]-s.floating[I],O=g[w]-s.reference[w],L=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let x=L?L[k]:0;(!x||!await(a.isElement==null?void 0:a.isElement(L)))&&(x=c.floating[k]||s.floating[I]);const v=M/2-O/2,T=x/2-E[I]/2-1,C=Xt(m[P],T),R=Xt(m[D],T),S=C,A=x-E[I]-R,U=x/2-E[I]/2+v,oe=sa(S,U,A),Y=!l.arrow&&or(o)!=null&&U!==oe&&s.reference[I]/2-(U<S?C:R)-E[I]/2<0,re=Y?U<S?U-S:U-A:0;return{[w]:g[w]+re,data:{[w]:oe,centerOffset:U-oe-re,...Y&&{alignmentOffset:re}},reset:Y}}}),VE=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:o,middlewareData:s,rects:a,initialPlacement:c,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:E=!0,...b}=Nt(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const P=kt(o),D=gt(c),k=kt(c)===c,M=await(l.isRTL==null?void 0:l.isRTL(u.floating)),O=g||(k||!E?[ss(c)]:IE(c)),L=I!=="none";!g&&L&&O.push(...PE(c,E,I,M));const x=[c,...O],v=await l.detectOverflow(e,b),T=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&T.push(v[P]),m){const U=AE(o,a,M);T.push(v[U[0]],v[U[1]])}if(C=[...C,{placement:o,overflows:T}],!T.every(U=>U<=0)){var R,S;const U=(((R=s.flip)==null?void 0:R.index)||0)+1,oe=x[U];if(oe&&(!(m==="alignment"?D!==gt(oe):!1)||C.every($=>gt($.placement)===D?$.overflows[0]>0:!0)))return{data:{index:U,overflows:C},reset:{placement:oe}};let Y=(S=C.filter(re=>re.overflows[0]<=0).sort((re,$)=>re.overflows[1]-$.overflows[1])[0])==null?void 0:S.placement;if(!Y)switch(w){case"bestFit":{var A;const re=(A=C.filter($=>{if(L){const z=gt($.placement);return z===D||z==="y"}return!0}).map($=>[$.placement,$.overflows.filter(z=>z>0).reduce((z,me)=>z+me,0)]).sort(($,z)=>$[1]-z[1])[0])==null?void 0:A[0];re&&(Y=re);break}case"initialPlacement":Y=c;break}if(o!==Y)return{reset:{placement:Y}}}return{}}}};function ku(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Mu(n){return EE.some(e=>n[e]>=0)}const OE=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t,platform:r}=e,{strategy:o="referenceHidden",...s}=Nt(n,e);switch(o){case"referenceHidden":{const a=await r.detectOverflow(e,{...s,elementContext:"reference"}),c=ku(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Mu(c)}}}case"escaped":{const a=await r.detectOverflow(e,{...s,altBoundary:!0}),c=ku(a,t.floating);return{data:{escapedOffsets:c,escaped:Mu(c)}}}default:return{}}}}},pf=new Set(["left","top"]);async function LE(n,e){const{placement:t,platform:r,elements:o}=n,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),a=kt(t),c=or(t),l=gt(t)==="y",u=pf.has(a)?-1:1,h=s&&l?-1:1,m=Nt(e,n);let{mainAxis:g,crossAxis:w,alignmentAxis:I}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof I=="number"&&(w=c==="end"?I*-1:I),l?{x:w*h,y:g*u}:{x:g*u,y:w*h}}const FE=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:o,y:s,placement:a,middlewareData:c}=e,l=await LE(e,n);return a===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:a}}}}},jE=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:o,platform:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:l={fn:P=>{let{x:D,y:k}=P;return{x:D,y:k}}},...u}=Nt(n,e),h={x:t,y:r},m=await s.detectOverflow(e,u),g=gt(kt(o)),w=Ja(g);let I=h[w],E=h[g];if(a){const P=w==="y"?"top":"left",D=w==="y"?"bottom":"right",k=I+m[P],M=I-m[D];I=sa(k,I,M)}if(c){const P=g==="y"?"top":"left",D=g==="y"?"bottom":"right",k=E+m[P],M=E-m[D];E=sa(k,E,M)}const b=l.fn({...e,[w]:I,[g]:E});return{...b,data:{x:b.x-t,y:b.y-r,enabled:{[w]:a,[g]:c}}}}}},$E=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:o,rects:s,middlewareData:a}=e,{offset:c=0,mainAxis:l=!0,crossAxis:u=!0}=Nt(n,e),h={x:t,y:r},m=gt(o),g=Ja(m);let w=h[g],I=h[m];const E=Nt(c,e),b=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(l){const k=g==="y"?"height":"width",M=s.reference[g]-s.floating[k]+b.mainAxis,O=s.reference[g]+s.reference[k]-b.mainAxis;w<M?w=M:w>O&&(w=O)}if(u){var P,D;const k=g==="y"?"width":"height",M=pf.has(kt(o)),O=s.reference[m]-s.floating[k]+(M&&((P=a.offset)==null?void 0:P[m])||0)+(M?0:b.crossAxis),L=s.reference[m]+s.reference[k]+(M?0:((D=a.offset)==null?void 0:D[m])||0)-(M?b.crossAxis:0);I<O?I=O:I>L&&(I=L)}return{[g]:w,[m]:I}}}},BE=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:o,rects:s,platform:a,elements:c}=e,{apply:l=()=>{},...u}=Nt(n,e),h=await a.detectOverflow(e,u),m=kt(o),g=or(o),w=gt(o)==="y",{width:I,height:E}=s.floating;let b,P;m==="top"||m==="bottom"?(b=m,P=g===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(P=m,b=g==="end"?"top":"bottom");const D=E-h.top-h.bottom,k=I-h.left-h.right,M=Xt(E-h[b],D),O=Xt(I-h[P],k),L=!e.middlewareData.shift;let x=M,v=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(v=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(x=D),L&&!g){const C=Je(h.left,0),R=Je(h.right,0),S=Je(h.top,0),A=Je(h.bottom,0);w?v=I-2*(C!==0||R!==0?C+R:Je(h.left,h.right)):x=E-2*(S!==0||A!==0?S+A:Je(h.top,h.bottom))}await l({...e,availableWidth:v,availableHeight:x});const T=await a.getDimensions(c.floating);return I!==T.width||E!==T.height?{reset:{rects:!0}}:{}}}};function Ss(){return typeof window<"u"}function sr(n){return mf(n)?(n.nodeName||"").toLowerCase():"#document"}function et(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function It(n){var e;return(e=(mf(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function mf(n){return Ss()?n instanceof Node||n instanceof et(n).Node:!1}function at(n){return Ss()?n instanceof Element||n instanceof et(n).Element:!1}function bt(n){return Ss()?n instanceof HTMLElement||n instanceof et(n).HTMLElement:!1}function Vu(n){return!Ss()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof et(n).ShadowRoot}const UE=new Set(["inline","contents"]);function Jr(n){const{overflow:e,overflowX:t,overflowY:r,display:o}=ct(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!UE.has(o)}const zE=new Set(["table","td","th"]);function WE(n){return zE.has(sr(n))}const qE=[":popover-open",":modal"];function Ps(n){return qE.some(e=>{try{return n.matches(e)}catch{return!1}})}const HE=["transform","translate","scale","rotate","perspective"],GE=["transform","translate","scale","rotate","perspective","filter"],KE=["paint","layout","strict","content"];function tc(n){const e=nc(),t=at(n)?ct(n):n;return HE.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||GE.some(r=>(t.willChange||"").includes(r))||KE.some(r=>(t.contain||"").includes(r))}function QE(n){let e=Yt(n);for(;bt(e)&&!Gn(e);){if(tc(e))return e;if(Ps(e))return null;e=Yt(e)}return null}function nc(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const XE=new Set(["html","body","#document"]);function Gn(n){return XE.has(sr(n))}function ct(n){return et(n).getComputedStyle(n)}function Ds(n){return at(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Yt(n){if(sr(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Vu(n)&&n.host||It(n);return Vu(e)?e.host:e}function gf(n){const e=Yt(n);return Gn(e)?n.ownerDocument?n.ownerDocument.body:n.body:bt(e)&&Jr(e)?e:gf(e)}function Lr(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const o=gf(n),s=o===((r=n.ownerDocument)==null?void 0:r.body),a=et(o);if(s){const c=aa(a);return e.concat(a,a.visualViewport||[],Jr(o)?o:[],c&&t?Lr(c):[])}return e.concat(o,Lr(o,[],t))}function aa(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function yf(n){const e=ct(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=bt(n),s=o?n.offsetWidth:t,a=o?n.offsetHeight:r,c=os(t)!==s||os(r)!==a;return c&&(t=s,r=a),{width:t,height:r,$:c}}function rc(n){return at(n)?n:n.contextElement}function Wn(n){const e=rc(n);if(!bt(e))return yt(1);const t=e.getBoundingClientRect(),{width:r,height:o,$:s}=yf(e);let a=(s?os(t.width):t.width)/r,c=(s?os(t.height):t.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const YE=yt(0);function vf(n){const e=et(n);return!nc()||!e.visualViewport?YE:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function JE(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==et(n)?!1:e}function Tn(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const o=n.getBoundingClientRect(),s=rc(n);let a=yt(1);e&&(r?at(r)&&(a=Wn(r)):a=Wn(n));const c=JE(s,t,r)?vf(s):yt(0);let l=(o.left+c.x)/a.x,u=(o.top+c.y)/a.y,h=o.width/a.x,m=o.height/a.y;if(s){const g=et(s),w=r&&at(r)?et(r):r;let I=g,E=aa(I);for(;E&&r&&w!==I;){const b=Wn(E),P=E.getBoundingClientRect(),D=ct(E),k=P.left+(E.clientLeft+parseFloat(D.paddingLeft))*b.x,M=P.top+(E.clientTop+parseFloat(D.paddingTop))*b.y;l*=b.x,u*=b.y,h*=b.x,m*=b.y,l+=k,u+=M,I=et(E),E=aa(I)}}return is({width:h,height:m,x:l,y:u})}function Ns(n,e){const t=Ds(n).scrollLeft;return e?e.left+t:Tn(It(n)).left+t}function _f(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-Ns(n,t),o=t.top+e.scrollTop;return{x:r,y:o}}function ZE(n){let{elements:e,rect:t,offsetParent:r,strategy:o}=n;const s=o==="fixed",a=It(r),c=e?Ps(e.floating):!1;if(r===a||c&&s)return t;let l={scrollLeft:0,scrollTop:0},u=yt(1);const h=yt(0),m=bt(r);if((m||!m&&!s)&&((sr(r)!=="body"||Jr(a))&&(l=Ds(r)),bt(r))){const w=Tn(r);u=Wn(r),h.x=w.x+r.clientLeft,h.y=w.y+r.clientTop}const g=a&&!m&&!s?_f(a,l):yt(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+h.x+g.x,y:t.y*u.y-l.scrollTop*u.y+h.y+g.y}}function eb(n){return Array.from(n.getClientRects())}function tb(n){const e=It(n),t=Ds(n),r=n.ownerDocument.body,o=Je(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Je(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+Ns(n);const c=-t.scrollTop;return ct(r).direction==="rtl"&&(a+=Je(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:a,y:c}}const Ou=25;function nb(n,e){const t=et(n),r=It(n),o=t.visualViewport;let s=r.clientWidth,a=r.clientHeight,c=0,l=0;if(o){s=o.width,a=o.height;const h=nc();(!h||h&&e==="fixed")&&(c=o.offsetLeft,l=o.offsetTop)}const u=Ns(r);if(u<=0){const h=r.ownerDocument,m=h.body,g=getComputedStyle(m),w=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,I=Math.abs(r.clientWidth-m.clientWidth-w);I<=Ou&&(s-=I)}else u<=Ou&&(s+=u);return{width:s,height:a,x:c,y:l}}const rb=new Set(["absolute","fixed"]);function ob(n,e){const t=Tn(n,!0,e==="fixed"),r=t.top+n.clientTop,o=t.left+n.clientLeft,s=bt(n)?Wn(n):yt(1),a=n.clientWidth*s.x,c=n.clientHeight*s.y,l=o*s.x,u=r*s.y;return{width:a,height:c,x:l,y:u}}function Lu(n,e,t){let r;if(e==="viewport")r=nb(n,t);else if(e==="document")r=tb(It(n));else if(at(e))r=ob(e,t);else{const o=vf(n);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return is(r)}function wf(n,e){const t=Yt(n);return t===e||!at(t)||Gn(t)?!1:ct(t).position==="fixed"||wf(t,e)}function sb(n,e){const t=e.get(n);if(t)return t;let r=Lr(n,[],!1).filter(c=>at(c)&&sr(c)!=="body"),o=null;const s=ct(n).position==="fixed";let a=s?Yt(n):n;for(;at(a)&&!Gn(a);){const c=ct(a),l=tc(a);!l&&c.position==="fixed"&&(o=null),(s?!l&&!o:!l&&c.position==="static"&&!!o&&rb.has(o.position)||Jr(a)&&!l&&wf(n,a))?r=r.filter(h=>h!==a):o=c,a=Yt(a)}return e.set(n,r),r}function ib(n){let{element:e,boundary:t,rootBoundary:r,strategy:o}=n;const a=[...t==="clippingAncestors"?Ps(e)?[]:sb(e,this._c):[].concat(t),r],c=a[0],l=a.reduce((u,h)=>{const m=Lu(e,h,o);return u.top=Je(m.top,u.top),u.right=Xt(m.right,u.right),u.bottom=Xt(m.bottom,u.bottom),u.left=Je(m.left,u.left),u},Lu(e,c,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ab(n){const{width:e,height:t}=yf(n);return{width:e,height:t}}function cb(n,e,t){const r=bt(e),o=It(e),s=t==="fixed",a=Tn(n,!0,s,e);let c={scrollLeft:0,scrollTop:0};const l=yt(0);function u(){l.x=Ns(o)}if(r||!r&&!s)if((sr(e)!=="body"||Jr(o))&&(c=Ds(e)),r){const w=Tn(e,!0,s,e);l.x=w.x+e.clientLeft,l.y=w.y+e.clientTop}else o&&u();s&&!r&&o&&u();const h=o&&!r&&!s?_f(o,c):yt(0),m=a.left+c.scrollLeft-l.x-h.x,g=a.top+c.scrollTop-l.y-h.y;return{x:m,y:g,width:a.width,height:a.height}}function Fi(n){return ct(n).position==="static"}function Fu(n,e){if(!bt(n)||ct(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return It(n)===t&&(t=t.ownerDocument.body),t}function Ef(n,e){const t=et(n);if(Ps(n))return t;if(!bt(n)){let o=Yt(n);for(;o&&!Gn(o);){if(at(o)&&!Fi(o))return o;o=Yt(o)}return t}let r=Fu(n,e);for(;r&&WE(r)&&Fi(r);)r=Fu(r,e);return r&&Gn(r)&&Fi(r)&&!tc(r)?t:r||QE(n)||t}const lb=async function(n){const e=this.getOffsetParent||Ef,t=this.getDimensions,r=await t(n.floating);return{reference:cb(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ub(n){return ct(n).direction==="rtl"}const db={convertOffsetParentRelativeRectToViewportRelativeRect:ZE,getDocumentElement:It,getClippingRect:ib,getOffsetParent:Ef,getElementRects:lb,getClientRects:eb,getDimensions:ab,getScale:Wn,isElement:at,isRTL:ub};function bf(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function hb(n,e){let t=null,r;const o=It(n);function s(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function a(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),s();const u=n.getBoundingClientRect(),{left:h,top:m,width:g,height:w}=u;if(c||e(),!g||!w)return;const I=Vo(m),E=Vo(o.clientWidth-(h+g)),b=Vo(o.clientHeight-(m+w)),P=Vo(h),k={rootMargin:-I+"px "+-E+"px "+-b+"px "+-P+"px",threshold:Je(0,Xt(1,l))||1};let M=!0;function O(L){const x=L[0].intersectionRatio;if(x!==l){if(!M)return a();x?a(!1,x):r=setTimeout(()=>{a(!1,1e-7)},1e3)}x===1&&!bf(u,n.getBoundingClientRect())&&a(),M=!1}try{t=new IntersectionObserver(O,{...k,root:o.ownerDocument})}catch{t=new IntersectionObserver(O,k)}t.observe(n)}return a(!0),s}function fb(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=rc(n),h=o||s?[...u?Lr(u):[],...Lr(e)]:[];h.forEach(P=>{o&&P.addEventListener("scroll",t,{passive:!0}),s&&P.addEventListener("resize",t)});const m=u&&c?hb(u,t):null;let g=-1,w=null;a&&(w=new ResizeObserver(P=>{let[D]=P;D&&D.target===u&&w&&(w.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var k;(k=w)==null||k.observe(e)})),t()}),u&&!l&&w.observe(u),w.observe(e));let I,E=l?Tn(n):null;l&&b();function b(){const P=Tn(n);E&&!bf(E,P)&&t(),E=P,I=requestAnimationFrame(b)}return t(),()=>{var P;h.forEach(D=>{o&&D.removeEventListener("scroll",t),s&&D.removeEventListener("resize",t)}),m?.(),(P=w)==null||P.disconnect(),w=null,l&&cancelAnimationFrame(I)}}const pb=FE,mb=jE,gb=VE,yb=BE,vb=OE,ju=ME,_b=$E,wb=(n,e,t)=>{const r=new Map,o={platform:db,...t},s={...o.platform,_c:r};return kE(n,e,{...o,platform:s})};var Eb=typeof document<"u",bb=function(){},Wo=Eb?f.useLayoutEffect:bb;function as(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,o;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!as(n[r],e[r]))return!1;return!0}if(o=Object.keys(n),t=o.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=t;r--!==0;){const s=o[r];if(!(s==="_owner"&&n.$$typeof)&&!as(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function Tf(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function $u(n,e){const t=Tf(n);return Math.round(e*t)/t}function ji(n){const e=f.useRef(n);return Wo(()=>{e.current=n}),e}function Tb(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:a}={},transform:c=!0,whileElementsMounted:l,open:u}=n,[h,m]=f.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[g,w]=f.useState(r);as(g,r)||w(r);const[I,E]=f.useState(null),[b,P]=f.useState(null),D=f.useCallback($=>{$!==L.current&&(L.current=$,E($))},[]),k=f.useCallback($=>{$!==x.current&&(x.current=$,P($))},[]),M=s||I,O=a||b,L=f.useRef(null),x=f.useRef(null),v=f.useRef(h),T=l!=null,C=ji(l),R=ji(o),S=ji(u),A=f.useCallback(()=>{if(!L.current||!x.current)return;const $={placement:e,strategy:t,middleware:g};R.current&&($.platform=R.current),wb(L.current,x.current,$).then(z=>{const me={...z,isPositioned:S.current!==!1};U.current&&!as(v.current,me)&&(v.current=me,As.flushSync(()=>{m(me)}))})},[g,e,t,R,S]);Wo(()=>{u===!1&&v.current.isPositioned&&(v.current.isPositioned=!1,m($=>({...$,isPositioned:!1})))},[u]);const U=f.useRef(!1);Wo(()=>(U.current=!0,()=>{U.current=!1}),[]),Wo(()=>{if(M&&(L.current=M),O&&(x.current=O),M&&O){if(C.current)return C.current(M,O,A);A()}},[M,O,A,C,T]);const oe=f.useMemo(()=>({reference:L,floating:x,setReference:D,setFloating:k}),[D,k]),Y=f.useMemo(()=>({reference:M,floating:O}),[M,O]),re=f.useMemo(()=>{const $={position:t,left:0,top:0};if(!Y.floating)return $;const z=$u(Y.floating,h.x),me=$u(Y.floating,h.y);return c?{...$,transform:"translate("+z+"px, "+me+"px)",...Tf(Y.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:me}},[t,c,Y.floating,h.x,h.y]);return f.useMemo(()=>({...h,update:A,refs:oe,elements:Y,floatingStyles:re}),[h,A,oe,Y,re])}const xb=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:o}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?ju({element:r.current,padding:o}).fn(t):{}:r?ju({element:r,padding:o}).fn(t):{}}}},Ab=(n,e)=>({...pb(n),options:[n,e]}),Ib=(n,e)=>({...mb(n),options:[n,e]}),Cb=(n,e)=>({..._b(n),options:[n,e]}),Rb=(n,e)=>({...gb(n),options:[n,e]}),Sb=(n,e)=>({...yb(n),options:[n,e]}),Pb=(n,e)=>({...vb(n),options:[n,e]}),Db=(n,e)=>({...xb(n),options:[n,e]});var Nb="Arrow",xf=f.forwardRef((n,e)=>{const{children:t,width:r=10,height:o=5,...s}=n;return y.jsx(he.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});xf.displayName=Nb;var kb=xf;function Mb(n){const[e,t]=f.useState(void 0);return Dt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let a,c;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,c=u.blockSize}else a=n.offsetWidth,c=n.offsetHeight;t({width:a,height:c})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var oc="Popper",[Af,ks]=cn(oc),[Vb,If]=Af(oc),Cf=n=>{const{__scopePopper:e,children:t}=n,[r,o]=f.useState(null);return y.jsx(Vb,{scope:e,anchor:r,onAnchorChange:o,children:t})};Cf.displayName=oc;var Rf="PopperAnchor",Sf=f.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...o}=n,s=If(Rf,t),a=f.useRef(null),c=Te(e,a),l=f.useRef(null);return f.useEffect(()=>{const u=l.current;l.current=r?.current||a.current,u!==l.current&&s.onAnchorChange(l.current)}),r?null:y.jsx(he.div,{...o,ref:c})});Sf.displayName=Rf;var sc="PopperContent",[Ob,Lb]=Af(sc),Pf=f.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:w="optimized",onPlaced:I,...E}=n,b=If(sc,t),[P,D]=f.useState(null),k=Te(e,ne=>D(ne)),[M,O]=f.useState(null),L=Mb(M),x=L?.width??0,v=L?.height??0,T=r+(s!=="center"?"-"+s:""),C=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(u)?u:[u],S=R.length>0,A={padding:C,boundary:R.filter(jb),altBoundary:S},{refs:U,floatingStyles:oe,placement:Y,isPositioned:re,middlewareData:$}=Tb({strategy:"fixed",placement:T,whileElementsMounted:(...ne)=>fb(...ne,{animationFrame:w==="always"}),elements:{reference:b.anchor},middleware:[Ab({mainAxis:o+v,alignmentAxis:a}),l&&Ib({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Cb():void 0,...A}),l&&Rb({...A}),Sb({...A,apply:({elements:ne,rects:dt,availableWidth:Lt,availableHeight:ot})=>{const{width:ht,height:ft}=dt.reference,Ft=ne.floating.style;Ft.setProperty("--radix-popper-available-width",`${Lt}px`),Ft.setProperty("--radix-popper-available-height",`${ot}px`),Ft.setProperty("--radix-popper-anchor-width",`${ht}px`),Ft.setProperty("--radix-popper-anchor-height",`${ft}px`)}}),M&&Db({element:M,padding:c}),$b({arrowWidth:x,arrowHeight:v}),g&&Pb({strategy:"referenceHidden",...A})]}),[z,me]=kf(Y),De=Qe(I);Dt(()=>{re&&De?.()},[re,De]);const ve=$.arrow?.x,te=$.arrow?.y,_e=$.arrow?.centerOffset!==0,[ze,tt]=f.useState();return Dt(()=>{P&&tt(window.getComputedStyle(P).zIndex)},[P]),y.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:re?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ze,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(Ob,{scope:t,placedSide:z,onArrowChange:O,arrowX:ve,arrowY:te,shouldHideArrow:_e,children:y.jsx(he.div,{"data-side":z,"data-align":me,...E,ref:k,style:{...E.style,animation:re?void 0:"none"}})})})});Pf.displayName=sc;var Df="PopperArrow",Fb={top:"bottom",right:"left",bottom:"top",left:"right"},Nf=f.forwardRef(function(e,t){const{__scopePopper:r,...o}=e,s=Lb(Df,r),a=Fb[s.placedSide];return y.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:y.jsx(kb,{...o,ref:t,style:{...o.style,display:"block"}})})});Nf.displayName=Df;function jb(n){return n!==null}var $b=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:o}=e,a=o.arrow?.centerOffset!==0,c=a?0:n.arrowWidth,l=a?0:n.arrowHeight,[u,h]=kf(t),m={start:"0%",center:"50%",end:"100%"}[h],g=(o.arrow?.x??0)+c/2,w=(o.arrow?.y??0)+l/2;let I="",E="";return u==="bottom"?(I=a?m:`${g}px`,E=`${-l}px`):u==="top"?(I=a?m:`${g}px`,E=`${r.floating.height+l}px`):u==="right"?(I=`${-l}px`,E=a?m:`${w}px`):u==="left"&&(I=`${r.floating.width+l}px`,E=a?m:`${w}px`),{data:{x:I,y:E}}}});function kf(n){const[e,t="center"]=n.split("-");return[e,t]}var ic=Cf,Mf=Sf,Vf=Pf,Of=Nf,Bb=Symbol("radix.slottable");function Ub(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=Bb,e}var zb=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Wb="VisuallyHidden",Ms=f.forwardRef((n,e)=>y.jsx(he.span,{...n,ref:e,style:{...zb,...n.style}}));Ms.displayName=Wb;var Lf=Ms,[Vs]=cn("Tooltip",[ks]),Os=ks(),Ff="TooltipProvider",qb=700,ca="tooltip.open",[Hb,ac]=Vs(Ff),jf=n=>{const{__scopeTooltip:e,delayDuration:t=qb,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=n,a=f.useRef(!0),c=f.useRef(!1),l=f.useRef(0);return f.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),y.jsx(Hb,{scope:e,isOpenDelayedRef:a,delayDuration:t,onOpen:f.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:f.useCallback(u=>{c.current=u},[]),disableHoverableContent:o,children:s})};jf.displayName=Ff;var Fr="Tooltip",[Gb,Ls]=Vs(Fr),$f=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:o,onOpenChange:s,disableHoverableContent:a,delayDuration:c}=n,l=ac(Fr,n.__scopeTooltip),u=Os(e),[h,m]=f.useState(null),g=Pt(),w=f.useRef(0),I=a??l.disableHoverableContent,E=c??l.delayDuration,b=f.useRef(!1),[P,D]=rr({prop:r,defaultProp:o??!1,onChange:x=>{x?(l.onOpen(),document.dispatchEvent(new CustomEvent(ca))):l.onClose(),s?.(x)},caller:Fr}),k=f.useMemo(()=>P?b.current?"delayed-open":"instant-open":"closed",[P]),M=f.useCallback(()=>{window.clearTimeout(w.current),w.current=0,b.current=!1,D(!0)},[D]),O=f.useCallback(()=>{window.clearTimeout(w.current),w.current=0,D(!1)},[D]),L=f.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>{b.current=!0,D(!0),w.current=0},E)},[E,D]);return f.useEffect(()=>()=>{w.current&&(window.clearTimeout(w.current),w.current=0)},[]),y.jsx(ic,{...u,children:y.jsx(Gb,{scope:e,contentId:g,open:P,stateAttribute:k,trigger:h,onTriggerChange:m,onTriggerEnter:f.useCallback(()=>{l.isOpenDelayedRef.current?L():M()},[l.isOpenDelayedRef,L,M]),onTriggerLeave:f.useCallback(()=>{I?O():(window.clearTimeout(w.current),w.current=0)},[O,I]),onOpen:M,onClose:O,disableHoverableContent:I,children:t})})};$f.displayName=Fr;var la="TooltipTrigger",Bf=f.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,o=Ls(la,t),s=ac(la,t),a=Os(t),c=f.useRef(null),l=Te(e,c,o.onTriggerChange),u=f.useRef(!1),h=f.useRef(!1),m=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),y.jsx(Mf,{asChild:!0,...a,children:y.jsx(he.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:K(n.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),h.current=!0)}),onPointerLeave:K(n.onPointerLeave,()=>{o.onTriggerLeave(),h.current=!1}),onPointerDown:K(n.onPointerDown,()=>{o.open&&o.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:K(n.onFocus,()=>{u.current||o.onOpen()}),onBlur:K(n.onBlur,o.onClose),onClick:K(n.onClick,o.onClose)})})});Bf.displayName=la;var Kb="TooltipPortal",[hP,Qb]=Vs(Kb,{forceMount:void 0}),Kn="TooltipContent",Uf=f.forwardRef((n,e)=>{const t=Qb(Kn,n.__scopeTooltip),{forceMount:r=t.forceMount,side:o="top",...s}=n,a=Ls(Kn,n.__scopeTooltip);return y.jsx(At,{present:r||a.open,children:a.disableHoverableContent?y.jsx(zf,{side:o,...s,ref:e}):y.jsx(Xb,{side:o,...s,ref:e})})}),Xb=f.forwardRef((n,e)=>{const t=Ls(Kn,n.__scopeTooltip),r=ac(Kn,n.__scopeTooltip),o=f.useRef(null),s=Te(e,o),[a,c]=f.useState(null),{trigger:l,onClose:u}=t,h=o.current,{onPointerInTransitChange:m}=r,g=f.useCallback(()=>{c(null),m(!1)},[m]),w=f.useCallback((I,E)=>{const b=I.currentTarget,P={x:I.clientX,y:I.clientY},D=tT(P,b.getBoundingClientRect()),k=nT(P,D),M=rT(E.getBoundingClientRect()),O=sT([...k,...M]);c(O),m(!0)},[m]);return f.useEffect(()=>()=>g(),[g]),f.useEffect(()=>{if(l&&h){const I=b=>w(b,h),E=b=>w(b,l);return l.addEventListener("pointerleave",I),h.addEventListener("pointerleave",E),()=>{l.removeEventListener("pointerleave",I),h.removeEventListener("pointerleave",E)}}},[l,h,w,g]),f.useEffect(()=>{if(a){const I=E=>{const b=E.target,P={x:E.clientX,y:E.clientY},D=l?.contains(b)||h?.contains(b),k=!oT(P,a);D?g():k&&(g(),u())};return document.addEventListener("pointermove",I),()=>document.removeEventListener("pointermove",I)}},[l,h,a,u,g]),y.jsx(zf,{...n,ref:s})}),[Yb,Jb]=Vs(Fr,{isInside:!1}),Zb=Ub("TooltipContent"),zf=f.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:a,...c}=n,l=Ls(Kn,t),u=Os(t),{onClose:h}=l;return f.useEffect(()=>(document.addEventListener(ca,h),()=>document.removeEventListener(ca,h)),[h]),f.useEffect(()=>{if(l.trigger){const m=g=>{g.target?.contains(l.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[l.trigger,h]),y.jsx(Yr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:y.jsxs(Vf,{"data-state":l.stateAttribute,...u,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(Zb,{children:r}),y.jsx(Yb,{scope:t,isInside:!0,children:y.jsx(Lf,{id:l.contentId,role:"tooltip",children:o||r})})]})})});Uf.displayName=Kn;var Wf="TooltipArrow",eT=f.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,o=Os(t);return Jb(Wf,t).isInside?null:y.jsx(Of,{...o,...r,ref:e})});eT.displayName=Wf;function tT(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),o=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,o,s)){case s:return"left";case o:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function nT(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function rT(n){const{top:e,right:t,bottom:r,left:o}=n;return[{x:o,y:e},{x:t,y:e},{x:t,y:r},{x:o,y:r}]}function oT(n,e){const{x:t,y:r}=n;let o=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const c=e[s],l=e[a],u=c.x,h=c.y,m=l.x,g=l.y;h>r!=g>r&&t<(m-u)*(r-h)/(g-h)+u&&(o=!o)}return o}function sT(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),iT(e)}function iT(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const o=n[r];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(o.y-a.y)>=(s.y-a.y)*(o.x-a.x))e.pop();else break}e.push(o)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const o=n[r];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(o.y-a.y)>=(s.y-a.y)*(o.x-a.x))t.pop();else break}t.push(o)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var aT=jf,cT=$f,lT=Bf,qf=Uf;const uT=aT,dT=cT,hT=lT,Hf=f.forwardRef(({className:n,sideOffset:e=4,...t},r)=>y.jsx(qf,{ref:r,sideOffset:e,className:X("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));Hf.displayName=qf.displayName;const ua=f.forwardRef(({asChild:n,...e},t)=>{const r=n?Lf:"span";return y.jsx(r,{...e,ref:t})});ua.displayName="VisuallyHidden";const Bu="sidebar_state",Uu=3600*24*7,fT="16rem",zu="18rem",pT="3rem",mT="b",Gf=f.createContext(null);function Fs(){const n=f.useContext(Gf);if(!n)throw new Error("useSidebar must be used within a SidebarProvider.");return n}const Kf=f.forwardRef(({defaultOpen:n=!1,open:e,onOpenChange:t,className:r,style:o,children:s,...a},c)=>{const l=$v(),[u,h]=f.useState(!1),[m,g]=f.useState(n),w=e??m,I=f.useCallback(D=>{t?(t(D),document.cookie=`${Bu}=${D}; path=/; max-age=${Uu}`):g(k=>{const M=typeof D=="function"?D(k):D;return document.cookie=`${Bu}=${M}; path=/; max-age=${Uu}`,M})},[t]),E=f.useCallback(()=>l?h(D=>!D):I(D=>!D),[l,I,h]);f.useEffect(()=>{const D=k=>{k.key===mT&&(k.metaKey||k.ctrlKey)&&(k.preventDefault(),E())};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[E]);const b=w?"expanded":"collapsed",P=f.useMemo(()=>({state:b,open:w,setOpen:I,isMobile:l,openMobile:u,setOpenMobile:h,toggleSidebar:E}),[b,w,I,l,u,h,E]);return y.jsx(Gf.Provider,{value:P,children:y.jsx(uT,{delayDuration:0,children:y.jsx("div",{style:{"--sidebar-width":fT,"--sidebar-width-icon":pT,...o},className:X("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:c,...a,children:s})})})});Kf.displayName="SidebarProvider";const Qf=f.forwardRef(({side:n="left",variant:e="sidebar",collapsible:t="icon",className:r,children:o,...s},a)=>{const{isMobile:c,openMobile:l,setOpenMobile:u,open:h,setOpen:m}=Fs();return c?y.jsx(Cu,{open:l,onOpenChange:u,...s,children:y.jsxs(ra,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground",style:{"--sidebar-width":zu},side:n,children:[y.jsx(ua,{asChild:!0,children:y.jsx(oa,{children:"Sidebar"})}),y.jsx("div",{className:"flex h-full w-full flex-col",children:o}),y.jsxs(Ru,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(ts,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})}):y.jsx(Cu,{open:h,onOpenChange:m,modal:!1,...s,children:y.jsxs(ra,{ref:a,"data-sidebar":"sidebar",className:X("w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground",r),style:{"--sidebar-width":zu},side:n,children:[y.jsx(ua,{asChild:!0,children:y.jsx(oa,{children:"Sidebar"})}),y.jsx("div",{className:"flex h-full w-full flex-col",children:o}),y.jsxs(Ru,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(ts,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})})});Qf.displayName="Sidebar";const Xf=f.forwardRef(({className:n,onClick:e,...t},r)=>{const{toggleSidebar:o}=Fs();return y.jsxs(qa,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:X("h-7 w-7",n),onClick:s=>{e?.(s),o()},...t,children:[y.jsx(Nv,{}),y.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Xf.displayName="SidebarTrigger";const gT=f.forwardRef(({className:n,...e},t)=>{const{toggleSidebar:r}=Fs();return y.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:X("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",n),...e})});gT.displayName="SidebarRail";const Yf=f.forwardRef(({className:n,...e},t)=>y.jsx("main",{ref:t,className:X("relative flex min-h-svh flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",n),...e}));Yf.displayName="SidebarInset";const yT=f.forwardRef(({className:n,...e},t)=>y.jsx(Ih,{ref:t,"data-sidebar":"input",className:X("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",n),...e}));yT.displayName="SidebarInput";const Jf=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,"data-sidebar":"header",className:X("flex flex-col gap-2 p-2",n),...e}));Jf.displayName="SidebarHeader";const Zf=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,"data-sidebar":"footer",className:X("flex flex-col gap-2 p-2",n),...e}));Zf.displayName="SidebarFooter";const vT=f.forwardRef(({className:n,...e},t)=>y.jsx(Sh,{ref:t,"data-sidebar":"separator",className:X("mx-2 w-auto bg-sidebar-border",n),...e}));vT.displayName="SidebarSeparator";const ep=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,"data-sidebar":"content",className:X("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",n),...e}));ep.displayName="SidebarContent";const _T=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,"data-sidebar":"group",className:X("relative flex w-full min-w-0 flex-col p-2",n),...e}));_T.displayName="SidebarGroup";const wT=f.forwardRef(({className:n,asChild:e=!1,...t},r)=>{const o=e?er:"div";return y.jsx(o,{ref:r,"data-sidebar":"group-label",className:X("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",n),...t})});wT.displayName="SidebarGroupLabel";const ET=f.forwardRef(({className:n,asChild:e=!1,...t},r)=>{const o=e?er:"button";return y.jsx(o,{ref:r,"data-sidebar":"group-action",className:X("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",n),...t})});ET.displayName="SidebarGroupAction";const bT=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,"data-sidebar":"group-content",className:X("w-full text-sm",n),...e}));bT.displayName="SidebarGroupContent";const tp=f.forwardRef(({className:n,...e},t)=>y.jsx("ul",{ref:t,"data-sidebar":"menu",className:X("flex w-full min-w-0 flex-col gap-1",n),...e}));tp.displayName="SidebarMenu";const da=f.forwardRef(({className:n,...e},t)=>y.jsx("li",{ref:t,"data-sidebar":"menu-item",className:X("group/menu-item relative",n),...e}));da.displayName="SidebarMenuItem";const TT=xs("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),ha=f.forwardRef(({asChild:n=!1,isActive:e=!1,variant:t="default",size:r="default",tooltip:o,className:s,...a},c)=>{const l=n?er:"button",{isMobile:u,state:h}=Fs(),m=y.jsx(l,{ref:c,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:X(TT({variant:t,size:r}),s),...a});return o?(typeof o=="string"&&(o={children:o}),y.jsxs(dT,{children:[y.jsx(hT,{asChild:!0,children:m}),y.jsx(Hf,{side:"right",align:"center",hidden:h!=="collapsed"||u,...o})]})):m});ha.displayName="SidebarMenuButton";const xT=f.forwardRef(({className:n,asChild:e=!1,showOnHover:t=!1,...r},o)=>{const s=e?er:"button";return y.jsx(s,{ref:o,"data-sidebar":"menu-action",className:X("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",n),...r})});xT.displayName="SidebarMenuAction";const AT=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:X("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n),...e}));AT.displayName="SidebarMenuBadge";const IT=f.forwardRef(({className:n,showIcon:e=!1,...t},r)=>{const o=f.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return y.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:X("rounded-md h-8 flex gap-2 px-2 items-center",n),...t,children:[e&&y.jsx(Su,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),y.jsx(Su,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});IT.displayName="SidebarMenuSkeleton";const CT=f.forwardRef(({className:n,...e},t)=>y.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:X("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",n),...e}));CT.displayName="SidebarMenuSub";const RT=f.forwardRef(({...n},e)=>y.jsx("li",{ref:e,...n}));RT.displayName="SidebarMenuSubItem";const ST=f.forwardRef(({asChild:n=!1,size:e="md",isActive:t,className:r,...o},s)=>{const a=n?er:"a";return y.jsx(a,{ref:s,"data-sidebar":"menu-sub-button","data-size":e,"data-active":t,className:X("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});ST.displayName="SidebarMenuSubButton";const PT=1,DT=1e6;let $i=0;function NT(){return $i=($i+1)%Number.MAX_SAFE_INTEGER,$i.toString()}const Bi=new Map,Wu=n=>{if(Bi.has(n))return;const e=setTimeout(()=>{Bi.delete(n),Dr({type:"REMOVE_TOAST",toastId:n})},DT);Bi.set(n,e)},kT=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,PT)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Wu(t):n.toasts.forEach(r=>{Wu(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},qo=[];let Ho={toasts:[]};function Dr(n){Ho=kT(Ho,n),qo.forEach(e=>{e(Ho)})}function MT({...n}){const e=NT(),t=o=>Dr({type:"UPDATE_TOAST",toast:{...o,id:e}}),r=()=>Dr({type:"DISMISS_TOAST",toastId:e});return Dr({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:o=>{o||r()}}}),{id:e,dismiss:r,update:t}}function VT(){const[n,e]=f.useState(Ho);return f.useEffect(()=>(qo.push(e),()=>{const t=qo.indexOf(e);t>-1&&qo.splice(t,1)}),[n]),{...n,toast:MT,dismiss:t=>Dr({type:"DISMISS_TOAST",toastId:t})}}function qu(n){const e=OT(n),t=f.forwardRef((r,o)=>{const{children:s,...a}=r,c=f.Children.toArray(s),l=c.find(FT);if(l){const u=l.props.children,h=c.map(m=>m===l?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return y.jsx(e,{...a,ref:o,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return y.jsx(e,{...a,ref:o,children:s})});return t.displayName=`${n}.Slot`,t}function OT(n){const e=f.forwardRef((t,r)=>{const{children:o,...s}=t;if(f.isValidElement(o)){const a=$T(o),c=jT(s,o.props);return o.type!==f.Fragment&&(c.ref=r?an(r,a):a),f.cloneElement(o,c)}return f.Children.count(o)>1?f.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var LT=Symbol("radix.slottable");function FT(n){return f.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===LT}function jT(n,e){const t={...e};for(const r in e){const o=n[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?t[r]=(...c)=>{const l=s(...c);return o(...c),l}:o&&(t[r]=o):r==="style"?t[r]={...o,...s}:r==="className"&&(t[r]=[o,s].filter(Boolean).join(" "))}return{...n,...t}}function $T(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function cc(n){const e=n+"CollectionProvider",[t,r]=cn(e),[o,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=E=>{const{scope:b,children:P}=E,D=gn.useRef(null),k=gn.useRef(new Map).current;return y.jsx(o,{scope:b,itemMap:k,collectionRef:D,children:P})};a.displayName=e;const c=n+"CollectionSlot",l=qu(c),u=gn.forwardRef((E,b)=>{const{scope:P,children:D}=E,k=s(c,P),M=Te(b,k.collectionRef);return y.jsx(l,{ref:M,children:D})});u.displayName=c;const h=n+"CollectionItemSlot",m="data-radix-collection-item",g=qu(h),w=gn.forwardRef((E,b)=>{const{scope:P,children:D,...k}=E,M=gn.useRef(null),O=Te(b,M),L=s(h,P);return gn.useEffect(()=>(L.itemMap.set(M,{ref:M,...k}),()=>void L.itemMap.delete(M))),y.jsx(g,{[m]:"",ref:O,children:D})});w.displayName=h;function I(E){const b=s(n+"CollectionConsumer",E);return gn.useCallback(()=>{const D=b.collectionRef.current;if(!D)return[];const k=Array.from(D.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((L,x)=>k.indexOf(L.ref.current)-k.indexOf(x.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:w},I,r]}var lc="ToastProvider",[uc,BT,UT]=cc("Toast"),[np]=cn("Toast",[UT]),[zT,js]=np(lc),rp=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:s=50,children:a}=n,[c,l]=f.useState(null),[u,h]=f.useState(0),m=f.useRef(!1),g=f.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${lc}\`. Expected non-empty \`string\`.`),y.jsx(uc.Provider,{scope:e,children:y.jsx(zT,{scope:e,label:t,duration:r,swipeDirection:o,swipeThreshold:s,toastCount:u,viewport:c,onViewportChange:l,onToastAdd:f.useCallback(()=>h(w=>w+1),[]),onToastRemove:f.useCallback(()=>h(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:a})})};rp.displayName=lc;var op="ToastViewport",WT=["F8"],fa="toast.viewportPause",pa="toast.viewportResume",sp=f.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=WT,label:o="Notifications ({hotkey})",...s}=n,a=js(op,t),c=BT(t),l=f.useRef(null),u=f.useRef(null),h=f.useRef(null),m=f.useRef(null),g=Te(e,m,a.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=a.toastCount>0;f.useEffect(()=>{const b=P=>{r.length!==0&&r.every(k=>P[k]||P.code===k)&&m.current?.focus()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),f.useEffect(()=>{const b=l.current,P=m.current;if(I&&b&&P){const D=()=>{if(!a.isClosePausedRef.current){const L=new CustomEvent(fa);P.dispatchEvent(L),a.isClosePausedRef.current=!0}},k=()=>{if(a.isClosePausedRef.current){const L=new CustomEvent(pa);P.dispatchEvent(L),a.isClosePausedRef.current=!1}},M=L=>{!b.contains(L.relatedTarget)&&k()},O=()=>{b.contains(document.activeElement)||k()};return b.addEventListener("focusin",D),b.addEventListener("focusout",M),b.addEventListener("pointermove",D),b.addEventListener("pointerleave",O),window.addEventListener("blur",D),window.addEventListener("focus",k),()=>{b.removeEventListener("focusin",D),b.removeEventListener("focusout",M),b.removeEventListener("pointermove",D),b.removeEventListener("pointerleave",O),window.removeEventListener("blur",D),window.removeEventListener("focus",k)}}},[I,a.isClosePausedRef]);const E=f.useCallback(({tabbingDirection:b})=>{const D=c().map(k=>{const M=k.ref.current,O=[M,...rx(M)];return b==="forwards"?O:O.reverse()});return(b==="forwards"?D.reverse():D).flat()},[c]);return f.useEffect(()=>{const b=m.current;if(b){const P=D=>{const k=D.altKey||D.ctrlKey||D.metaKey;if(D.key==="Tab"&&!k){const O=document.activeElement,L=D.shiftKey;if(D.target===b&&L){u.current?.focus();return}const T=E({tabbingDirection:L?"backwards":"forwards"}),C=T.findIndex(R=>R===O);Ui(T.slice(C+1))?D.preventDefault():L?u.current?.focus():h.current?.focus()}};return b.addEventListener("keydown",P),()=>b.removeEventListener("keydown",P)}},[c,E]),y.jsxs(ow,{ref:l,role:"region","aria-label":o.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:I?void 0:"none"},children:[I&&y.jsx(ma,{ref:u,onFocusFromOutsideViewport:()=>{const b=E({tabbingDirection:"forwards"});Ui(b)}}),y.jsx(uc.Slot,{scope:t,children:y.jsx(he.ol,{tabIndex:-1,...s,ref:g})}),I&&y.jsx(ma,{ref:h,onFocusFromOutsideViewport:()=>{const b=E({tabbingDirection:"backwards"});Ui(b)}})]})});sp.displayName=op;var ip="ToastFocusProxy",ma=f.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...o}=n,s=js(ip,t);return y.jsx(Ms,{tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:a=>{const c=a.relatedTarget;!s.viewport?.contains(c)&&r()}})});ma.displayName=ip;var Zr="Toast",qT="toast.swipeStart",HT="toast.swipeMove",GT="toast.swipeCancel",KT="toast.swipeEnd",ap=f.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:o,onOpenChange:s,...a}=n,[c,l]=rr({prop:r,defaultProp:o??!0,onChange:s,caller:Zr});return y.jsx(At,{present:t||c,children:y.jsx(YT,{open:c,...a,ref:e,onClose:()=>l(!1),onPause:Qe(n.onPause),onResume:Qe(n.onResume),onSwipeStart:K(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:K(n.onSwipeMove,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:K(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:K(n.onSwipeEnd,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),l(!1)})})})});ap.displayName=Zr;var[QT,XT]=np(Zr,{onClose(){}}),YT=f.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:o,open:s,onClose:a,onEscapeKeyDown:c,onPause:l,onResume:u,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:w,...I}=n,E=js(Zr,t),[b,P]=f.useState(null),D=Te(e,U=>P(U)),k=f.useRef(null),M=f.useRef(null),O=o||E.duration,L=f.useRef(0),x=f.useRef(O),v=f.useRef(0),{onToastAdd:T,onToastRemove:C}=E,R=Qe(()=>{b?.contains(document.activeElement)&&E.viewport?.focus(),a()}),S=f.useCallback(U=>{!U||U===1/0||(window.clearTimeout(v.current),L.current=new Date().getTime(),v.current=window.setTimeout(R,U))},[R]);f.useEffect(()=>{const U=E.viewport;if(U){const oe=()=>{S(x.current),u?.()},Y=()=>{const re=new Date().getTime()-L.current;x.current=x.current-re,window.clearTimeout(v.current),l?.()};return U.addEventListener(fa,Y),U.addEventListener(pa,oe),()=>{U.removeEventListener(fa,Y),U.removeEventListener(pa,oe)}}},[E.viewport,O,l,u,S]),f.useEffect(()=>{s&&!E.isClosePausedRef.current&&S(O)},[s,O,E.isClosePausedRef,S]),f.useEffect(()=>(T(),()=>C()),[T,C]);const A=f.useMemo(()=>b?pp(b):null,[b]);return E.viewport?y.jsxs(y.Fragment,{children:[A&&y.jsx(JT,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:A}),y.jsx(QT,{scope:t,onClose:R,children:As.createPortal(y.jsx(uc.ItemSlot,{scope:t,children:y.jsx(rw,{asChild:!0,onEscapeKeyDown:K(c,()=>{E.isFocusedToastEscapeKeyDownRef.current||R(),E.isFocusedToastEscapeKeyDownRef.current=!1}),children:y.jsx(he.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":E.swipeDirection,...I,ref:D,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:K(n.onKeyDown,U=>{U.key==="Escape"&&(c?.(U.nativeEvent),U.nativeEvent.defaultPrevented||(E.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:K(n.onPointerDown,U=>{U.button===0&&(k.current={x:U.clientX,y:U.clientY})}),onPointerMove:K(n.onPointerMove,U=>{if(!k.current)return;const oe=U.clientX-k.current.x,Y=U.clientY-k.current.y,re=!!M.current,$=["left","right"].includes(E.swipeDirection),z=["left","up"].includes(E.swipeDirection)?Math.min:Math.max,me=$?z(0,oe):0,De=$?0:z(0,Y),ve=U.pointerType==="touch"?10:2,te={x:me,y:De},_e={originalEvent:U,delta:te};re?(M.current=te,Oo(HT,m,_e,{discrete:!1})):Hu(te,E.swipeDirection,ve)?(M.current=te,Oo(qT,h,_e,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(oe)>ve||Math.abs(Y)>ve)&&(k.current=null)}),onPointerUp:K(n.onPointerUp,U=>{const oe=M.current,Y=U.target;if(Y.hasPointerCapture(U.pointerId)&&Y.releasePointerCapture(U.pointerId),M.current=null,k.current=null,oe){const re=U.currentTarget,$={originalEvent:U,delta:oe};Hu(oe,E.swipeDirection,E.swipeThreshold)?Oo(KT,w,$,{discrete:!0}):Oo(GT,g,$,{discrete:!0}),re.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),E.viewport)})]}):null}),JT=n=>{const{__scopeToast:e,children:t,...r}=n,o=js(Zr,e),[s,a]=f.useState(!1),[c,l]=f.useState(!1);return tx(()=>a(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),c?null:y.jsx(Is,{asChild:!0,children:y.jsx(Ms,{...r,children:s&&y.jsxs(y.Fragment,{children:[o.label," ",t]})})})},ZT="ToastTitle",cp=f.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return y.jsx(he.div,{...r,ref:e})});cp.displayName=ZT;var ex="ToastDescription",lp=f.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return y.jsx(he.div,{...r,ref:e})});lp.displayName=ex;var up="ToastAction",dp=f.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?y.jsx(fp,{altText:t,asChild:!0,children:y.jsx(dc,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${up}\`. Expected non-empty \`string\`.`),null)});dp.displayName=up;var hp="ToastClose",dc=f.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,o=XT(hp,t);return y.jsx(fp,{asChild:!0,children:y.jsx(he.button,{type:"button",...r,ref:e,onClick:K(n.onClick,o.onClose)})})});dc.displayName=hp;var fp=f.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...o}=n;return y.jsx(he.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:e})});function pp(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),nx(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!o)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...pp(r))}}),e}function Oo(n,e,t,{discrete:r}){const o=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),r?Ha(o,s):o.dispatchEvent(s)}var Hu=(n,e,t=0)=>{const r=Math.abs(n.x),o=Math.abs(n.y),s=r>o;return e==="left"||e==="right"?s&&r>t:!s&&o>t};function tx(n=()=>{}){const e=Qe(n);Dt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function nx(n){return n.nodeType===n.ELEMENT_NODE}function rx(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ui(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var ox=rp,mp=sp,gp=ap,yp=cp,vp=lp,_p=dp,wp=dc;const sx=ox,Ep=f.forwardRef(({className:n,...e},t)=>y.jsx(mp,{ref:t,className:X("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Ep.displayName=mp.displayName;const ix=xs("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bp=f.forwardRef(({className:n,variant:e,...t},r)=>y.jsx(gp,{ref:r,className:X(ix({variant:e}),n),...t}));bp.displayName=gp.displayName;const ax=f.forwardRef(({className:n,...e},t)=>y.jsx(_p,{ref:t,className:X("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));ax.displayName=_p.displayName;const Tp=f.forwardRef(({className:n,...e},t)=>y.jsx(wp,{ref:t,className:X("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:y.jsx(ts,{className:"h-4 w-4"})}));Tp.displayName=wp.displayName;const xp=f.forwardRef(({className:n,...e},t)=>y.jsx(yp,{ref:t,className:X("text-sm font-semibold",n),...e}));xp.displayName=yp.displayName;const Ap=f.forwardRef(({className:n,...e},t)=>y.jsx(vp,{ref:t,className:X("text-sm opacity-90",n),...e}));Ap.displayName=vp.displayName;function cx(){const{toasts:n}=VT();return y.jsxs(sx,{children:[n.map(function({id:e,title:t,description:r,action:o,...s}){return y.jsxs(bp,{...s,children:[y.jsxs("div",{className:"grid gap-1",children:[t&&y.jsx(xp,{children:t}),r&&y.jsx(Ap,{children:r})]}),o,y.jsx(Tp,{})]},e)}),y.jsx(Ep,{})]})}function lx(){return y.jsxs("div",{className:"flex items-center gap-2 p-2 font-bold text-lg text-primary",children:[y.jsx(Mv,{className:"h-6 w-6"}),y.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"StockPilot"})]})}const ux=()=>{};var Gu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},dx=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const s=n[t++];e[r++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){const s=n[t++],a=n[t++],c=n[t++],l=((o&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Cp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const s=n[o],a=o+1<n.length,c=a?n[o+1]:0,l=o+2<n.length,u=l?n[o+2]:0,h=s>>2,m=(s&3)<<4|c>>4;let g=(c&15)<<2|u>>6,w=u&63;l||(w=64,a||(g=64)),r.push(t[h],t[m],t[g],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ip(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const s=t[n.charAt(o++)],c=o<n.length?t[n.charAt(o)]:0;++o;const u=o<n.length?t[n.charAt(o)]:64;++o;const m=o<n.length?t[n.charAt(o)]:64;if(++o,s==null||c==null||u==null||m==null)throw new hx;const g=s<<2|c>>4;if(r.push(g),u!==64){const w=c<<4&240|u>>2;if(r.push(w),m!==64){const I=u<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class hx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fx=function(n){const e=Ip(n);return Cp.encodeByteArray(e,!0)},cs=function(n){return fx(n).replace(/\./g,"")},px=function(n){try{return Cp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=()=>mx().__FIREBASE_DEFAULTS__,yx=()=>{if(typeof process>"u"||typeof Gu>"u")return;const n=Gu.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&px(n[1]);return e&&JSON.parse(e)},hc=()=>{try{return ux()||gx()||yx()||vx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_x=n=>{var e,t;return(t=(e=hc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},wx=n=>{const e=_x(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Rp=()=>{var n;return(n=hc())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bx(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cs(JSON.stringify(t)),cs(JSON.stringify(a)),""].join(".")}const Nr={};function xx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Nr))Nr[e]?n.emulator.push(e):n.prod.push(e);return n}function Ax(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ku=!1;function Ix(n,e){if(typeof window>"u"||typeof document>"u"||!fc(window.location.host)||Nr[n]===e||Nr[n]||Ku)return;Nr[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=xx().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ku=!0,a()},g}function h(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=Ax(r),w=t("text"),I=document.getElementById(w)||document.createElement("span"),E=t("learnmore"),b=document.getElementById(E)||document.createElement("a"),P=t("preprendIcon"),D=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const k=g.element;c(k),h(b,E);const M=u();l(D,P),k.append(D,I,b,M),document.body.appendChild(k)}s?(I.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rx(){var n;const e=(n=hc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sx(){return!Rx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Px(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var s;e(((s=o.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="FirebaseError";class ir extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Nx,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sp.prototype.create)}}class Sp{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,s=this.errors[e],a=s?kx(s,r):"Error",c=`${this.serviceName}: ${a} (${o}).`;return new ir(o,c,r)}}function kx(n,e){return n.replace(Mx,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Mx=/\{\$([^}]+)}/g;function ls(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const s=n[o],a=e[o];if(Qu(s)&&Qu(a)){if(!ls(s,a))return!1}else if(s!==a)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Qu(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n){return n&&n._delegate?n._delegate:n}class jr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Ex;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lx(e))try{this.getOrInitializeService({instanceIdentifier:vn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:o});r.resolve(s)}catch{}}}}clearInstance(e=vn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vn){return this.instances.has(e)}getOptions(e=vn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(o,s);const a=this.instances.get(o);return a&&e(a,o),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ox(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vn){return this.component?this.component.multipleInstances?e:vn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ox(n){return n===vn?void 0:n}function Lx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(le||(le={}));const jx={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},$x=le.INFO,Bx={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},Ux=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=Bx[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pp{constructor(e){this.name=e,this._logLevel=$x,this._logHandler=Ux,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const zx=(n,e)=>e.some(t=>n instanceof t);let Xu,Yu;function Wx(){return Xu||(Xu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qx(){return Yu||(Yu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dp=new WeakMap,ga=new WeakMap,Np=new WeakMap,zi=new WeakMap,pc=new WeakMap;function Hx(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(qt(n.result)),o()},a=()=>{r(n.error),o()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Dp.set(t,n)}).catch(()=>{}),pc.set(e,n),e}function Gx(n){if(ga.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),o()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});ga.set(n,e)}let ya={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ga.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Np.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Kx(n){ya=n(ya)}function Qx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Wi(this),e,...t);return Np.set(r,e.sort?e.sort():[e]),qt(r)}:qx().includes(n)?function(...e){return n.apply(Wi(this),e),qt(Dp.get(this))}:function(...e){return qt(n.apply(Wi(this),e))}}function Xx(n){return typeof n=="function"?Qx(n):(n instanceof IDBTransaction&&Gx(n),zx(n,Wx())?new Proxy(n,ya):n)}function qt(n){if(n instanceof IDBRequest)return Hx(n);if(zi.has(n))return zi.get(n);const e=Xx(n);return e!==n&&(zi.set(n,e),pc.set(e,n)),e}const Wi=n=>pc.get(n);function Yx(n,e,{blocked:t,upgrade:r,blocking:o,terminated:s}={}){const a=indexedDB.open(n,e),c=qt(a);return r&&a.addEventListener("upgradeneeded",l=>{r(qt(a.result),l.oldVersion,l.newVersion,qt(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),o&&l.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const Jx=["get","getKey","getAll","getAllKeys","count"],Zx=["put","add","delete","clear"],qi=new Map;function Ju(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qi.get(e))return qi.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=Zx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Jx.includes(t)))return;const s=async function(a,...c){const l=this.transaction(a,o?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[t](...c),o&&l.done]))[0]};return qi.set(e,s),s}Kx(n=>({...n,get:(e,t,r)=>Ju(e,t)||n.get(e,t,r),has:(e,t)=>!!Ju(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function tA(n){const e=n.getComponent();return e?.type==="VERSION"}const va="@firebase/app",Zu="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt=new Pp("@firebase/app"),nA="@firebase/app-compat",rA="@firebase/analytics-compat",oA="@firebase/analytics",sA="@firebase/app-check-compat",iA="@firebase/app-check",aA="@firebase/auth",cA="@firebase/auth-compat",lA="@firebase/database",uA="@firebase/data-connect",dA="@firebase/database-compat",hA="@firebase/functions",fA="@firebase/functions-compat",pA="@firebase/installations",mA="@firebase/installations-compat",gA="@firebase/messaging",yA="@firebase/messaging-compat",vA="@firebase/performance",_A="@firebase/performance-compat",wA="@firebase/remote-config",EA="@firebase/remote-config-compat",bA="@firebase/storage",TA="@firebase/storage-compat",xA="@firebase/firestore",AA="@firebase/ai",IA="@firebase/firestore-compat",CA="firebase",RA="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]",SA={[va]:"fire-core",[nA]:"fire-core-compat",[oA]:"fire-analytics",[rA]:"fire-analytics-compat",[iA]:"fire-app-check",[sA]:"fire-app-check-compat",[aA]:"fire-auth",[cA]:"fire-auth-compat",[lA]:"fire-rtdb",[uA]:"fire-data-connect",[dA]:"fire-rtdb-compat",[hA]:"fire-fn",[fA]:"fire-fn-compat",[pA]:"fire-iid",[mA]:"fire-iid-compat",[gA]:"fire-fcm",[yA]:"fire-fcm-compat",[vA]:"fire-perf",[_A]:"fire-perf-compat",[wA]:"fire-rc",[EA]:"fire-rc-compat",[bA]:"fire-gcs",[TA]:"fire-gcs-compat",[xA]:"fire-fst",[IA]:"fire-fst-compat",[AA]:"fire-vertex","fire-js":"fire-js",[CA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Map,PA=new Map,wa=new Map;function ed(n,e){try{n.container.addComponent(e)}catch(t){Mt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function us(n){const e=n.name;if(wa.has(e))return Mt.debug(`There were multiple attempts to register component ${e}.`),!1;wa.set(e,n);for(const t of $r.values())ed(t,n);for(const t of PA.values())ed(t,n);return!0}function DA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function NA(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ht=new Sp("app","Firebase",kA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=RA;function kp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_a,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Ht.create("bad-app-name",{appName:String(o)});if(t||(t=Rp()),!t)throw Ht.create("no-options");const s=$r.get(o);if(s){if(ls(t,s.options)&&ls(r,s.config))return s;throw Ht.create("duplicate-app",{appName:o})}const a=new Fx(o);for(const l of wa.values())a.addComponent(l);const c=new MA(t,r,a);return $r.set(o,c),c}function Mp(n=_a){const e=$r.get(n);if(!e&&n===_a&&Rp())return kp();if(!e)throw Ht.create("no-app",{appName:n});return e}function OA(){return Array.from($r.values())}function qn(n,e,t){var r;let o=(r=SA[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const s=o.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${o}" with version "${e}":`];s&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mt.warn(c.join(" "));return}us(new jr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebase-heartbeat-database",FA=1,Br="firebase-heartbeat-store";let Hi=null;function Vp(){return Hi||(Hi=Yx(LA,FA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Br)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ht.create("idb-open",{originalErrorMessage:n.message})})),Hi}async function jA(n){try{const t=(await Vp()).transaction(Br),r=await t.objectStore(Br).get(Op(n));return await t.done,r}catch(e){if(e instanceof ir)Mt.warn(e.message);else{const t=Ht.create("idb-get",{originalErrorMessage:e?.message});Mt.warn(t.message)}}}async function td(n,e){try{const r=(await Vp()).transaction(Br,"readwrite");await r.objectStore(Br).put(e,Op(n)),await r.done}catch(t){if(t instanceof ir)Mt.warn(t.message);else{const r=Ht.create("idb-set",{originalErrorMessage:t?.message});Mt.warn(r.message)}}}function Op(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=1024,BA=30;class UA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nd();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats.length>BA){const a=qA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nd(),{heartbeatsToSend:r,unsentEntries:o}=zA(this._heartbeatsCache.heartbeats),s=cs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Mt.warn(t),""}}}function nd(){return new Date().toISOString().substring(0,10)}function zA(n,e=$A){const t=[];let r=n.slice();for(const o of n){const s=t.find(a=>a.agent===o.agent);if(s){if(s.dates.push(o.date),rd(t)>e){s.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),rd(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class WA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Px()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return td(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return td(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function rd(n){return cs(JSON.stringify({version:2,heartbeats:n})).length}function qA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n){us(new jr("platform-logger",e=>new eA(e),"PRIVATE")),us(new jr("heartbeat",e=>new UA(e),"PRIVATE")),qn(va,Zu,n),qn(va,Zu,"esm2017"),qn("fire-js","")}HA("");var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gt,Lp;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function T(){}T.prototype=v.prototype,x.D=v.prototype,x.prototype=new T,x.prototype.constructor=x,x.C=function(C,R,S){for(var A=Array(arguments.length-2),U=2;U<arguments.length;U++)A[U-2]=arguments[U];return v.prototype[R].apply(C,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,v,T){T||(T=0);var C=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)C[R]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(R=0;16>R;++R)C[R]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=x.g[0],T=x.g[1],R=x.g[2];var S=x.g[3],A=v+(S^T&(R^S))+C[0]+3614090360&4294967295;v=T+(A<<7&4294967295|A>>>25),A=S+(R^v&(T^R))+C[1]+3905402710&4294967295,S=v+(A<<12&4294967295|A>>>20),A=R+(T^S&(v^T))+C[2]+606105819&4294967295,R=S+(A<<17&4294967295|A>>>15),A=T+(v^R&(S^v))+C[3]+3250441966&4294967295,T=R+(A<<22&4294967295|A>>>10),A=v+(S^T&(R^S))+C[4]+4118548399&4294967295,v=T+(A<<7&4294967295|A>>>25),A=S+(R^v&(T^R))+C[5]+1200080426&4294967295,S=v+(A<<12&4294967295|A>>>20),A=R+(T^S&(v^T))+C[6]+2821735955&4294967295,R=S+(A<<17&4294967295|A>>>15),A=T+(v^R&(S^v))+C[7]+4249261313&4294967295,T=R+(A<<22&4294967295|A>>>10),A=v+(S^T&(R^S))+C[8]+1770035416&4294967295,v=T+(A<<7&4294967295|A>>>25),A=S+(R^v&(T^R))+C[9]+2336552879&4294967295,S=v+(A<<12&4294967295|A>>>20),A=R+(T^S&(v^T))+C[10]+4294925233&4294967295,R=S+(A<<17&4294967295|A>>>15),A=T+(v^R&(S^v))+C[11]+2304563134&4294967295,T=R+(A<<22&4294967295|A>>>10),A=v+(S^T&(R^S))+C[12]+1804603682&4294967295,v=T+(A<<7&4294967295|A>>>25),A=S+(R^v&(T^R))+C[13]+4254626195&4294967295,S=v+(A<<12&4294967295|A>>>20),A=R+(T^S&(v^T))+C[14]+2792965006&4294967295,R=S+(A<<17&4294967295|A>>>15),A=T+(v^R&(S^v))+C[15]+1236535329&4294967295,T=R+(A<<22&4294967295|A>>>10),A=v+(R^S&(T^R))+C[1]+4129170786&4294967295,v=T+(A<<5&4294967295|A>>>27),A=S+(T^R&(v^T))+C[6]+3225465664&4294967295,S=v+(A<<9&4294967295|A>>>23),A=R+(v^T&(S^v))+C[11]+643717713&4294967295,R=S+(A<<14&4294967295|A>>>18),A=T+(S^v&(R^S))+C[0]+3921069994&4294967295,T=R+(A<<20&4294967295|A>>>12),A=v+(R^S&(T^R))+C[5]+3593408605&4294967295,v=T+(A<<5&4294967295|A>>>27),A=S+(T^R&(v^T))+C[10]+38016083&4294967295,S=v+(A<<9&4294967295|A>>>23),A=R+(v^T&(S^v))+C[15]+3634488961&4294967295,R=S+(A<<14&4294967295|A>>>18),A=T+(S^v&(R^S))+C[4]+3889429448&4294967295,T=R+(A<<20&4294967295|A>>>12),A=v+(R^S&(T^R))+C[9]+568446438&4294967295,v=T+(A<<5&4294967295|A>>>27),A=S+(T^R&(v^T))+C[14]+3275163606&4294967295,S=v+(A<<9&4294967295|A>>>23),A=R+(v^T&(S^v))+C[3]+4107603335&4294967295,R=S+(A<<14&4294967295|A>>>18),A=T+(S^v&(R^S))+C[8]+1163531501&4294967295,T=R+(A<<20&4294967295|A>>>12),A=v+(R^S&(T^R))+C[13]+2850285829&4294967295,v=T+(A<<5&4294967295|A>>>27),A=S+(T^R&(v^T))+C[2]+4243563512&4294967295,S=v+(A<<9&4294967295|A>>>23),A=R+(v^T&(S^v))+C[7]+1735328473&4294967295,R=S+(A<<14&4294967295|A>>>18),A=T+(S^v&(R^S))+C[12]+2368359562&4294967295,T=R+(A<<20&4294967295|A>>>12),A=v+(T^R^S)+C[5]+4294588738&4294967295,v=T+(A<<4&4294967295|A>>>28),A=S+(v^T^R)+C[8]+2272392833&4294967295,S=v+(A<<11&4294967295|A>>>21),A=R+(S^v^T)+C[11]+1839030562&4294967295,R=S+(A<<16&4294967295|A>>>16),A=T+(R^S^v)+C[14]+4259657740&4294967295,T=R+(A<<23&4294967295|A>>>9),A=v+(T^R^S)+C[1]+2763975236&4294967295,v=T+(A<<4&4294967295|A>>>28),A=S+(v^T^R)+C[4]+1272893353&4294967295,S=v+(A<<11&4294967295|A>>>21),A=R+(S^v^T)+C[7]+4139469664&4294967295,R=S+(A<<16&4294967295|A>>>16),A=T+(R^S^v)+C[10]+3200236656&4294967295,T=R+(A<<23&4294967295|A>>>9),A=v+(T^R^S)+C[13]+681279174&4294967295,v=T+(A<<4&4294967295|A>>>28),A=S+(v^T^R)+C[0]+3936430074&4294967295,S=v+(A<<11&4294967295|A>>>21),A=R+(S^v^T)+C[3]+3572445317&4294967295,R=S+(A<<16&4294967295|A>>>16),A=T+(R^S^v)+C[6]+76029189&4294967295,T=R+(A<<23&4294967295|A>>>9),A=v+(T^R^S)+C[9]+3654602809&4294967295,v=T+(A<<4&4294967295|A>>>28),A=S+(v^T^R)+C[12]+3873151461&4294967295,S=v+(A<<11&4294967295|A>>>21),A=R+(S^v^T)+C[15]+530742520&4294967295,R=S+(A<<16&4294967295|A>>>16),A=T+(R^S^v)+C[2]+3299628645&4294967295,T=R+(A<<23&4294967295|A>>>9),A=v+(R^(T|~S))+C[0]+4096336452&4294967295,v=T+(A<<6&4294967295|A>>>26),A=S+(T^(v|~R))+C[7]+1126891415&4294967295,S=v+(A<<10&4294967295|A>>>22),A=R+(v^(S|~T))+C[14]+2878612391&4294967295,R=S+(A<<15&4294967295|A>>>17),A=T+(S^(R|~v))+C[5]+4237533241&4294967295,T=R+(A<<21&4294967295|A>>>11),A=v+(R^(T|~S))+C[12]+1700485571&4294967295,v=T+(A<<6&4294967295|A>>>26),A=S+(T^(v|~R))+C[3]+2399980690&4294967295,S=v+(A<<10&4294967295|A>>>22),A=R+(v^(S|~T))+C[10]+4293915773&4294967295,R=S+(A<<15&4294967295|A>>>17),A=T+(S^(R|~v))+C[1]+2240044497&4294967295,T=R+(A<<21&4294967295|A>>>11),A=v+(R^(T|~S))+C[8]+1873313359&4294967295,v=T+(A<<6&4294967295|A>>>26),A=S+(T^(v|~R))+C[15]+4264355552&4294967295,S=v+(A<<10&4294967295|A>>>22),A=R+(v^(S|~T))+C[6]+2734768916&4294967295,R=S+(A<<15&4294967295|A>>>17),A=T+(S^(R|~v))+C[13]+1309151649&4294967295,T=R+(A<<21&4294967295|A>>>11),A=v+(R^(T|~S))+C[4]+4149444226&4294967295,v=T+(A<<6&4294967295|A>>>26),A=S+(T^(v|~R))+C[11]+3174756917&4294967295,S=v+(A<<10&4294967295|A>>>22),A=R+(v^(S|~T))+C[2]+718787259&4294967295,R=S+(A<<15&4294967295|A>>>17),A=T+(S^(R|~v))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+S&4294967295}r.prototype.u=function(x,v){v===void 0&&(v=x.length);for(var T=v-this.blockSize,C=this.B,R=this.h,S=0;S<v;){if(R==0)for(;S<=T;)o(this,x,S),S+=this.blockSize;if(typeof x=="string"){for(;S<v;)if(C[R++]=x.charCodeAt(S++),R==this.blockSize){o(this,C),R=0;break}}else for(;S<v;)if(C[R++]=x[S++],R==this.blockSize){o(this,C),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;var T=8*this.o;for(v=x.length-8;v<x.length;++v)x[v]=T&255,T/=256;for(this.u(x),x=Array(16),v=T=0;4>v;++v)for(var C=0;32>C;C+=8)x[T++]=this.g[v]>>>C&255;return x};function s(x,v){var T=c;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=v(x)}function a(x,v){this.h=v;for(var T=[],C=!0,R=x.length-1;0<=R;R--){var S=x[R]|0;C&&S==v||(T[R]=S,C=!1)}this.g=T}var c={};function l(x){return-128<=x&&128>x?s(x,function(v){return new a([v|0],0>v?-1:0)}):new a([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return b(u(-x));for(var v=[],T=1,C=0;x>=T;C++)v[C]=x/T|0,T*=4294967296;return new a(v,0)}function h(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return b(h(x.substring(1),v));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(v,8)),C=m,R=0;R<x.length;R+=8){var S=Math.min(8,x.length-R),A=parseInt(x.substring(R,R+S),v);8>S?(S=u(Math.pow(v,S)),C=C.j(S).add(u(A))):(C=C.j(T),C=C.add(u(A)))}return C}var m=l(0),g=l(1),w=l(16777216);n=a.prototype,n.m=function(){if(E(this))return-b(this).m();for(var x=0,v=1,T=0;T<this.g.length;T++){var C=this.i(T);x+=(0<=C?C:4294967296+C)*v,v*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I(this))return"0";if(E(this))return"-"+b(this).toString(x);for(var v=u(Math.pow(x,6)),T=this,C="";;){var R=M(T,v).g;T=P(T,R.j(v));var S=((0<T.g.length?T.g[0]:T.h)>>>0).toString(x);if(T=R,I(T))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function I(x){if(x.h!=0)return!1;for(var v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function E(x){return x.h==-1}n.l=function(x){return x=P(this,x),E(x)?-1:I(x)?0:1};function b(x){for(var v=x.g.length,T=[],C=0;C<v;C++)T[C]=~x.g[C];return new a(T,~x.h).add(g)}n.abs=function(){return E(this)?b(this):this},n.add=function(x){for(var v=Math.max(this.g.length,x.g.length),T=[],C=0,R=0;R<=v;R++){var S=C+(this.i(R)&65535)+(x.i(R)&65535),A=(S>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);C=A>>>16,S&=65535,A&=65535,T[R]=A<<16|S}return new a(T,T[T.length-1]&-2147483648?-1:0)};function P(x,v){return x.add(b(v))}n.j=function(x){if(I(this)||I(x))return m;if(E(this))return E(x)?b(this).j(b(x)):b(b(this).j(x));if(E(x))return b(this.j(b(x)));if(0>this.l(w)&&0>x.l(w))return u(this.m()*x.m());for(var v=this.g.length+x.g.length,T=[],C=0;C<2*v;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<x.g.length;R++){var S=this.i(C)>>>16,A=this.i(C)&65535,U=x.i(R)>>>16,oe=x.i(R)&65535;T[2*C+2*R]+=A*oe,D(T,2*C+2*R),T[2*C+2*R+1]+=S*oe,D(T,2*C+2*R+1),T[2*C+2*R+1]+=A*U,D(T,2*C+2*R+1),T[2*C+2*R+2]+=S*U,D(T,2*C+2*R+2)}for(C=0;C<v;C++)T[C]=T[2*C+1]<<16|T[2*C];for(C=v;C<2*v;C++)T[C]=0;return new a(T,0)};function D(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function k(x,v){this.g=x,this.h=v}function M(x,v){if(I(v))throw Error("division by zero");if(I(x))return new k(m,m);if(E(x))return v=M(b(x),v),new k(b(v.g),b(v.h));if(E(v))return v=M(x,b(v)),new k(b(v.g),v.h);if(30<x.g.length){if(E(x)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,C=v;0>=C.l(x);)T=O(T),C=O(C);var R=L(T,1),S=L(C,1);for(C=L(C,2),T=L(T,2);!I(C);){var A=S.add(C);0>=A.l(x)&&(R=R.add(T),S=A),C=L(C,1),T=L(T,1)}return v=P(x,R.j(v)),new k(R,v)}for(R=m;0<=x.l(v);){for(T=Math.max(1,Math.floor(x.m()/v.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=u(T),A=S.j(v);E(A)||0<A.l(x);)T-=C,S=u(T),A=S.j(v);I(S)&&(S=g),R=R.add(S),x=P(x,A)}return new k(R,x)}n.A=function(x){return M(this,x).h},n.and=function(x){for(var v=Math.max(this.g.length,x.g.length),T=[],C=0;C<v;C++)T[C]=this.i(C)&x.i(C);return new a(T,this.h&x.h)},n.or=function(x){for(var v=Math.max(this.g.length,x.g.length),T=[],C=0;C<v;C++)T[C]=this.i(C)|x.i(C);return new a(T,this.h|x.h)},n.xor=function(x){for(var v=Math.max(this.g.length,x.g.length),T=[],C=0;C<v;C++)T[C]=this.i(C)^x.i(C);return new a(T,this.h^x.h)};function O(x){for(var v=x.g.length+1,T=[],C=0;C<v;C++)T[C]=x.i(C)<<1|x.i(C-1)>>>31;return new a(T,x.h)}function L(x,v){var T=v>>5;v%=32;for(var C=x.g.length-T,R=[],S=0;S<C;S++)R[S]=0<v?x.i(S+T)>>>v|x.i(S+T+1)<<32-v:x.i(S+T);return new a(R,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lp=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Gt=a}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});var Lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fp,Ir,jp,Go,Ea,$p,Bp,Up;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,d,p){return i==Array.prototype||i==Object.prototype||(i[d]=p.value),i};function t(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lo=="object"&&Lo];for(var d=0;d<i.length;++d){var p=i[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function o(i,d){if(d)e:{var p=r;i=i.split(".");for(var _=0;_<i.length-1;_++){var N=i[_];if(!(N in p))break e;p=p[N]}i=i[i.length-1],_=p[i],d=d(_),d!=_&&d!=null&&e(p,i,{configurable:!0,writable:!0,value:d})}}function s(i,d){i instanceof String&&(i+="");var p=0,_=!1,N={next:function(){if(!_&&p<i.length){var V=p++;return{value:d(V,i[V]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}o("Array.prototype.values",function(i){return i||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function l(i){var d=typeof i;return d=d!="object"?d:i?Array.isArray(i)?"array":d:"null",d=="array"||d=="object"&&typeof i.length=="number"}function u(i){var d=typeof i;return d=="object"&&i!=null||d=="function"}function h(i,d,p){return i.call.apply(i.bind,arguments)}function m(i,d,p){if(!i)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),i.apply(d,N)}}return function(){return i.apply(d,arguments)}}function g(i,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function w(i,d){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),i.apply(this,_)}}function I(i,d){function p(){}p.prototype=d.prototype,i.aa=d.prototype,i.prototype=new p,i.prototype.constructor=i,i.Qb=function(_,N,V){for(var B=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)B[fe-2]=arguments[fe];return d.prototype[N].apply(_,B)}}function E(i){const d=i.length;if(0<d){const p=Array(d);for(let _=0;_<d;_++)p[_]=i[_];return p}return[]}function b(i,d){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(l(_)){const N=i.length||0,V=_.length||0;i.length=N+V;for(let B=0;B<V;B++)i[N+B]=_[B]}else i.push(_)}}class P{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function D(i){return/^[\s\xa0]*$/.test(i)}function k(){var i=c.navigator;return i&&(i=i.userAgent)?i:""}function M(i){return M[" "](i),i}M[" "]=function(){};var O=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function L(i,d,p){for(const _ in i)d.call(p,i[_],_,i)}function x(i,d){for(const p in i)d.call(void 0,i[p],p,i)}function v(i){const d={};for(const p in i)d[p]=i[p];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(i,d){let p,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(p in _)i[p]=_[p];for(let V=0;V<T.length;V++)p=T[V],Object.prototype.hasOwnProperty.call(_,p)&&(i[p]=_[p])}}function R(i){var d=1;i=i.split(":");const p=[];for(;0<d&&i.length;)p.push(i.shift()),d--;return i.length&&p.push(i.join(":")),p}function S(i){c.setTimeout(()=>{throw i},0)}function A(){var i=z;let d=null;return i.g&&(d=i.g,i.g=i.g.next,i.g||(i.h=null),d.next=null),d}class U{constructor(){this.h=this.g=null}add(d,p){const _=oe.get();_.set(d,p),this.h?this.h.next=_:this.g=_,this.h=_}}var oe=new P(()=>new Y,i=>i.reset());class Y{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let re,$=!1,z=new U,me=()=>{const i=c.Promise.resolve(void 0);re=()=>{i.then(De)}};var De=()=>{for(var i;i=A();){try{i.h.call(i.g)}catch(p){S(p)}var d=oe;d.j(i),100>d.h&&(d.h++,i.next=d.g,d.g=i)}$=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(i,d){this.type=i,this.g=this.target=d,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var i=!1,d=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const p=()=>{};c.addEventListener("test",p,d),c.removeEventListener("test",p,d)}catch{}return i})();function ze(i,d){if(te.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var p=this.type=i.type,_=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=d,d=i.relatedTarget){if(O){e:{try{M(d.nodeName);var N=!0;break e}catch{}N=!1}N||(d=null)}}else p=="mouseover"?d=i.fromElement:p=="mouseout"&&(d=i.toElement);this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=typeof i.pointerType=="string"?i.pointerType:tt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ze.aa.h.call(this)}}I(ze,te);var tt={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),dt=0;function Lt(i,d,p,_,N){this.listener=i,this.proxy=null,this.src=d,this.type=p,this.capture=!!_,this.ha=N,this.key=++dt,this.da=this.fa=!1}function ot(i){i.da=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function ht(i){this.src=i,this.g={},this.h=0}ht.prototype.add=function(i,d,p,_,N){var V=i.toString();i=this.g[V],i||(i=this.g[V]=[],this.h++);var B=Ft(i,d,_,N);return-1<B?(d=i[B],p||(d.fa=!1)):(d=new Lt(d,this.src,V,!!_,N),d.fa=p,i.push(d)),d};function ft(i,d){var p=d.type;if(p in i.g){var _=i.g[p],N=Array.prototype.indexOf.call(_,d,void 0),V;(V=0<=N)&&Array.prototype.splice.call(_,N,1),V&&(ot(d),i.g[p].length==0&&(delete i.g[p],i.h--))}}function Ft(i,d,p,_){for(var N=0;N<i.length;++N){var V=i[N];if(!V.da&&V.listener==d&&V.capture==!!p&&V.ha==_)return N}return-1}var ai="closure_lm_"+(1e6*Math.random()|0),ci={};function rl(i,d,p,_,N){if(Array.isArray(d)){for(var V=0;V<d.length;V++)rl(i,d[V],p,_,N);return null}return p=il(p),i&&i[ne]?i.K(d,p,u(_)?!!_.capture:!1,N):Ay(i,d,p,!1,_,N)}function Ay(i,d,p,_,N,V){if(!d)throw Error("Invalid event type");var B=u(N)?!!N.capture:!!N,fe=ui(i);if(fe||(i[ai]=fe=new ht(i)),p=fe.add(d,p,_,B,V),p.proxy)return p;if(_=Iy(),p.proxy=_,_.src=i,_.listener=p,i.addEventListener)_e||(N=B),N===void 0&&(N=!1),i.addEventListener(d.toString(),_,N);else if(i.attachEvent)i.attachEvent(sl(d.toString()),_);else if(i.addListener&&i.removeListener)i.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Iy(){function i(p){return d.call(i.src,i.listener,p)}const d=Cy;return i}function ol(i,d,p,_,N){if(Array.isArray(d))for(var V=0;V<d.length;V++)ol(i,d[V],p,_,N);else _=u(_)?!!_.capture:!!_,p=il(p),i&&i[ne]?(i=i.i,d=String(d).toString(),d in i.g&&(V=i.g[d],p=Ft(V,p,_,N),-1<p&&(ot(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete i.g[d],i.h--)))):i&&(i=ui(i))&&(d=i.g[d.toString()],i=-1,d&&(i=Ft(d,p,_,N)),(p=-1<i?d[i]:null)&&li(p))}function li(i){if(typeof i!="number"&&i&&!i.da){var d=i.src;if(d&&d[ne])ft(d.i,i);else{var p=i.type,_=i.proxy;d.removeEventListener?d.removeEventListener(p,_,i.capture):d.detachEvent?d.detachEvent(sl(p),_):d.addListener&&d.removeListener&&d.removeListener(_),(p=ui(d))?(ft(p,i),p.h==0&&(p.src=null,d[ai]=null)):ot(i)}}}function sl(i){return i in ci?ci[i]:ci[i]="on"+i}function Cy(i,d){if(i.da)i=!0;else{d=new ze(d,this);var p=i.listener,_=i.ha||i.src;i.fa&&li(i),i=p.call(_,d)}return i}function ui(i){return i=i[ai],i instanceof ht?i:null}var di="__closure_events_fn_"+(1e9*Math.random()>>>0);function il(i){return typeof i=="function"?i:(i[di]||(i[di]=function(d){return i.handleEvent(d)}),i[di])}function Oe(){ve.call(this),this.i=new ht(this),this.M=this,this.F=null}I(Oe,ve),Oe.prototype[ne]=!0,Oe.prototype.removeEventListener=function(i,d,p,_){ol(this,i,d,p,_)};function We(i,d){var p,_=i.F;if(_)for(p=[];_;_=_.F)p.push(_);if(i=i.M,_=d.type||d,typeof d=="string")d=new te(d,i);else if(d instanceof te)d.target=d.target||i;else{var N=d;d=new te(_,i),C(d,N)}if(N=!0,p)for(var V=p.length-1;0<=V;V--){var B=d.g=p[V];N=ho(B,_,!0,d)&&N}if(B=d.g=i,N=ho(B,_,!0,d)&&N,N=ho(B,_,!1,d)&&N,p)for(V=0;V<p.length;V++)B=d.g=p[V],N=ho(B,_,!1,d)&&N}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var i=this.i,d;for(d in i.g){for(var p=i.g[d],_=0;_<p.length;_++)ot(p[_]);delete i.g[d],i.h--}}this.F=null},Oe.prototype.K=function(i,d,p,_){return this.i.add(String(i),d,!1,p,_)},Oe.prototype.L=function(i,d,p,_){return this.i.add(String(i),d,!0,p,_)};function ho(i,d,p,_){if(d=i.i.g[String(d)],!d)return!0;d=d.concat();for(var N=!0,V=0;V<d.length;++V){var B=d[V];if(B&&!B.da&&B.capture==p){var fe=B.listener,Ne=B.ha||B.src;B.fa&&ft(i.i,B),N=fe.call(Ne,_)!==!1&&N}}return N&&!_.defaultPrevented}function al(i,d,p){if(typeof i=="function")p&&(i=g(i,p));else if(i&&typeof i.handleEvent=="function")i=g(i.handleEvent,i);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(i,d||0)}function cl(i){i.g=al(()=>{i.g=null,i.i&&(i.i=!1,cl(i))},i.l);const d=i.h;i.h=null,i.m.apply(null,d)}class Ry extends ve{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:cl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(i){ve.call(this),this.h=i,this.g={}}I(dr,ve);var ll=[];function ul(i){L(i.g,function(d,p){this.g.hasOwnProperty(p)&&li(d)},i),i.g={}}dr.prototype.N=function(){dr.aa.N.call(this),ul(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hi=c.JSON.stringify,Sy=c.JSON.parse,Py=class{stringify(i){return c.JSON.stringify(i,void 0)}parse(i){return c.JSON.parse(i,void 0)}};function fi(){}fi.prototype.h=null;function dl(i){return i.h||(i.h=i.i())}function hl(){}var hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pi(){te.call(this,"d")}I(pi,te);function mi(){te.call(this,"c")}I(mi,te);var hn={},fl=null;function fo(){return fl=fl||new Oe}hn.La="serverreachability";function pl(i){te.call(this,hn.La,i)}I(pl,te);function fr(i){const d=fo();We(d,new pl(d))}hn.STAT_EVENT="statevent";function ml(i,d){te.call(this,hn.STAT_EVENT,i),this.stat=d}I(ml,te);function qe(i){const d=fo();We(d,new ml(d,i))}hn.Ma="timingevent";function gl(i,d){te.call(this,hn.Ma,i),this.size=d}I(gl,te);function pr(i,d){if(typeof i!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){i()},d)}function mr(){this.g=!0}mr.prototype.xa=function(){this.g=!1};function Dy(i,d,p,_,N,V){i.info(function(){if(i.g)if(V)for(var B="",fe=V.split("&"),Ne=0;Ne<fe.length;Ne++){var ue=fe[Ne].split("=");if(1<ue.length){var Le=ue[0];ue=ue[1];var Fe=Le.split("_");B=2<=Fe.length&&Fe[1]=="type"?B+(Le+"="+ue+"&"):B+(Le+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+d+`
`+p+`
`+B})}function Ny(i,d,p,_,N,V,B){i.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+d+`
`+p+`
`+V+" "+B})}function Sn(i,d,p,_){i.info(function(){return"XMLHTTP TEXT ("+d+"): "+My(i,p)+(_?" "+_:"")})}function ky(i,d){i.info(function(){return"TIMEOUT: "+d})}mr.prototype.info=function(){};function My(i,d){if(!i.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(i=0;i<p.length;i++)if(Array.isArray(p[i])){var _=p[i];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<N.length;B++)N[B]=""}}}}return hi(p)}catch{return d}}var po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gi;function mo(){}I(mo,fi),mo.prototype.g=function(){return new XMLHttpRequest},mo.prototype.i=function(){return{}},gi=new mo;function jt(i,d,p,_){this.j=i,this.i=d,this.l=p,this.R=_||1,this.U=new dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vl}function vl(){this.i=null,this.g="",this.h=!1}var _l={},yi={};function vi(i,d,p){i.L=1,i.v=_o(Ct(d)),i.m=p,i.P=!0,wl(i,null)}function wl(i,d){i.F=Date.now(),go(i),i.A=Ct(i.v);var p=i.A,_=i.R;Array.isArray(_)||(_=[String(_)]),Ml(p.i,"t",_),i.C=0,p=i.j.J,i.h=new vl,i.g=Jl(i.j,p?d:null,!i.m),0<i.O&&(i.M=new Ry(g(i.Y,i,i.g),i.O)),d=i.U,p=i.g,_=i.ca;var N="readystatechange";Array.isArray(N)||(N&&(ll[0]=N.toString()),N=ll);for(var V=0;V<N.length;V++){var B=rl(p,N[V],_||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=i.H?v(i.H):{},i.m?(i.u||(i.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.m,d)):(i.u="GET",i.g.ea(i.A,i.u,null,d)),fr(),Dy(i.i,i.u,i.A,i.l,i.R,i.m)}jt.prototype.ca=function(i){i=i.target;const d=this.M;d&&Rt(i)==3?d.j():this.Y(i)},jt.prototype.Y=function(i){try{if(i==this.g)e:{const Fe=Rt(this.g);var d=this.g.Ba();const Nn=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Bl(this.g)))){this.J||Fe!=4||d==7||(d==8||0>=Nn?fr(3):fr(2)),_i(this);var p=this.g.Z();this.X=p;t:if(El(this)){var _=Bl(this.g);i="";var N=_.length,V=Rt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),gr(this);var B="";break t}this.h.i=new c.TextDecoder}for(d=0;d<N;d++)this.h.h=!0,i+=this.h.i.decode(_[d],{stream:!(V&&d==N-1)});_.length=0,this.h.g+=i,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,Ny(this.i,this.u,this.A,this.l,this.R,Fe,p),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Ne=this.g;if((fe=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(fe)){var ue=fe;break t}}ue=null}if(p=ue)Sn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wi(this,p);else{this.o=!1,this.s=3,qe(12),fn(this),gr(this);break e}}if(this.P){p=!0;let st;for(;!this.J&&this.C<B.length;)if(st=Vy(this,B),st==yi){Fe==4&&(this.s=4,qe(14),p=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(st==_l){this.s=4,qe(15),Sn(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else Sn(this.i,this.l,st,null),wi(this,st);if(El(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||B.length!=0||this.h.h||(this.s=1,qe(16),p=!1),this.o=this.o&&p,!p)Sn(this.i,this.l,B,"[Invalid Chunked Response]"),fn(this),gr(this);else if(0<B.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Ii(Le),Le.M=!0,qe(11))}}else Sn(this.i,this.l,B,null),wi(this,B);Fe==4&&fn(this),this.o&&!this.J&&(Fe==4?Kl(this.j,this):(this.o=!1,go(this)))}else Jy(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),fn(this),gr(this)}}}catch{}finally{}};function El(i){return i.g?i.u=="GET"&&i.L!=2&&i.j.Ca:!1}function Vy(i,d){var p=i.C,_=d.indexOf(`
`,p);return _==-1?yi:(p=Number(d.substring(p,_)),isNaN(p)?_l:(_+=1,_+p>d.length?yi:(d=d.slice(_,_+p),i.C=_+p,d)))}jt.prototype.cancel=function(){this.J=!0,fn(this)};function go(i){i.S=Date.now()+i.I,bl(i,i.I)}function bl(i,d){if(i.B!=null)throw Error("WatchDog timer not null");i.B=pr(g(i.ba,i),d)}function _i(i){i.B&&(c.clearTimeout(i.B),i.B=null)}jt.prototype.ba=function(){this.B=null;const i=Date.now();0<=i-this.S?(ky(this.i,this.A),this.L!=2&&(fr(),qe(17)),fn(this),this.s=2,gr(this)):bl(this,this.S-i)};function gr(i){i.j.G==0||i.J||Kl(i.j,i)}function fn(i){_i(i);var d=i.M;d&&typeof d.ma=="function"&&d.ma(),i.M=null,ul(i.U),i.g&&(d=i.g,i.g=null,d.abort(),d.ma())}function wi(i,d){try{var p=i.j;if(p.G!=0&&(p.g==i||Ei(p.h,i))){if(!i.K&&Ei(p.h,i)&&p.G==3){try{var _=p.Da.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<i.F)Ao(p),To(p);else break e;Ai(p),qe(18)}}else p.za=N[1],0<p.za-p.T&&37500>N[2]&&p.F&&p.v==0&&!p.C&&(p.C=pr(g(p.Za,p),6e3));if(1>=Al(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else mn(p,11)}else if((i.K||p.g==i)&&Ao(p),!D(d))for(N=p.Da.g.parse(d),d=0;d<N.length;d++){let ue=N[d];if(p.T=ue[0],ue=ue[1],p.G==2)if(ue[0]=="c"){p.K=ue[1],p.ia=ue[2];const Le=ue[3];Le!=null&&(p.la=Le,p.j.info("VER="+p.la));const Fe=ue[4];Fe!=null&&(p.Aa=Fe,p.j.info("SVER="+p.Aa));const Nn=ue[5];Nn!=null&&typeof Nn=="number"&&0<Nn&&(_=1.5*Nn,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const st=i.g;if(st){const Co=st.g?st.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var V=_.h;V.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(bi(V,V.h),V.h=null))}if(_.D){const Ci=st.g?st.g.getResponseHeader("X-HTTP-Session-Id"):null;Ci&&(_.ya=Ci,ge(_.I,_.D,Ci))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-i.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var B=i;if(_.qa=Yl(_,_.J?_.ia:null,_.W),B.K){Il(_.h,B);var fe=B,Ne=_.L;Ne&&(fe.I=Ne),fe.B&&(_i(fe),go(fe)),_.g=B}else Hl(_);0<p.i.length&&xo(p)}else ue[0]!="stop"&&ue[0]!="close"||mn(p,7);else p.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?mn(p,7):xi(p):ue[0]!="noop"&&p.l&&p.l.ta(ue),p.v=0)}}fr(4)}catch{}}var Oy=class{constructor(i,d){this.g=i,this.map=d}};function Tl(i){this.l=i||10,c.PerformanceNavigationTiming?(i=c.performance.getEntriesByType("navigation"),i=0<i.length&&(i[0].nextHopProtocol=="hq"||i[0].nextHopProtocol=="h2")):i=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xl(i){return i.h?!0:i.g?i.g.size>=i.j:!1}function Al(i){return i.h?1:i.g?i.g.size:0}function Ei(i,d){return i.h?i.h==d:i.g?i.g.has(d):!1}function bi(i,d){i.g?i.g.add(d):i.h=d}function Il(i,d){i.h&&i.h==d?i.h=null:i.g&&i.g.has(d)&&i.g.delete(d)}Tl.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const i of this.g.values())i.cancel();this.g.clear()}};function Cl(i){if(i.h!=null)return i.i.concat(i.h.D);if(i.g!=null&&i.g.size!==0){let d=i.i;for(const p of i.g.values())d=d.concat(p.D);return d}return E(i.i)}function Ly(i){if(i.V&&typeof i.V=="function")return i.V();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if(typeof i=="string")return i.split("");if(l(i)){for(var d=[],p=i.length,_=0;_<p;_++)d.push(i[_]);return d}d=[],p=0;for(_ in i)d[p++]=i[_];return d}function Fy(i){if(i.na&&typeof i.na=="function")return i.na();if(!i.V||typeof i.V!="function"){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(l(i)||typeof i=="string"){var d=[];i=i.length;for(var p=0;p<i;p++)d.push(p);return d}d=[],p=0;for(const _ in i)d[p++]=_;return d}}}function Rl(i,d){if(i.forEach&&typeof i.forEach=="function")i.forEach(d,void 0);else if(l(i)||typeof i=="string")Array.prototype.forEach.call(i,d,void 0);else for(var p=Fy(i),_=Ly(i),N=_.length,V=0;V<N;V++)d.call(void 0,_[V],p&&p[V],i)}var Sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jy(i,d){if(i){i=i.split("&");for(var p=0;p<i.length;p++){var _=i[p].indexOf("="),N=null;if(0<=_){var V=i[p].substring(0,_);N=i[p].substring(_+1)}else V=i[p];d(V,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function pn(i){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,i instanceof pn){this.h=i.h,yo(this,i.j),this.o=i.o,this.g=i.g,vo(this,i.s),this.l=i.l;var d=i.i,p=new _r;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),Pl(this,p),this.m=i.m}else i&&(d=String(i).match(Sl))?(this.h=!1,yo(this,d[1]||"",!0),this.o=yr(d[2]||""),this.g=yr(d[3]||"",!0),vo(this,d[4]),this.l=yr(d[5]||"",!0),Pl(this,d[6]||"",!0),this.m=yr(d[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}pn.prototype.toString=function(){var i=[],d=this.j;d&&i.push(vr(d,Dl,!0),":");var p=this.g;return(p||d=="file")&&(i.push("//"),(d=this.o)&&i.push(vr(d,Dl,!0),"@"),i.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&i.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&i.push("/"),i.push(vr(p,p.charAt(0)=="/"?Uy:By,!0))),(p=this.i.toString())&&i.push("?",p),(p=this.m)&&i.push("#",vr(p,Wy)),i.join("")};function Ct(i){return new pn(i)}function yo(i,d,p){i.j=p?yr(d,!0):d,i.j&&(i.j=i.j.replace(/:$/,""))}function vo(i,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);i.s=d}else i.s=null}function Pl(i,d,p){d instanceof _r?(i.i=d,qy(i.i,i.h)):(p||(d=vr(d,zy)),i.i=new _r(d,i.h))}function ge(i,d,p){i.i.set(d,p)}function _o(i){return ge(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function yr(i,d){return i?d?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function vr(i,d,p){return typeof i=="string"?(i=encodeURI(i).replace(d,$y),p&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function $y(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var Dl=/[#\/\?@]/g,By=/[#\?:]/g,Uy=/[#\?]/g,zy=/[#\?@]/g,Wy=/#/g;function _r(i,d){this.h=this.g=null,this.i=i||null,this.j=!!d}function $t(i){i.g||(i.g=new Map,i.h=0,i.i&&jy(i.i,function(d,p){i.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=_r.prototype,n.add=function(i,d){$t(this),this.i=null,i=Pn(this,i);var p=this.g.get(i);return p||this.g.set(i,p=[]),p.push(d),this.h+=1,this};function Nl(i,d){$t(i),d=Pn(i,d),i.g.has(d)&&(i.i=null,i.h-=i.g.get(d).length,i.g.delete(d))}function kl(i,d){return $t(i),d=Pn(i,d),i.g.has(d)}n.forEach=function(i,d){$t(this),this.g.forEach(function(p,_){p.forEach(function(N){i.call(d,N,_,this)},this)},this)},n.na=function(){$t(this);const i=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let _=0;_<d.length;_++){const N=i[_];for(let V=0;V<N.length;V++)p.push(d[_])}return p},n.V=function(i){$t(this);let d=[];if(typeof i=="string")kl(this,i)&&(d=d.concat(this.g.get(Pn(this,i))));else{i=Array.from(this.g.values());for(let p=0;p<i.length;p++)d=d.concat(i[p])}return d},n.set=function(i,d){return $t(this),this.i=null,i=Pn(this,i),kl(this,i)&&(this.h-=this.g.get(i).length),this.g.set(i,[d]),this.h+=1,this},n.get=function(i,d){return i?(i=this.V(i),0<i.length?String(i[0]):d):d};function Ml(i,d,p){Nl(i,d),0<p.length&&(i.i=null,i.g.set(Pn(i,d),E(p)),i.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var _=d[p];const V=encodeURIComponent(String(_)),B=this.V(_);for(_=0;_<B.length;_++){var N=V;B[_]!==""&&(N+="="+encodeURIComponent(String(B[_]))),i.push(N)}}return this.i=i.join("&")};function Pn(i,d){return d=String(d),i.j&&(d=d.toLowerCase()),d}function qy(i,d){d&&!i.j&&($t(i),i.i=null,i.g.forEach(function(p,_){var N=_.toLowerCase();_!=N&&(Nl(this,_),Ml(this,N,p))},i)),i.j=d}function Hy(i,d){const p=new mr;if(c.Image){const _=new Image;_.onload=w(Bt,p,"TestLoadImage: loaded",!0,d,_),_.onerror=w(Bt,p,"TestLoadImage: error",!1,d,_),_.onabort=w(Bt,p,"TestLoadImage: abort",!1,d,_),_.ontimeout=w(Bt,p,"TestLoadImage: timeout",!1,d,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=i}else d(!1)}function Gy(i,d){const p=new mr,_=new AbortController,N=setTimeout(()=>{_.abort(),Bt(p,"TestPingServer: timeout",!1,d)},1e4);fetch(i,{signal:_.signal}).then(V=>{clearTimeout(N),V.ok?Bt(p,"TestPingServer: ok",!0,d):Bt(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(N),Bt(p,"TestPingServer: error",!1,d)})}function Bt(i,d,p,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(p)}catch{}}function Ky(){this.g=new Py}function Qy(i,d,p){const _=p||"";try{Rl(i,function(N,V){let B=N;u(N)&&(B=hi(N)),d.push(_+V+"="+encodeURIComponent(B))})}catch(N){throw d.push(_+"type="+encodeURIComponent("_badmap")),N}}function wo(i){this.l=i.Ub||null,this.j=i.eb||!1}I(wo,fi),wo.prototype.g=function(){return new Eo(this.l,this.j)},wo.prototype.i=(function(i){return function(){return i}})({});function Eo(i,d){Oe.call(this),this.D=i,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Eo,Oe),n=Eo.prototype,n.open=function(i,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=i,this.A=d,this.readyState=1,Er(this)},n.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};i&&(d.body=i),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wr(this)),this.readyState=0},n.Sa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Er(this)),this.g&&(this.readyState=3,Er(this),this.g)))if(this.responseType==="arraybuffer")i.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vl(this)}else i.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vl(i){i.j.read().then(i.Pa.bind(i)).catch(i.ga.bind(i))}n.Pa=function(i){if(this.g){if(this.o&&i.value)this.response.push(i.value);else if(!this.o){var d=i.value?i.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!i.done}))&&(this.response=this.responseText+=d)}i.done?wr(this):Er(this),this.readyState==3&&Vl(this)}},n.Ra=function(i){this.g&&(this.response=this.responseText=i,wr(this))},n.Qa=function(i){this.g&&(this.response=i,wr(this))},n.ga=function(){this.g&&wr(this)};function wr(i){i.readyState=4,i.l=null,i.j=null,i.v=null,Er(i)}n.setRequestHeader=function(i,d){this.u.append(i,d)},n.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,i.push(p[0]+": "+p[1]),p=d.next();return i.join(`\r
`)};function Er(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(i){this.m=i?"include":"same-origin"}});function Ol(i){let d="";return L(i,function(p,_){d+=_,d+=":",d+=p,d+=`\r
`}),d}function Ti(i,d,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Ol(p),typeof i=="string"?p!=null&&encodeURIComponent(String(p)):ge(i,d,p))}function Ee(i){Oe.call(this),this.headers=new Map,this.o=i||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ee,Oe);var Xy=/^https?$/i,Yy=["POST","PUT"];n=Ee.prototype,n.Ha=function(i){this.J=i},n.ea=function(i,d,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+i);d=d?d.toUpperCase():"GET",this.D=i,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gi.g(),this.v=this.o?dl(this.o):dl(gi),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(i),!0),this.B=!1}catch(V){Ll(this,V);return}if(i=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)p.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())p.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),N=c.FormData&&i instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Yy,d,void 0))||_||N||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of p)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$l(this),this.u=!0,this.g.send(i),this.u=!1}catch(V){Ll(this,V)}};function Ll(i,d){i.h=!1,i.g&&(i.j=!0,i.g.abort(),i.j=!1),i.l=d,i.m=5,Fl(i),bo(i)}function Fl(i){i.A||(i.A=!0,We(i,"complete"),We(i,"error"))}n.abort=function(i){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=i||7,We(this,"complete"),We(this,"abort"),bo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bo(this,!0)),Ee.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jl(this):this.bb())},n.bb=function(){jl(this)};function jl(i){if(i.h&&typeof a<"u"&&(!i.v[1]||Rt(i)!=4||i.Z()!=2)){if(i.u&&Rt(i)==4)al(i.Ea,0,i);else if(We(i,"readystatechange"),Rt(i)==4){i.h=!1;try{const B=i.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var _;if(_=B===0){var N=String(i.D).match(Sl)[1]||null;!N&&c.self&&c.self.location&&(N=c.self.location.protocol.slice(0,-1)),_=!Xy.test(N?N.toLowerCase():"")}p=_}if(p)We(i,"complete"),We(i,"success");else{i.m=6;try{var V=2<Rt(i)?i.g.statusText:""}catch{V=""}i.l=V+" ["+i.Z()+"]",Fl(i)}}finally{bo(i)}}}}function bo(i,d){if(i.g){$l(i);const p=i.g,_=i.v[0]?()=>{}:null;i.g=null,i.v=null,d||We(i,"ready");try{p.onreadystatechange=_}catch{}}}function $l(i){i.I&&(c.clearTimeout(i.I),i.I=null)}n.isActive=function(){return!!this.g};function Rt(i){return i.g?i.g.readyState:0}n.Z=function(){try{return 2<Rt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(i){if(this.g){var d=this.g.responseText;return i&&d.indexOf(i)==0&&(d=d.substring(i.length)),Sy(d)}};function Bl(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.H){case"":case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Jy(i){const d={};i=(i.g&&2<=Rt(i)&&i.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<i.length;_++){if(D(i[_]))continue;var p=R(i[_]);const N=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=d[N]||[];d[N]=V,V.push(p)}x(d,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(i,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[i]||d}function Ul(i){this.Aa=0,this.i=[],this.j=new mr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,i),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,i),this.cb=br("retryDelaySeedMs",1e4,i),this.Wa=br("forwardChannelMaxRetries",2,i),this.wa=br("forwardChannelRequestTimeoutMs",2e4,i),this.pa=i&&i.xmlHttpFactory||void 0,this.Xa=i&&i.Tb||void 0,this.Ca=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.h=new Tl(i&&i.concurrentRequestLimit),this.Da=new Ky,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=i&&i.Rb||!1,i&&i.xa&&this.j.xa(),i&&i.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&i&&i.detectBufferingProxy||!1,this.ja=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.ja=i.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ul.prototype,n.la=8,n.G=1,n.connect=function(i,d,p,_){qe(0),this.W=i,this.H=d||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=Yl(this,null,this.W),xo(this)};function xi(i){if(zl(i),i.G==3){var d=i.U++,p=Ct(i.I);if(ge(p,"SID",i.K),ge(p,"RID",d),ge(p,"TYPE","terminate"),Tr(i,p),d=new jt(i,i.j,d),d.L=2,d.v=_o(Ct(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=d.v,p=!0),p||(d.g=Jl(d.j,null),d.g.ea(d.v)),d.F=Date.now(),go(d)}Xl(i)}function To(i){i.g&&(Ii(i),i.g.cancel(),i.g=null)}function zl(i){To(i),i.u&&(c.clearTimeout(i.u),i.u=null),Ao(i),i.h.cancel(),i.s&&(typeof i.s=="number"&&c.clearTimeout(i.s),i.s=null)}function xo(i){if(!xl(i.h)&&!i.s){i.s=!0;var d=i.Ga;re||me(),$||(re(),$=!0),z.add(d,i),i.B=0}}function Zy(i,d){return Al(i.h)>=i.h.j-(i.s?1:0)?!1:i.s?(i.i=d.D.concat(i.i),!0):i.G==1||i.G==2||i.B>=(i.Va?0:i.Wa)?!1:(i.s=pr(g(i.Ga,i,d),Ql(i,i.B)),i.B++,!0)}n.Ga=function(i){if(this.s)if(this.s=null,this.G==1){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const N=new jt(this,this.j,i);let V=this.o;if(this.S&&(V?(V=v(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(N.H=V,V=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=ql(this,N,d),p=Ct(this.I),ge(p,"RID",i),ge(p,"CVER",22),this.D&&ge(p,"X-HTTP-Session-Id",this.D),Tr(this,p),V&&(this.O?d="headers="+encodeURIComponent(String(Ol(V)))+"&"+d:this.m&&Ti(p,this.m,V)),bi(this.h,N),this.Ua&&ge(p,"TYPE","init"),this.P?(ge(p,"$req",d),ge(p,"SID","null"),N.T=!0,vi(N,p,null)):vi(N,p,d),this.G=2}}else this.G==3&&(i?Wl(this,i):this.i.length==0||xl(this.h)||Wl(this))};function Wl(i,d){var p;d?p=d.l:p=i.U++;const _=Ct(i.I);ge(_,"SID",i.K),ge(_,"RID",p),ge(_,"AID",i.T),Tr(i,_),i.m&&i.o&&Ti(_,i.m,i.o),p=new jt(i,i.j,p,i.B+1),i.m===null&&(p.H=i.o),d&&(i.i=d.D.concat(i.i)),d=ql(i,p,1e3),p.I=Math.round(.5*i.wa)+Math.round(.5*i.wa*Math.random()),bi(i.h,p),vi(p,_,d)}function Tr(i,d){i.H&&L(i.H,function(p,_){ge(d,_,p)}),i.l&&Rl({},function(p,_){ge(d,_,p)})}function ql(i,d,p){p=Math.min(i.i.length,p);var _=i.l?g(i.l.Na,i.l,i):null;e:{var N=i.i;let V=-1;for(;;){const B=["count="+p];V==-1?0<p?(V=N[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let fe=!0;for(let Ne=0;Ne<p;Ne++){let ue=N[Ne].g;const Le=N[Ne].map;if(ue-=V,0>ue)V=Math.max(0,N[Ne].g-100),fe=!1;else try{Qy(Le,B,"req"+ue+"_")}catch{_&&_(Le)}}if(fe){_=B.join("&");break e}}}return i=i.i.splice(0,p),d.D=i,_}function Hl(i){if(!i.g&&!i.u){i.Y=1;var d=i.Fa;re||me(),$||(re(),$=!0),z.add(d,i),i.v=0}}function Ai(i){return i.g||i.u||3<=i.v?!1:(i.Y++,i.u=pr(g(i.Fa,i),Ql(i,i.v)),i.v++,!0)}n.Fa=function(){if(this.u=null,Gl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var i=2*this.R;this.j.info("BP detection timer enabled: "+i),this.A=pr(g(this.ab,this),i)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),To(this),Gl(this))};function Ii(i){i.A!=null&&(c.clearTimeout(i.A),i.A=null)}function Gl(i){i.g=new jt(i,i.j,"rpc",i.Y),i.m===null&&(i.g.H=i.o),i.g.O=0;var d=Ct(i.qa);ge(d,"RID","rpc"),ge(d,"SID",i.K),ge(d,"AID",i.T),ge(d,"CI",i.F?"0":"1"),!i.F&&i.ja&&ge(d,"TO",i.ja),ge(d,"TYPE","xmlhttp"),Tr(i,d),i.m&&i.o&&Ti(d,i.m,i.o),i.L&&(i.g.I=i.L);var p=i.g;i=i.ia,p.L=1,p.v=_o(Ct(d)),p.m=null,p.P=!0,wl(p,i)}n.Za=function(){this.C!=null&&(this.C=null,To(this),Ai(this),qe(19))};function Ao(i){i.C!=null&&(c.clearTimeout(i.C),i.C=null)}function Kl(i,d){var p=null;if(i.g==d){Ao(i),Ii(i),i.g=null;var _=2}else if(Ei(i.h,d))p=d.D,Il(i.h,d),_=1;else return;if(i.G!=0){if(d.o)if(_==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var N=i.B;_=fo(),We(_,new gl(_,p)),xo(i)}else Hl(i);else if(N=d.s,N==3||N==0&&0<d.X||!(_==1&&Zy(i,d)||_==2&&Ai(i)))switch(p&&0<p.length&&(d=i.h,d.i=d.i.concat(p)),N){case 1:mn(i,5);break;case 4:mn(i,10);break;case 3:mn(i,6);break;default:mn(i,2)}}}function Ql(i,d){let p=i.Ta+Math.floor(Math.random()*i.cb);return i.isActive()||(p*=2),p*d}function mn(i,d){if(i.j.info("Error code "+d),d==2){var p=g(i.fb,i),_=i.Xa;const N=!_;_=new pn(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||yo(_,"https"),_o(_),N?Hy(_.toString(),p):Gy(_.toString(),p)}else qe(2);i.G=0,i.l&&i.l.sa(d),Xl(i),zl(i)}n.fb=function(i){i?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function Xl(i){if(i.G=0,i.ka=[],i.l){const d=Cl(i.h);(d.length!=0||i.i.length!=0)&&(b(i.ka,d),b(i.ka,i.i),i.h.i.length=0,E(i.i),i.i.length=0),i.l.ra()}}function Yl(i,d,p){var _=p instanceof pn?Ct(p):new pn(p);if(_.g!="")d&&(_.g=d+"."+_.g),vo(_,_.s);else{var N=c.location;_=N.protocol,d=d?d+"."+N.hostname:N.hostname,N=+N.port;var V=new pn(null);_&&yo(V,_),d&&(V.g=d),N&&vo(V,N),p&&(V.l=p),_=V}return p=i.D,d=i.ya,p&&d&&ge(_,p,d),ge(_,"VER",i.la),Tr(i,_),_}function Jl(i,d,p){if(d&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=i.Ca&&!i.pa?new Ee(new wo({eb:p})):new Ee(i.pa),d.Ha(i.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zl(){}n=Zl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Io(){}Io.prototype.g=function(i,d){return new Ye(i,d)};function Ye(i,d){Oe.call(this),this.g=new Ul(d),this.l=i,this.h=d&&d.messageUrlParams||null,i=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.o=i,i=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(i?i["X-WebChannel-Content-Type"]=d.messageContentType:i={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(i?i["X-WebChannel-Client-Profile"]=d.va:i={"X-WebChannel-Client-Profile":d.va}),this.g.S=i,(i=d&&d.Sb)&&!D(i)&&(this.g.m=i),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!D(d)&&(this.g.D=d,i=this.h,i!==null&&d in i&&(i=this.h,d in i&&delete i[d])),this.j=new Dn(this)}I(Ye,Oe),Ye.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ye.prototype.close=function(){xi(this.g)},Ye.prototype.o=function(i){var d=this.g;if(typeof i=="string"){var p={};p.__data__=i,i=p}else this.u&&(p={},p.__data__=hi(i),i=p);d.i.push(new Oy(d.Ya++,i)),d.G==3&&xo(d)},Ye.prototype.N=function(){this.g.l=null,delete this.j,xi(this.g),delete this.g,Ye.aa.N.call(this)};function eu(i){pi.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var d=i.__sm__;if(d){e:{for(const p in d){i=p;break e}i=void 0}(this.i=i)&&(i=this.i,d=d!==null&&i in d?d[i]:void 0),this.data=d}else this.data=i}I(eu,pi);function tu(){mi.call(this),this.status=1}I(tu,mi);function Dn(i){this.g=i}I(Dn,Zl),Dn.prototype.ua=function(){We(this.g,"a")},Dn.prototype.ta=function(i){We(this.g,new eu(i))},Dn.prototype.sa=function(i){We(this.g,new tu)},Dn.prototype.ra=function(){We(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,Ye.prototype.send=Ye.prototype.o,Ye.prototype.open=Ye.prototype.m,Ye.prototype.close=Ye.prototype.close,Up=function(){return new Io},Bp=function(){return fo()},$p=hn,Ea={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},po.NO_ERROR=0,po.TIMEOUT=8,po.HTTP_ERROR=6,Go=po,yl.COMPLETE="complete",jp=yl,hl.EventType=hr,hr.OPEN="a",hr.CLOSE="b",hr.ERROR="c",hr.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,Ir=hl,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,Fp=Ee}).apply(typeof Lo<"u"?Lo:typeof self<"u"?self:typeof window<"u"?window:{});const sd="@firebase/firestore",id="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ar="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new Pp("@firebase/firestore");function Fn(){return xn.logLevel}function W(n,...e){if(xn.logLevel<=le.DEBUG){const t=e.map(mc);xn.debug(`Firestore (${ar}): ${n}`,...t)}}function Vt(n,...e){if(xn.logLevel<=le.ERROR){const t=e.map(mc);xn.error(`Firestore (${ar}): ${n}`,...t)}}function Jt(n,...e){if(xn.logLevel<=le.WARN){const t=e.map(mc);xn.warn(`Firestore (${ar}): ${n}`,...t)}}function mc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,zp(n,r,t)}function zp(n,e,t){let r=`FIRESTORE (${ar}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Vt(r),new Error(r)}function de(n,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,n||zp(e,o,r)}function ee(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($e.UNAUTHENTICATED)))}shutdown(){}}class KA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class QA{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){de(this.o===void 0,42304);let r=this.i;const o=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Kt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kt,e.enqueueRetryable((()=>o(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await o(this.currentUser)}))},c=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kt)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new Wp(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new $e(e)}}class XA{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YA{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new XA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($e.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ad{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,NA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){de(this.o===void 0,3512);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const o=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>o(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?o(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ad(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(de(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ad(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=ZA(40);for(let s=0;s<o.length;++s)r.length<20&&o[s]<t&&(r+=e.charAt(o[s]%62))}return r}}function ie(n,e){return n<e?-1:n>e?1:0}function ba(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return ie(r,o);{const s=qp(),a=eI(s.encode(cd(n,t)),s.encode(cd(e,t)));return a!==0?a:ie(r,o)}}t+=r>65535?2:1}return ie(n.length,e.length)}function cd(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function eI(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ie(n[t],e[t]);return ie(n.length,e.length)}function Qn(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="__name__";class pt{constructor(e,t,r){t===void 0?t=0:t>e.length&&J(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&J(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return pt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pt?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const s=pt.compareSegments(e.get(o),t.get(o));if(s!==0)return s}return ie(e.length,t.length)}static compareSegments(e,t){const r=pt.isNumericId(e),o=pt.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?pt.extractNumericId(e).compare(pt.extractNumericId(t)):ba(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gt.fromString(e.substring(4,e.length-2))}}class ye extends pt{construct(e,t,r){return new ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new ye(t)}static emptyPath(){return new ye([])}}const tI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Me extends pt{construct(e,t,r){return new Me(e,t,r)}static isValidIdentifier(e){return tI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Me.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ld}static keyField(){return new Me([ld])}static fromServerFormat(e){const t=[];let r="",o=0;const s=()=>{if(r.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;o<e.length;){const c=e[o];if(c==="\\"){if(o+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[o+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,o+=2}else c==="`"?(a=!a,o++):c!=="."||a?(r+=c,o++):(s(),o++)}if(s(),a)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Me(t)}static emptyPath(){return new Me([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(ye.fromString(e))}static fromName(e){return new Q(ye.fromString(e).popFirst(5))}static empty(){return new Q(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n,e,t){if(!t)throw new G(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nI(n,e,t,r){if(e===!0&&r===!0)throw new G(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ud(n){if(!Q.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dd(n){if(Q.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gp(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function yc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J(12329,{type:typeof n})}function it(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yc(n);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e){const t={typeString:n};return e&&(t.value=e),t}function eo(n,e){if(!Gp(n))throw new G(j.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(o&&typeof a!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new G(j.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=-62135596800,fd=1e6;class pe{static now(){return pe.fromMillis(Date.now())}static fromDate(e){return pe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*fd);return new pe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hd)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fd}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eo(e,pe._jsonSchema))return new pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pe._jsonSchemaVersion="firestore/timestamp/1.0",pe._jsonSchema={type:Ae("string",pe._jsonSchemaVersion),seconds:Ae("number"),nanoseconds:Ae("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new pe(0,0))}static max(){return new Z(new pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=-1;function rI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Z.fromTimestamp(r===1e9?new pe(t+1,0):new pe(t,r));return new Zt(o,Q.empty(),e)}function oI(n){return new Zt(n.readTime,n.key,Ur)}class Zt{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zt(Z.min(),Q.empty(),Ur)}static max(){return new Zt(Z.max(),Q.empty(),Ur)}}function sI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cr(n){if(n.code!==j.FAILED_PRECONDITION||n.message!==iI)throw n;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((r,o)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,o)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,r)=>{t(e)}))}static reject(e){return new F(((t,r)=>{r(e)}))}static waitFor(e){return new F(((t,r)=>{let o=0,s=0,a=!1;e.forEach((c=>{++o,c.next((()=>{++s,a&&s===o&&t()}),(l=>r(l)))})),a=!0,s===o&&t()}))}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next((o=>o?F.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,s)=>{r.push(t.call(this,o,s))})),this.waitFor(r)}static mapArray(e,t){return new F(((r,o)=>{const s=e.length,a=new Array(s);let c=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((h=>{a[u]=h,++c,c===s&&r(a)}),(h=>o(h)))}}))}static doWhile(e,t){return new F(((r,o)=>{const s=()=>{e()===!0?t().next((()=>{s()}),o):r()};s()}))}}function cI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}$s.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=-1;function Bs(n){return n==null}function ds(n){return n===0&&1/n==-1/0}function lI(n){return typeof n=="number"&&Number.isInteger(n)&&!ds(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="";function uI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pd(e)),e=dI(n.get(t),e);return pd(e)}function dI(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const s=n.charAt(o);switch(s){case"\0":t+="";break;case Kp:t+="";break;default:t+=s}}return t}function pd(n){return n+Kp+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ln(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Qp(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,t){this.comparator=e,this.root=t||ke.EMPTY}insert(e,t){return new we(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ke.BLACK,null,null))}remove(e){return new we(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ke.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fo(this.root,e,this.comparator,!0)}}class Fo{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&o&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ke{constructor(e,t,r,o,s){this.key=e,this.value=t,this.color=r??ke.RED,this.left=o??ke.EMPTY,this.right=s??ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,s){return new ke(e??this.key,t??this.value,r??this.color,o??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const s=r(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,t,r),null):s===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return ke.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}ke.EMPTY=null,ke.RED=!0,ke.BLACK=!1;ke.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,t,r,o,s){return this}insert(e,t,r){return new ke(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gd(this.data.getIterator())}getIteratorFrom(e){return new gd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Se)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,s=r.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Se(this.comparator);return t.data=e,t}}class gd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.fields=e,e.sort(Me.comparator)}static empty(){return new Ze([])}unionWith(e){let t=new Se(Me.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ze(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qn(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xp("Invalid base64 string: "+s):s}})(e);return new Ve(t)}static fromUint8Array(e){const t=(function(o){let s="";for(let a=0;a<o.length;++a)s+=String.fromCharCode(o[a]);return s})(e);return new Ve(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ve.EMPTY_BYTE_STRING=new Ve("");const hI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(n){if(de(!!n,39018),typeof n=="string"){let e=0;const t=hI.exec(n);if(de(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(n.seconds),nanos:be(n.nanos)}}function be(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function tn(n){return typeof n=="string"?Ve.fromBase64String(n):Ve.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="server_timestamp",Jp="__type__",Zp="__previous_value__",em="__local_write_time__";function _c(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Jp])===null||t===void 0?void 0:t.stringValue)===Yp}function Us(n){const e=n.mapValue.fields[Zp];return _c(e)?Us(e):e}function zr(n){const e=en(n.mapValue.fields[em].timestampValue);return new pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,t,r,o,s,a,c,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const hs="(default)";class Wr{constructor(e,t){this.projectId=e,this.database=t||hs}static empty(){return new Wr("","")}get isDefaultDatabase(){return this.database===hs}isEqual(e){return e instanceof Wr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="__type__",pI="__max__",jo={mapValue:{}},nm="__vector__",fs="value";function nn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_c(n)?4:gI(n)?9007199254740991:mI(n)?10:11:J(28295,{value:n})}function Tt(n,e){if(n===e)return!0;const t=nn(n);if(t!==nn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zr(n).isEqual(zr(e));case 3:return(function(o,s){if(typeof o.timestampValue=="string"&&typeof s.timestampValue=="string"&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const a=en(o.timestampValue),c=en(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,s){return tn(o.bytesValue).isEqual(tn(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,s){return be(o.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(o.geoPointValue.longitude)===be(s.geoPointValue.longitude)})(n,e);case 2:return(function(o,s){if("integerValue"in o&&"integerValue"in s)return be(o.integerValue)===be(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const a=be(o.doubleValue),c=be(s.doubleValue);return a===c?ds(a)===ds(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return Qn(n.arrayValue.values||[],e.arrayValue.values||[],Tt);case 10:case 11:return(function(o,s){const a=o.mapValue.fields||{},c=s.mapValue.fields||{};if(md(a)!==md(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!Tt(a[l],c[l])))return!1;return!0})(n,e);default:return J(52216,{left:n})}}function qr(n,e){return(n.values||[]).find((t=>Tt(t,e)))!==void 0}function Xn(n,e){if(n===e)return 0;const t=nn(n),r=nn(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const c=be(s.integerValue||s.doubleValue),l=be(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return yd(n.timestampValue,e.timestampValue);case 4:return yd(zr(n),zr(e));case 5:return ba(n.stringValue,e.stringValue);case 6:return(function(s,a){const c=tn(s),l=tn(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const c=s.split("/"),l=a.split("/");for(let u=0;u<c.length&&u<l.length;u++){const h=ie(c[u],l[u]);if(h!==0)return h}return ie(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const c=ie(be(s.latitude),be(a.latitude));return c!==0?c:ie(be(s.longitude),be(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return vd(n.arrayValue,e.arrayValue);case 10:return(function(s,a){var c,l,u,h;const m=s.fields||{},g=a.fields||{},w=(c=m[fs])===null||c===void 0?void 0:c.arrayValue,I=(l=g[fs])===null||l===void 0?void 0:l.arrayValue,E=ie(((u=w?.values)===null||u===void 0?void 0:u.length)||0,((h=I?.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:vd(w,I)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===jo.mapValue&&a===jo.mapValue)return 0;if(s===jo.mapValue)return 1;if(a===jo.mapValue)return-1;const c=s.fields||{},l=Object.keys(c),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const g=ba(l[m],h[m]);if(g!==0)return g;const w=Xn(c[l[m]],u[h[m]]);if(w!==0)return w}return ie(l.length,h.length)})(n.mapValue,e.mapValue);default:throw J(23264,{le:t})}}function yd(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);const t=en(n),r=en(e),o=ie(t.seconds,r.seconds);return o!==0?o:ie(t.nanos,r.nanos)}function vd(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const s=Xn(t[o],r[o]);if(s)return s}return ie(t.length,r.length)}function Yn(n){return Ta(n)}function Ta(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=en(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return tn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Q.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const s of t.values||[])o?o=!1:r+=",",r+=Ta(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",s=!0;for(const a of r)s?s=!1:o+=",",o+=`${a}:${Ta(t.fields[a])}`;return o+"}"})(n.mapValue):J(61005,{value:n})}function Ko(n){switch(nn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Us(n);return e?16+Ko(e):16;case 5:return 2*n.stringValue.length;case 6:return tn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,s)=>o+Ko(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return ln(r.fields,((s,a)=>{o+=s.length+Ko(a)})),o})(n.mapValue);default:throw J(13486,{value:n})}}function xa(n){return!!n&&"integerValue"in n}function wc(n){return!!n&&"arrayValue"in n}function _d(n){return!!n&&"nullValue"in n}function wd(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qo(n){return!!n&&"mapValue"in n}function mI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[tm])===null||t===void 0?void 0:t.stringValue)===nm}function kr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ln(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=kr(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.value=e}static empty(){return new Ge({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kr(t)}setAll(e){let t=Me.emptyPath(),r={},o=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const l=this.getFieldsMap(t);this.applyChanges(l,r,o),r={},o=[],t=c.popLast()}a?r[c.lastSegment()]=kr(a):o.push(c.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,o)}delete(e){const t=this.field(e.popLast());Qo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Qo(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ln(t,((o,s)=>e[o]=s));for(const o of r)delete e[o]}clone(){return new Ge(kr(this.value))}}function rm(n){const e=[];return ln(n.fields,((t,r)=>{const o=new Me([t]);if(Qo(r)){const s=rm(r.mapValue).fields;if(s.length===0)e.push(o);else for(const a of s)e.push(o.child(a))}else e.push(o)})),new Ze(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,t,r,o,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Be(e,0,Z.min(),Z.min(),Z.min(),Ge.empty(),0)}static newFoundDocument(e,t,r,o){return new Be(e,1,t,Z.min(),r,o,0)}static newNoDocument(e,t){return new Be(e,2,t,Z.min(),Z.min(),Ge.empty(),0)}static newUnknownDocument(e,t){return new Be(e,3,t,Z.min(),Z.min(),Ge.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ge.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ge.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Be&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t){this.position=e,this.inclusive=t}}function Ed(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const s=e[o],a=n.position[o];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(a.referenceValue),t.key):r=Xn(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bd(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tt(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t="asc"){this.field=e,this.dir=t}}function yI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{}class Ce extends om{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _I(e,t,r):t==="array-contains"?new bI(e,r):t==="in"?new TI(e,r):t==="not-in"?new xI(e,r):t==="array-contains-any"?new AI(e,r):new Ce(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new wI(e,r):new EI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xn(t,this.value)):t!==null&&nn(this.value)===nn(t)&&this.matchesComparison(Xn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xt extends om{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new xt(e,t)}matches(e){return sm(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function sm(n){return n.op==="and"}function im(n){return vI(n)&&sm(n)}function vI(n){for(const e of n.filters)if(e instanceof xt)return!1;return!0}function Aa(n){if(n instanceof Ce)return n.field.canonicalString()+n.op.toString()+Yn(n.value);if(im(n))return n.filters.map((e=>Aa(e))).join(",");{const e=n.filters.map((t=>Aa(t))).join(",");return`${n.op}(${e})`}}function am(n,e){return n instanceof Ce?(function(r,o){return o instanceof Ce&&r.op===o.op&&r.field.isEqual(o.field)&&Tt(r.value,o.value)})(n,e):n instanceof xt?(function(r,o){return o instanceof xt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((s,a,c)=>s&&am(a,o.filters[c])),!0):!1})(n,e):void J(19439)}function cm(n){return n instanceof Ce?(function(t){return`${t.field.canonicalString()} ${t.op} ${Yn(t.value)}`})(n):n instanceof xt?(function(t){return t.op.toString()+" {"+t.getFilters().map(cm).join(" ,")+"}"})(n):"Filter"}class _I extends Ce{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){const t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}}class wI extends Ce{constructor(e,t){super(e,"in",t),this.keys=lm("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EI extends Ce{constructor(e,t){super(e,"not-in",t),this.keys=lm("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lm(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Q.fromName(r.referenceValue)))}class bI extends Ce{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wc(t)&&qr(t.arrayValue,this.value)}}class TI extends Ce{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qr(this.value.arrayValue,t)}}class xI extends Ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(qr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!qr(this.value.arrayValue,t)}}class AI extends Ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>qr(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t=null,r=[],o=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=s,this.startAt=a,this.endAt=c,this.Pe=null}}function Td(n,e=null,t=[],r=[],o=null,s=null,a=null){return new II(n,e,t,r,o,s,a)}function Ec(n){const e=ee(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Aa(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Bs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Yn(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Yn(r))).join(",")),e.Pe=t}return e.Pe}function bc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!am(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bd(n.startAt,e.startAt)&&bd(n.endAt,e.endAt)}function Ia(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t=null,r=[],o=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function CI(n,e,t,r,o,s,a,c){return new zs(n,e,t,r,o,s,a,c)}function Tc(n){return new zs(n)}function xd(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RI(n){return n.collectionGroup!==null}function Mr(n){const e=ee(n);if(e.Te===null){e.Te=[];const t=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Se(Me.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new ms(s,r))})),t.has(Me.keyField().canonicalString())||e.Te.push(new ms(Me.keyField(),r))}return e.Te}function vt(n){const e=ee(n);return e.Ie||(e.Ie=SI(e,Mr(n))),e.Ie}function SI(n,e){if(n.limitType==="F")return Td(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const s=o.dir==="desc"?"asc":"desc";return new ms(o.field,s)}));const t=n.endAt?new ps(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ps(n.startAt.position,n.startAt.inclusive):null;return Td(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ca(n,e,t){return new zs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ws(n,e){return bc(vt(n),vt(e))&&n.limitType===e.limitType}function um(n){return`${Ec(vt(n))}|lt:${n.limitType}`}function jn(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>cm(o))).join(", ")}]`),Bs(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Yn(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Yn(o))).join(",")),`Target(${r})`})(vt(n))}; limitType=${n.limitType})`}function qs(n,e){return e.isFoundDocument()&&(function(r,o){const s=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,o){for(const s of Mr(r))if(!s.field.isKeyField()&&o.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const s of r.filters)if(!s.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(a,c,l){const u=Ed(a,c,l);return a.inclusive?u<=0:u<0})(r.startAt,Mr(r),o)||r.endAt&&!(function(a,c,l){const u=Ed(a,c,l);return a.inclusive?u>=0:u>0})(r.endAt,Mr(r),o))})(n,e)}function PI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dm(n){return(e,t)=>{let r=!1;for(const o of Mr(n)){const s=DI(o,e,t);if(s!==0)return s;r=r||o.field.isKeyField()}return 0}}function DI(n,e,t){const r=n.field.isKeyField()?Q.comparator(e.key,t.key):(function(s,a,c){const l=a.data.field(s),u=c.data.field(s);return l!==null&&u!==null?Xn(l,u):J(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,s]of r)if(this.equalsFn(o,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return void(o[s]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ln(this.inner,((t,r)=>{for(const[o,s]of r)e(o,s)}))}isEmpty(){return Qp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new we(Q.comparator);function Ot(){return NI}const hm=new we(Q.comparator);function Cr(...n){let e=hm;for(const t of n)e=e.insert(t.key,t);return e}function fm(n){let e=hm;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function _n(){return Vr()}function pm(){return Vr()}function Vr(){return new In((n=>n.toString()),((n,e)=>n.isEqual(e)))}const kI=new we(Q.comparator),MI=new Se(Q.comparator);function ae(...n){let e=MI;for(const t of n)e=e.add(t);return e}const VI=new Se(ie);function OI(){return VI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ds(e)?"-0":e}}function mm(n){return{integerValue:""+n}}function LI(n,e){return lI(e)?mm(e):xc(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this._=void 0}}function FI(n,e,t){return n instanceof Hr?(function(o,s){const a={fields:{[Jp]:{stringValue:Yp},[em]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return s&&_c(s)&&(s=Us(s)),s&&(a.fields[Zp]=s),{mapValue:a}})(t,e):n instanceof Gr?ym(n,e):n instanceof Kr?vm(n,e):(function(o,s){const a=gm(o,s),c=Ad(a)+Ad(o.Ee);return xa(a)&&xa(o.Ee)?mm(c):xc(o.serializer,c)})(n,e)}function jI(n,e,t){return n instanceof Gr?ym(n,e):n instanceof Kr?vm(n,e):t}function gm(n,e){return n instanceof gs?(function(r){return xa(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Hr extends Hs{}class Gr extends Hs{constructor(e){super(),this.elements=e}}function ym(n,e){const t=_m(e);for(const r of n.elements)t.some((o=>Tt(o,r)))||t.push(r);return{arrayValue:{values:t}}}class Kr extends Hs{constructor(e){super(),this.elements=e}}function vm(n,e){let t=_m(e);for(const r of n.elements)t=t.filter((o=>!Tt(o,r)));return{arrayValue:{values:t}}}class gs extends Hs{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Ad(n){return be(n.integerValue||n.doubleValue)}function _m(n){return wc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t){this.field=e,this.transform=t}}function BI(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof Gr&&o instanceof Gr||r instanceof Kr&&o instanceof Kr?Qn(r.elements,o.elements,Tt):r instanceof gs&&o instanceof gs?Tt(r.Ee,o.Ee):r instanceof Hr&&o instanceof Hr})(n.transform,e.transform)}class UI{constructor(e,t){this.version=e,this.transformResults=t}}class Ke{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ke}static exists(e){return new Ke(void 0,e)}static updateTime(e){return new Ke(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Gs{}function wm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ks(n.key,Ke.none()):new to(n.key,n.data,Ke.none());{const t=n.data,r=Ge.empty();let o=new Se(Me.comparator);for(let s of e.fields)if(!o.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),o=o.add(s)}return new un(n.key,r,new Ze(o.toArray()),Ke.none())}}function zI(n,e,t){n instanceof to?(function(o,s,a){const c=o.value.clone(),l=Cd(o.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof un?(function(o,s,a){if(!Xo(o.precondition,s))return void s.convertToUnknownDocument(a.version);const c=Cd(o.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Em(o)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(o,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Or(n,e,t,r){return n instanceof to?(function(s,a,c,l){if(!Xo(s.precondition,a))return c;const u=s.value.clone(),h=Rd(s.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof un?(function(s,a,c,l){if(!Xo(s.precondition,a))return c;const u=Rd(s.fieldTransforms,l,a),h=a.data;return h.setAll(Em(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(n,e,t,r):(function(s,a,c){return Xo(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function WI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),s=gm(r.transform,o||null);s!=null&&(t===null&&(t=Ge.empty()),t.set(r.field,s))}return t||null}function Id(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Qn(r,o,((s,a)=>BI(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class to extends Gs{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class un extends Gs{constructor(e,t,r,o,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Em(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Cd(n,e,t){const r=new Map;de(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const s=n[o],a=s.transform,c=e.data.field(s.field);r.set(s.field,jI(a,c,t[o]))}return r}function Rd(n,e,t){const r=new Map;for(const o of n){const s=o.transform,a=t.data.field(o.field);r.set(o.field,FI(s,a,e))}return r}class Ks extends Gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qI extends Gs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(e.key)&&zI(s,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Or(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Or(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pm();return this.mutations.forEach((o=>{const s=e.get(o.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(o.key)?null:c;const l=wm(a,c);l!==null&&r.set(o.key,l),a.isValidDocument()||a.convertToNoDocument(Z.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ae())}isEqual(e){return this.batchId===e.batchId&&Qn(this.mutations,e.mutations,((t,r)=>Id(t,r)))&&Qn(this.baseMutations,e.baseMutations,((t,r)=>Id(t,r)))}}class Ac{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){de(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=(function(){return kI})();const s=e.mutations;for(let a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new Ac(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe,ce;function QI(n){switch(n){case j.OK:return J(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return J(15467,{code:n})}}function bm(n){if(n===void 0)return Vt("GRPC error has no .code"),j.UNKNOWN;switch(n){case xe.OK:return j.OK;case xe.CANCELLED:return j.CANCELLED;case xe.UNKNOWN:return j.UNKNOWN;case xe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case xe.INTERNAL:return j.INTERNAL;case xe.UNAVAILABLE:return j.UNAVAILABLE;case xe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case xe.NOT_FOUND:return j.NOT_FOUND;case xe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case xe.ABORTED:return j.ABORTED;case xe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case xe.DATA_LOSS:return j.DATA_LOSS;default:return J(39323,{code:n})}}(ce=xe||(xe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=new Gt([4294967295,4294967295],0);function Sd(n){const e=qp().encode(n),t=new Lp;return t.update(e),new Uint8Array(t.digest())}function Pd(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gt([t,r],0),new Gt([o,s],0)]}class Ic{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rr(`Invalid padding: ${t}`);if(r<0)throw new Rr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rr(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Gt.fromNumber(this.fe)}pe(e,t,r){let o=e.add(t.multiply(Gt.fromNumber(r)));return o.compare(XI)===1&&(o=new Gt([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Sd(e),[r,o]=Pd(t);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,o,s);if(!this.ye(a))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Ic(s,o,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.fe===0)return;const t=Sd(e),[r,o]=Pd(t);for(let s=0;s<this.hashCount;s++){const a=this.pe(r,o,s);this.we(a)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Rr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t,r,o,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,no.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qs(Z.min(),o,new we(ie),Ot(),ae())}}class no{constructor(e,t,r,o,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new no(r,t,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=o}}class Tm{constructor(e,t){this.targetId=e,this.De=t}}class xm{constructor(e,t,r=Ve.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Dd{constructor(){this.ve=0,this.Ce=Nd(),this.Fe=Ve.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),t=ae(),r=ae();return this.Ce.forEach(((o,s)=>{switch(s){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:J(38017,{changeType:s})}})),new no(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Nd()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class YI{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ot(),this.je=$o(),this.Je=$o(),this.He=new we(ie)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:J(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,r=e.De.count,o=this.st(t);if(o){const s=o.target;if(Ia(s))if(r===0){const a=new Q(s.path);this.Xe(t,a,Be.newNoDocument(a,Z.min()))}else de(r===1,20013,{expectedCount:r});else{const a=this.ot(t);if(a!==r){const c=this._t(e),l=c?this.ut(c,e,a):1;if(l!==0){this.rt(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:s=0}=t;let a,c;try{a=tn(r).toUint8Array()}catch(l){if(l instanceof Xp)return Jt("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Ic(a,o,s)}catch(l){return Jt(l instanceof Rr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let o=0;return r.forEach((s=>{const a=this.We.lt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,s,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((s,a)=>{const c=this.st(a);if(c){if(s.current&&Ia(c.target)){const l=new Q(c.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,Be.newNoDocument(l,e))}s.Ne&&(t.set(a,s.Le()),s.ke())}}));let r=ae();this.Je.forEach(((s,a)=>{let c=!0;a.forEachWhile((l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(s))})),this.ze.forEach(((s,a)=>a.setReadTime(e)));const o=new Qs(e,t,this.He,this.ze,r);return this.ze=Ot(),this.je=$o(),this.Je=$o(),this.He=new we(ie),o}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Dd,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Se(ie),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Se(ie),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Dd),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function $o(){return new we(Q.comparator)}function Nd(){return new we(Q.comparator)}const JI={asc:"ASCENDING",desc:"DESCENDING"},ZI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e0={and:"AND",or:"OR"};class t0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ra(n,e){return n.useProto3Json||Bs(e)?e:{value:e}}function ys(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Am(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function n0(n,e){return ys(n,e.toTimestamp())}function _t(n){return de(!!n,49232),Z.fromTimestamp((function(t){const r=en(t);return new pe(r.seconds,r.nanos)})(n))}function Cc(n,e){return Sa(n,e).canonicalString()}function Sa(n,e){const t=(function(o){return new ye(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Im(n){const e=ye.fromString(n);return de(Dm(e),10190,{key:e.toString()}),e}function Pa(n,e){return Cc(n.databaseId,e.path)}function Gi(n,e){const t=Im(e);if(t.get(1)!==n.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(Rm(t))}function Cm(n,e){return Cc(n.databaseId,e)}function r0(n){const e=Im(n);return e.length===4?ye.emptyPath():Rm(e)}function Da(n){return new ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Rm(n){return de(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kd(n,e,t){return{name:Pa(n,e),fields:t.value.mapValue.fields}}function o0(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],s=(function(u,h){return u.useProto3Json?(de(h===void 0||typeof h=="string",58123),Ve.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ve.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(u){const h=u.code===void 0?j.UNKNOWN:bm(u.code);return new G(h,u.message||"")})(a);t=new xm(r,o,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Gi(n,r.document.name),s=_t(r.document.updateTime),a=r.document.createTime?_t(r.document.createTime):Z.min(),c=new Ge({mapValue:{fields:r.document.fields}}),l=Be.newFoundDocument(o,s,a,c),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Yo(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Gi(n,r.document),s=r.readTime?_t(r.readTime):Z.min(),a=Be.newNoDocument(o,s),c=r.removedTargetIds||[];t=new Yo([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Gi(n,r.document),s=r.removedTargetIds||[];t=new Yo([],s,o,null)}else{if(!("filter"in e))return J(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:s}=r,a=new KI(o,s),c=r.targetId;t=new Tm(c,a)}}return t}function s0(n,e){let t;if(e instanceof to)t={update:kd(n,e.key,e.value)};else if(e instanceof Ks)t={delete:Pa(n,e.key)};else if(e instanceof un)t={update:kd(n,e.key,e.data),updateMask:p0(e.fieldMask)};else{if(!(e instanceof qI))return J(16599,{Rt:e.type});t={verify:Pa(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const c=a.transform;if(c instanceof Hr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Kr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gs)return{fieldPath:a.field.canonicalString(),increment:c.Ee};throw J(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,s){return s.updateTime!==void 0?{updateTime:n0(o,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J(27497)})(n,e.precondition)),t}function i0(n,e){return n&&n.length>0?(de(e!==void 0,14353),n.map((t=>(function(o,s){let a=o.updateTime?_t(o.updateTime):_t(s);return a.isEqual(Z.min())&&(a=_t(s)),new UI(a,o.transformResults||[])})(t,e)))):[]}function a0(n,e){return{documents:[Cm(n,e.path)]}}function c0(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Cm(n,o);const s=(function(u){if(u.length!==0)return Pm(xt.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((h=>(function(g){return{field:$n(g.field),direction:d0(g.dir)}})(h)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=Ra(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:o}}function l0(n){let e=r0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){de(r===1,65062);const h=t.from[0];h.allDescendants?o=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(m){const g=Sm(m);return g instanceof xt&&im(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(m){return m.map((g=>(function(I){return new ms(Bn(I.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(g)))})(t.orderBy));let c=null;t.limit&&(c=(function(m){let g;return g=typeof m=="object"?m.value:m,Bs(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(m){const g=!!m.before,w=m.values||[];return new ps(w,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(m){const g=!m.before,w=m.values||[];return new ps(w,g)})(t.endAt)),CI(e,o,a,s,c,"F",l,u)}function u0(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Sm(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bn(t.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Bn(t.unaryFilter.field);return Ce.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Bn(t.unaryFilter.field);return Ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bn(t.unaryFilter.field);return Ce.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ce.create(Bn(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xt.create(t.compositeFilter.filters.map((r=>Sm(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return J(1026)}})(t.compositeFilter.op))})(n):J(30097,{filter:n})}function d0(n){return JI[n]}function h0(n){return ZI[n]}function f0(n){return e0[n]}function $n(n){return{fieldPath:n.canonicalString()}}function Bn(n){return Me.fromServerFormat(n.fieldPath)}function Pm(n){return n instanceof Ce?(function(t){if(t.op==="=="){if(wd(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NAN"}};if(_d(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wd(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NOT_NAN"}};if(_d(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$n(t.field),op:h0(t.op),value:t.value}}})(n):n instanceof xt?(function(t){const r=t.getFilters().map((o=>Pm(o)));return r.length===1?r[0]:{compositeFilter:{op:f0(t.op),filters:r}}})(n):J(54877,{filter:n})}function p0(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Dm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t,r,o,s=Z.min(),a=Z.min(),c=Ve.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new Wt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this.gt=e}}function g0(n){const e=l0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ca(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.Dn=new v0}addToCollectionParentIndex(e,t){return this.Dn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Zt.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Zt.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class v0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Se(ye.comparator),s=!o.has(r);return this.index[t]=o.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Se(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nm=41943040;class He{static withCacheSize(e){return new He(e,He.DEFAULT_COLLECTION_PERCENTILE,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */He.DEFAULT_COLLECTION_PERCENTILE=10,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,He.DEFAULT=new He(Nm,He.DEFAULT_COLLECTION_PERCENTILE,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),He.DISABLED=new He(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Jn(0)}static ur(){return new Jn(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="LruGarbageCollector",_0=1048576;function Od([n,e],[t,r]){const o=ie(n,t);return o===0?ie(e,r):o}class w0{constructor(e){this.Tr=e,this.buffer=new Se(Od),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Od(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){W(Vd,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lr(t)?W(Vd,"Ignoring IndexedDB error during garbage collection: ",t):await cr(t)}await this.Rr(3e5)}))}}class b0{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return F.resolve($s.ue);const r=new w0(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Md)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Md):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,o,s,a,c,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),o=this.params.maximumSequenceNumbersToCollect):o=m,a=Date.now(),this.nthSequenceNumber(e,o)))).next((m=>(r=m,c=Date.now(),this.removeTargets(e,r,t)))).next((m=>(s=m,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(u=Date.now(),Fn()<=le.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${o} in `+(c-a)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${m} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:m}))))}}function T0(n,e){return new b0(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.changes=new In((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Be.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Or(r.mutation,o,Ze.empty(),pe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ae()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ae()){const o=_n();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((s=>{let a=Cr();return s.forEach(((c,l)=>{a=a.insert(c,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=_n();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ae())))}populateOverlays(e,t,r){const o=[];return r.forEach((s=>{t.has(s)||o.push(s)})),this.documentOverlayCache.getOverlays(e,o).next((s=>{s.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,o){let s=Ot();const a=Vr(),c=(function(){return Vr()})();return t.forEach(((l,u)=>{const h=r.get(u.key);o.has(u.key)&&(h===void 0||h.mutation instanceof un)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Or(h.mutation,u,h.mutation.getFieldMask(),pe.now())):a.set(u.key,Ze.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,h)=>a.set(u,h))),t.forEach(((u,h)=>{var m;return c.set(u,new A0(h,(m=a.get(u))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,t){const r=Vr();let o=new we(((a,c)=>a-c)),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||Ze.empty();h=c.applyToLocalView(u,h),r.set(l,h);const m=(o.get(c.batchId)||ae()).add(l);o=o.insert(c.batchId,m)}))})).next((()=>{const a=[],c=o.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,h=l.value,m=pm();h.forEach((g=>{if(!s.has(g)){const w=wm(t.get(g),r.get(g));w!==null&&m.set(g,w),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,m))}return F.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):RI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((s=>{const a=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-s.size):F.resolve(_n());let c=Ur,l=s;return a.next((u=>F.forEach(u,((h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next((g=>{l=l.insert(h,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,ae()))).next((h=>({batchId:c,changes:fm(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next((r=>{let o=Cr();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const s=t.collectionGroup;let a=Cr();return this.indexManager.getCollectionParents(e,s).next((c=>F.forEach(c,(l=>{const u=(function(m,g){return new zs(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,o).next((h=>{h.forEach(((m,g)=>{a=a.insert(m,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,o)))).next((a=>{s.forEach(((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,Be.newInvalidDocument(h)))}));let c=Cr();return a.forEach(((l,u)=>{const h=s.get(l);h!==void 0&&Or(h.mutation,u,Ze.empty(),pe.now()),qs(t,u)&&(c=c.insert(l,u))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return F.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:_t(o.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:g0(o.bundledQuery),readTime:_t(o.readTime)}})(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.overlays=new we(Q.comparator),this.kr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_n();return F.forEach(t,(o=>this.getOverlay(e,o).next((s=>{s!==null&&r.set(o,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,s)=>{this.wt(e,t,s)})),F.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach((s=>this.overlays=this.overlays.remove(s))),this.kr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const o=_n(),s=t.length+1,a=new Q(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&o.set(l.getKey(),l)}return F.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let s=new we(((u,h)=>u-h));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=_n(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const c=_n(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>c.set(u,h))),!(c.size()>=o)););return F.resolve(c)}wt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const a=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new GI(t,r));let s=this.kr.get(t);s===void 0&&(s=ae(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.sessionToken=Ve.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this.qr=new Se(Pe.Qr),this.$r=new Se(Pe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Pe(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Pe(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Q(new ye([])),r=new Pe(t,e),o=new Pe(t,e+1),s=[];return this.$r.forEachInRange([r,o],(a=>{this.Wr(a),s.push(a.key)})),s}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Q(new ye([])),r=new Pe(t,e),o=new Pe(t,e+1);let s=ae();return this.$r.forEachInRange([r,o],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new Pe(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pe{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Q.comparator(e.key,t.key)||ie(e.Hr,t.Hr)}static Ur(e,t){return ie(e.Hr,t.Hr)||Q.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Se(Pe.Qr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new HI(s,t,r,o);this.mutationQueue.push(a);for(const c of o)this.Yr=this.Yr.add(new Pe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),s=o<0?0:o;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?vc:this.er-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pe(t,0),o=new Pe(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,o],(a=>{const c=this.Zr(a.Hr);s.push(c)})),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(ie);return t.forEach((o=>{const s=new Pe(o,0),a=new Pe(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,a],(c=>{r=r.add(c.Hr)}))})),F.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const a=new Pe(new Q(s),0);let c=new Se(ie);return this.Yr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===o&&(c=c.add(l.Hr)),!0)}),a),F.resolve(this.ei(c))}ei(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){de(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return F.forEach(t.mutations,(o=>{const s=new Pe(o.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Pe(t,0),o=this.Yr.firstAfterOrEqual(r);return F.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.ni=e,this.docs=(function(){return new we(Q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),s=o?o.size:0,a=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Be.newInvalidDocument(t))}getEntries(e,t){let r=Ot();return t.forEach((o=>{const s=this.docs.get(o);r=r.insert(o,s?s.document.mutableCopy():Be.newInvalidDocument(o))})),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let s=Ot();const a=t.path,c=new Q(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||sI(oI(h),r)<=0||(o.has(h.key)||qs(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,t,r,o){J(9500)}ri(e,t){return F.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new N0(this)}getSize(e){return F.resolve(this.size)}}class N0 extends x0{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)})),F.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.persistence=e,this.ii=new In((t=>Ec(t)),bc),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.si=0,this.oi=new Rc,this.targetCount=0,this._i=Jn.ar()}forEachTarget(e,t){return this.ii.forEach(((r,o)=>t(o))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),F.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Jn(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.hr(t),F.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let o=0;const s=[];return this.ii.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),o++)})),F.waitFor(s).next((()=>o))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const o=this.persistence.referenceDelegate,s=[];return o&&t.forEach((a=>{s.push(o.markPotentiallyOrphaned(e,a))})),F.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t){this.ai={},this.overlays={},this.ui=new $s(0),this.ci=!1,this.ci=!0,this.li=new S0,this.referenceDelegate=e(this),this.hi=new k0(this),this.indexManager=new y0,this.remoteDocumentCache=(function(o){return new D0(o)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new m0(t),this.Ti=new C0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new P0(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);const o=new M0(this.ui.next());return this.referenceDelegate.Ii(),r(o).next((s=>this.referenceDelegate.di(o).next((()=>s)))).toPromise().then((s=>(o.raiseOnCommittedEvent(),s)))}Ei(e,t){return F.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class M0 extends aI{constructor(e){super(),this.currentSequenceNumber=e}}class Sc{constructor(e){this.persistence=e,this.Ai=new Rc,this.Ri=null}static Vi(e){return new Sc(e)}get mi(){if(this.Ri)return this.Ri;throw J(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((s=>this.mi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.mi,(r=>{const o=Q.fromPath(r);return this.fi(e,o).next((s=>{s||t.removeEntry(o,Z.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return F.or([()=>F.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class vs{constructor(e,t){this.persistence=e,this.gi=new In((r=>uI(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=T0(this,t)}static Vi(e,t){return new vs(e,t)}Ii(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return F.forEach(this.gi,((r,o)=>this.Sr(e,r,o).next((s=>s?F.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),s=o.newChangeBuffer();return o.ri(e,(a=>this.Sr(e,a,t).next((c=>{c||(r++,s.removeEntry(a,Z.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),F.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ko(e.data.value)),t}Sr(e,t,r){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return F.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=o}static Es(e,t){let r=ae(),o=ae();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new Pc(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Sx()?8:cI(Cx())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,o){const s={result:null};return this.ps(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ys(e,t,o,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new V0;return this.ws(e,t,a).next((c=>{if(s.result=c,this.Rs)return this.Ss(e,t,a,c.size)}))})).next((()=>s.result))}Ss(e,t,r,o){return r.documentReadCount<this.Vs?(Fn()<=le.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",jn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Fn()<=le.DEBUG&&W("QueryEngine","Query:",jn(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(Fn()<=le.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",jn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vt(t))):F.resolve())}ps(e,t){if(xd(t))return F.resolve(null);let r=vt(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ca(t,null,"F"),r=vt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=ae(...s);return this.gs.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.bs(t,c);return this.Ds(t,u,a,l.readTime)?this.ps(e,Ca(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ys(e,t,r,o){return xd(t)||o.isEqual(Z.min())?F.resolve(null):this.gs.getDocuments(e,r).next((s=>{const a=this.bs(t,s);return this.Ds(t,a,r,o)?F.resolve(null):(Fn()<=le.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),jn(t)),this.vs(e,a,t,rI(o,Ur)).next((c=>c)))}))}bs(e,t){let r=new Se(dm(e));return t.forEach(((o,s)=>{qs(e,s)&&(r=r.add(s))})),r}Ds(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}ws(e,t,r){return Fn()<=le.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",jn(t)),this.gs.getDocumentsMatchingQuery(e,t,Zt.min(),r)}vs(e,t,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc="LocalStore",L0=3e8;class F0{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new we(ie),this.Ms=new In((s=>Ec(s)),bc),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I0(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function j0(n,e,t,r){return new F0(n,e,t,r)}async function Mm(n,e){const t=ee(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((s=>(o=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],c=[];let l=ae();for(const u of o){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){c.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Bs:u,removedBatchIds:a,addedBatchIds:c})))}))}))}function $0(n,e){const t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,h){const m=u.batch,g=m.keys();let w=F.resolve();return g.forEach((I=>{w=w.next((()=>h.getEntry(l,I))).next((E=>{const b=u.docVersions.get(I);de(b!==null,48541),E.version.compareTo(b)<0&&(m.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),h.addEntry(E)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(l,m)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=ae();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function Vm(n){const e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function B0(n,e){const t=ee(n),r=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const c=[];e.targetChanges.forEach(((h,m)=>{const g=o.get(m);if(!g)return;c.push(t.hi.removeMatchingKeys(s,h.removedDocuments,m).next((()=>t.hi.addMatchingKeys(s,h.addedDocuments,m))));let w=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(Ve.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),o=o.insert(m,w),(function(E,b,P){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=L0?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(g,w,h)&&c.push(t.hi.updateTargetData(s,w))}));let l=Ot(),u=ae();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))})),c.push(U0(s,a,e.documentUpdates).next((h=>{l=h.Ls,u=h.ks}))),!r.isEqual(Z.min())){const h=t.hi.getLastRemoteSnapshotVersion(s).next((m=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r)));c.push(h)}return F.waitFor(c).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Fs=o,s)))}function U0(n,e,t){let r=ae(),o=ae();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Ot();return t.forEach(((c,l)=>{const u=s.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(o=o.add(c)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):W(Dc,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{Ls:a,ks:o}}))}function z0(n,e){const t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=vc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function W0(n,e){const t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.hi.getTargetData(r,e).next((s=>s?(o=s,F.resolve(o)):t.hi.allocateTargetId(r).next((a=>(o=new Wt(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Na(n,e,t){const r=ee(n),o=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,o)))}catch(a){if(!lr(a))throw a;W(Dc,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function Ld(n,e,t){const r=ee(n);let o=Z.min(),s=ae();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,u,h){const m=ee(l),g=m.Ms.get(h);return g!==void 0?F.resolve(m.Fs.get(g)):m.hi.getTargetData(u,h)})(r,a,vt(e)).next((c=>{if(c)return o=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,c.targetId).next((l=>{s=l}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,e,t?o:Z.min(),t?s:ae()))).next((c=>(q0(r,PI(e),c),{documents:c,qs:s})))))}function q0(n,e,t){let r=n.xs.get(e)||Z.min();t.forEach(((o,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.xs.set(e,r)}class Fd{constructor(){this.activeTargetIds=OI()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H0{constructor(){this.Fo=new Fd,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Fd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="ConnectivityMonitor";class $d{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){W(jd,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){W(jd,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo=null;function ka(){return Bo===null?Bo=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bo++,"0x"+Bo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="RestConnection",K0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Q0{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===hs?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,s){const a=ka(),c=this.Go(e,t.toUriEncodedString());W(Ki,`Sending RPC '${e}' ${a}:`,c,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,o,s);const{host:u}=new URL(c),h=fc(u);return this.jo(e,c,l,r,h).then((m=>(W(Ki,`Received RPC '${e}' ${a}: `,m),m)),(m=>{throw Jt(Ki,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m}))}Jo(e,t,r,o,s,a){return this.Wo(e,t,r,o,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ar})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,s)=>e[s]=o)),r&&r.headers.forEach(((o,s)=>e[s]=o))}Go(e,t){const r=K0[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je="WebChannelConnection";class Y0 extends Q0{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,o,s){const a=ka();return new Promise(((c,l)=>{const u=new Fp;u.setWithCredentials(!0),u.listenOnce(jp.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Go.NO_ERROR:const m=u.getResponseJson();W(je,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case Go.TIMEOUT:W(je,`RPC '${e}' ${a} timed out`),l(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case Go.HTTP_ERROR:const g=u.getStatus();if(W(je,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const I=w?.error;if(I&&I.status&&I.message){const E=(function(P){const D=P.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(D)>=0?D:j.UNKNOWN})(I.status);l(new G(E,I.message))}else l(new G(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(j.UNAVAILABLE,"Connection failed."));break;default:J(9055,{c_:e,streamId:a,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{W(je,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(o);W(je,`RPC '${e}' ${a} sending request:`,o),u.send(t,"POST",h,r,15)}))}P_(e,t,r){const o=ka(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Up(),c=Bp(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");W(je,`Creating RPC '${e}' stream ${o}: ${h}`,l);const m=a.createWebChannel(h,l);this.T_(m);let g=!1,w=!1;const I=new X0({Ho:b=>{w?W(je,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(g||(W(je,`Opening RPC '${e}' stream ${o} transport.`),m.open(),g=!0),W(je,`RPC '${e}' stream ${o} sending:`,b),m.send(b))},Yo:()=>m.close()}),E=(b,P,D)=>{b.listen(P,(k=>{try{D(k)}catch(M){setTimeout((()=>{throw M}),0)}}))};return E(m,Ir.EventType.OPEN,(()=>{w||(W(je,`RPC '${e}' stream ${o} transport opened.`),I.s_())})),E(m,Ir.EventType.CLOSE,(()=>{w||(w=!0,W(je,`RPC '${e}' stream ${o} transport closed`),I.__(),this.I_(m))})),E(m,Ir.EventType.ERROR,(b=>{w||(w=!0,Jt(je,`RPC '${e}' stream ${o} transport errored. Name:`,b.name,"Message:",b.message),I.__(new G(j.UNAVAILABLE,"The operation could not be completed")))})),E(m,Ir.EventType.MESSAGE,(b=>{var P;if(!w){const D=b.data[0];de(!!D,16349);const k=D,M=k?.error||((P=k[0])===null||P===void 0?void 0:P.error);if(M){W(je,`RPC '${e}' stream ${o} received error:`,M);const O=M.status;let L=(function(T){const C=xe[T];if(C!==void 0)return bm(C)})(O),x=M.message;L===void 0&&(L=j.INTERNAL,x="Unknown error status: "+O+" with message "+M.message),w=!0,I.__(new G(L,x)),m.close()}else W(je,`RPC '${e}' stream ${o} received:`,D),I.a_(D)}})),E(c,$p.STAT_EVENT,(b=>{b.stat===Ea.PROXY?W(je,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===Ea.NOPROXY&&W(je,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{I.o_()}),0),I}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Qi(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(n){return new t0(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,r=1e3,o=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=o,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-r);o>0&&W("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="PersistentStream";class Lm{constructor(e,t,r,o,s,a,c,l){this.Fi=e,this.w_=r,this.S_=o,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Om(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.b_===t&&this.W_(r,o)}),(r=>{e((()=>{const o=new G(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{r((()=>this.G_(o)))})),this.stream.onMessage((o=>{r((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return W(Bd,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(W(Bd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class J0 extends Lm{constructor(e,t,r,o,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,a),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=o0(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?_t(a.readTime):Z.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Da(this.serializer),t.addTarget=(function(s,a){let c;const l=a.target;if(c=Ia(l)?{documents:a0(s,l)}:{query:c0(s,l).Vt},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Am(s,a.resumeToken);const u=Ra(s,a.expectedCount);u!==null&&(c.expectedCount=u)}else if(a.snapshotVersion.compareTo(Z.min())>0){c.readTime=ys(s,a.snapshotVersion.toTimestamp());const u=Ra(s,a.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=u0(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Da(this.serializer),t.removeTarget=e,this.k_(t)}}class Z0 extends Lm{constructor(e,t,r,o,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,a),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=i0(e.writeResults,e.commitTime),r=_t(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Da(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>s0(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{}class tC extends eC{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Wo(e,Sa(t,r),o,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())}))}Jo(e,t,r,o,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Jo(e,Sa(t,r),o,a,c,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(j.UNKNOWN,a.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class nC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vt(t),this._a=!1):W("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="RemoteStore";class rC{constructor(e,t,r,o,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo((a=>{r.enqueueAndForget((async()=>{Cn(this)&&(W(An,"Restarting streams for network reachability change."),await(async function(l){const u=ee(l);u.Ia.add(4),await ro(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Ys(u)})(this))}))})),this.Aa=new nC(r,o)}}async function Ys(n){if(Cn(n))for(const e of n.da)await e(!0)}async function ro(n){for(const e of n.da)await e(!1)}function Fm(n,e){const t=ee(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Vc(t)?Mc(t):ur(t).x_()&&kc(t,e))}function Nc(n,e){const t=ee(n),r=ur(t);t.Ta.delete(e),r.x_()&&jm(t,e),t.Ta.size===0&&(r.x_()?r.B_():Cn(t)&&t.Aa.set("Unknown"))}function kc(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ur(n).H_(e)}function jm(n,e){n.Ra.$e(e),ur(n).Y_(e)}function Mc(n){n.Ra=new YI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ur(n).start(),n.Aa.aa()}function Vc(n){return Cn(n)&&!ur(n).M_()&&n.Ta.size>0}function Cn(n){return ee(n).Ia.size===0}function $m(n){n.Ra=void 0}async function oC(n){n.Aa.set("Online")}async function sC(n){n.Ta.forEach(((e,t)=>{kc(n,e)}))}async function iC(n,e){$m(n),Vc(n)?(n.Aa.la(e),Mc(n)):n.Aa.set("Unknown")}async function aC(n,e,t){if(n.Aa.set("Online"),e instanceof xm&&e.state===2&&e.cause)try{await(async function(o,s){const a=s.cause;for(const c of s.targetIds)o.Ta.has(c)&&(await o.remoteSyncer.rejectListen(c,a),o.Ta.delete(c),o.Ra.removeTarget(c))})(n,e)}catch(r){W(An,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _s(n,r)}else if(e instanceof Yo?n.Ra.Ye(e):e instanceof Tm?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Z.min()))try{const r=await Vm(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const c=s.Ra.Pt(a);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ta.get(u);h&&s.Ta.set(u,h.withResumeToken(l.resumeToken,a))}})),c.targetMismatches.forEach(((l,u)=>{const h=s.Ta.get(l);if(!h)return;s.Ta.set(l,h.withResumeToken(Ve.EMPTY_BYTE_STRING,h.snapshotVersion)),jm(s,l);const m=new Wt(h.target,l,u,h.sequenceNumber);kc(s,m)})),s.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){W(An,"Failed to raise snapshot:",r),await _s(n,r)}}async function _s(n,e,t){if(!lr(e))throw e;n.Ia.add(1),await ro(n),n.Aa.set("Offline"),t||(t=()=>Vm(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{W(An,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Ys(n)}))}function Bm(n,e){return e().catch((t=>_s(n,t,e)))}async function Js(n){const e=ee(n),t=rn(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:vc;for(;cC(e);)try{const o=await z0(e.localStore,r);if(o===null){e.Pa.length===0&&t.B_();break}r=o.batchId,lC(e,o)}catch(o){await _s(e,o)}Um(e)&&zm(e)}function cC(n){return Cn(n)&&n.Pa.length<10}function lC(n,e){n.Pa.push(e);const t=rn(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Um(n){return Cn(n)&&!rn(n).M_()&&n.Pa.length>0}function zm(n){rn(n).start()}async function uC(n){rn(n).na()}async function dC(n){const e=rn(n);for(const t of n.Pa)e.X_(t.mutations)}async function hC(n,e,t){const r=n.Pa.shift(),o=Ac.from(r,e,t);await Bm(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Js(n)}async function fC(n,e){e&&rn(n).Z_&&await(async function(r,o){if((function(a){return QI(a)&&a!==j.ABORTED})(o.code)){const s=r.Pa.shift();rn(r).N_(),await Bm(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,o))),await Js(r)}})(n,e),Um(n)&&zm(n)}async function Ud(n,e){const t=ee(n);t.asyncQueue.verifyOperationInProgress(),W(An,"RemoteStore received new credentials");const r=Cn(t);t.Ia.add(3),await ro(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Ys(t)}async function pC(n,e){const t=ee(n);e?(t.Ia.delete(2),await Ys(t)):e||(t.Ia.add(2),await ro(t),t.Aa.set("Unknown"))}function ur(n){return n.Va||(n.Va=(function(t,r,o){const s=ee(t);return s.ia(),new J0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)})(n.datastore,n.asyncQueue,{Zo:oC.bind(null,n),e_:sC.bind(null,n),n_:iC.bind(null,n),J_:aC.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Vc(n)?Mc(n):n.Aa.set("Unknown")):(await n.Va.stop(),$m(n))}))),n.Va}function rn(n){return n.ma||(n.ma=(function(t,r,o){const s=ee(t);return s.ia(),new Z0(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:uC.bind(null,n),n_:fC.bind(null,n),ea:dC.bind(null,n),ta:hC.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Js(n)):(await n.ma.stop(),n.Pa.length>0&&(W(An,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t,r,o,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=s,this.deferred=new Kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,s){const a=Date.now()+r,c=new Oc(e,t,a,o,s);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lc(n,e){if(Vt("AsyncQueue",`${e}: ${n}`),lr(n))return new G(j.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{static emptySet(e){return new Hn(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=Cr(),this.sortedSet=new we(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,s=r.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Hn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this.fa=new we(Q.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):J(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Zn{constructor(e,t,r,o,s,a,c,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,o,s){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new Zn(e,t,Hn.emptySet(t),a,r,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ws(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class gC{constructor(){this.queries=Wd(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const o=ee(t),s=o.queries;o.queries=Wd(),s.forEach(((a,c)=>{for(const l of c.wa)l.onError(r)}))})(this,new G(j.ABORTED,"Firestore shutting down"))}}function Wd(){return new In((n=>um(n)),Ws)}async function Wm(n,e){const t=ee(n);let r=3;const o=e.query;let s=t.queries.get(o);s?!s.Sa()&&e.ba()&&(r=2):(s=new mC,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(o,!0);break;case 1:s.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(a){const c=Lc(a,`Initialization of query '${jn(e.query)}' failed`);return void e.onError(c)}t.queries.set(o,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&Fc(t)}async function qm(n,e){const t=ee(n),r=e.query;let o=3;const s=t.queries.get(r);if(s){const a=s.wa.indexOf(e);a>=0&&(s.wa.splice(a,1),s.wa.length===0?o=e.ba()?0:1:!s.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function yC(n,e){const t=ee(n);let r=!1;for(const o of e){const s=o.query,a=t.queries.get(s);if(a){for(const c of a.wa)c.Ca(o)&&(r=!0);a.ya=o}}r&&Fc(t)}function vC(n,e,t){const r=ee(n),o=r.queries.get(e);if(o)for(const s of o.wa)s.onError(t);r.queries.delete(e)}function Fc(n){n.Da.forEach((e=>{e.next()}))}var Ma,qd;(qd=Ma||(Ma={})).Fa="default",qd.Cache="cache";class Hm{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Zn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Zn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ma.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this.key=e}}class Km{constructor(e){this.key=e}}class _C{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=dm(e),this.eu=new Hn(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new zd,o=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,a=o,c=!1;const l=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,u=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((h,m)=>{const g=o.get(h),w=qs(this.query,m)?m:null,I=!!g&&this.mutatedKeys.has(g.key),E=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let b=!1;g&&w?g.data.isEqual(w.data)?I!==E&&(r.track({type:3,doc:w}),b=!0):this.iu(g,w)||(r.track({type:2,doc:w}),b=!0,(l&&this.Xa(w,l)>0||u&&this.Xa(w,u)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),b=!0):g&&!w&&(r.track({type:1,doc:g}),b=!0,(l||u)&&(c=!0)),b&&(w?(a=a.add(w),s=E?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:a,ru:r,Ds:c,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort(((h,m)=>(function(w,I){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{At:b})}};return E(w)-E(I)})(h.type,m.type)||this.Xa(h.doc,m.doc))),this.su(r),o=o!=null&&o;const c=t&&!o?this.ou():[],l=this.Za.size===0&&this.current&&!o?1:0,u=l!==this.Ya;return this.Ya=l,a.length!==0||u?{snapshot:new Zn(this.query,e.eu,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zd,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ae(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new Km(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new Gm(r))})),t}uu(e){this.Ha=e.qs,this.Za=ae();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Zn.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const jc="SyncEngine";class wC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class EC{constructor(e){this.key=e,this.lu=!1}}class bC{constructor(e,t,r,o,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new In((c=>um(c)),Ws),this.Tu=new Map,this.Iu=new Set,this.du=new we(Q.comparator),this.Eu=new Map,this.Au=new Rc,this.Ru={},this.Vu=new Map,this.mu=Jn.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function TC(n,e,t=!0){const r=eg(n);let o;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),o=s.view.cu()):o=await Qm(r,e,t,!0),o}async function xC(n,e){const t=eg(n);await Qm(t,e,!0,!1)}async function Qm(n,e,t,r){const o=await W0(n.localStore,vt(e)),s=o.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let c;return r&&(c=await AC(n,e,s,a==="current",o.resumeToken)),n.isPrimaryClient&&t&&Fm(n.remoteStore,o),c}async function AC(n,e,t,r,o){n.gu=(m,g,w)=>(async function(E,b,P,D){let k=b.view.nu(P);k.Ds&&(k=await Ld(E.localStore,b.query,!1).then((({documents:x})=>b.view.nu(x,k))));const M=D&&D.targetChanges.get(b.targetId),O=D&&D.targetMismatches.get(b.targetId)!=null,L=b.view.applyChanges(k,E.isPrimaryClient,M,O);return Gd(E,b.targetId,L._u),L.snapshot})(n,m,g,w);const s=await Ld(n.localStore,e,!0),a=new _C(e,s.qs),c=a.nu(s.documents),l=no.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),u=a.applyChanges(c,n.isPrimaryClient,l);Gd(n,t,u._u);const h=new wC(e,t,a);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function IC(n,e,t){const r=ee(n),o=r.Pu.get(e),s=r.Tu.get(o.targetId);if(s.length>1)return r.Tu.set(o.targetId,s.filter((a=>!Ws(a,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Na(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Nc(r.remoteStore,o.targetId),Va(r,o.targetId)})).catch(cr)):(Va(r,o.targetId),await Na(r.localStore,o.targetId,!0))}async function CC(n,e){const t=ee(n),r=t.Pu.get(e),o=t.Tu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Nc(t.remoteStore,r.targetId))}async function RC(n,e,t){const r=VC(n);try{const o=await(function(a,c){const l=ee(a),u=pe.now(),h=c.reduce(((w,I)=>w.add(I.key)),ae());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let I=Ot(),E=ae();return l.Os.getEntries(w,h).next((b=>{I=b,I.forEach(((P,D)=>{D.isValidDocument()||(E=E.add(P))}))})).next((()=>l.localDocuments.getOverlayedDocuments(w,I))).next((b=>{m=b;const P=[];for(const D of c){const k=WI(D,m.get(D.key).overlayedDocument);k!=null&&P.push(new un(D.key,k,rm(k.value.mapValue),Ke.exists(!0)))}return l.mutationQueue.addMutationBatch(w,u,P,c)})).next((b=>{g=b;const P=b.applyToLocalDocumentSet(m,E);return l.documentOverlayCache.saveOverlays(w,b.batchId,P)}))})).then((()=>({batchId:g.batchId,changes:fm(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(a,c,l){let u=a.Ru[a.currentUser.toKey()];u||(u=new we(ie)),u=u.insert(c,l),a.Ru[a.currentUser.toKey()]=u})(r,o.batchId,t),await oo(r,o.changes),await Js(r.remoteStore)}catch(o){const s=Lc(o,"Failed to persist write");t.reject(s)}}async function Xm(n,e){const t=ee(n);try{const r=await B0(t.localStore,e);e.targetChanges.forEach(((o,s)=>{const a=t.Eu.get(s);a&&(de(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?a.lu=!0:o.modifiedDocuments.size>0?de(a.lu,14607):o.removedDocuments.size>0&&(de(a.lu,42227),a.lu=!1))})),await oo(t,r,e)}catch(r){await cr(r)}}function Hd(n,e,t){const r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Pu.forEach(((s,a)=>{const c=a.view.va(e);c.snapshot&&o.push(c.snapshot)})),(function(a,c){const l=ee(a);l.onlineState=c;let u=!1;l.queries.forEach(((h,m)=>{for(const g of m.wa)g.va(c)&&(u=!0)})),u&&Fc(l)})(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SC(n,e,t){const r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),s=o&&o.key;if(s){let a=new we(Q.comparator);a=a.insert(s,Be.newNoDocument(s,Z.min()));const c=ae().add(s),l=new Qs(Z.min(),new Map,new we(ie),a,c);await Xm(r,l),r.du=r.du.remove(s),r.Eu.delete(e),$c(r)}else await Na(r.localStore,e,!1).then((()=>Va(r,e,t))).catch(cr)}async function PC(n,e){const t=ee(n),r=e.batch.batchId;try{const o=await $0(t.localStore,e);Jm(t,r,null),Ym(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await oo(t,o)}catch(o){await cr(o)}}async function DC(n,e,t){const r=ee(n);try{const o=await(function(a,c){const l=ee(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,c).next((m=>(de(m!==null,37113),h=m.keys(),l.mutationQueue.removeMutationBatch(u,m)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);Jm(r,e,t),Ym(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await oo(r,o)}catch(o){await cr(o)}}function Ym(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function Jm(n,e,t){const r=ee(n);let o=r.Ru[r.currentUser.toKey()];if(o){const s=o.get(e);s&&(t?s.reject(t):s.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function Va(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||Zm(n,r)}))}function Zm(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Nc(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),$c(n))}function Gd(n,e,t){for(const r of t)r instanceof Gm?(n.Au.addReference(r.key,e),NC(n,r)):r instanceof Km?(W(jc,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||Zm(n,r.key)):J(19791,{yu:r})}function NC(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(W(jc,"New document in limbo: "+t),n.Iu.add(r),$c(n))}function $c(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Q(ye.fromString(e)),r=n.mu.next();n.Eu.set(r,new EC(t)),n.du=n.du.insert(t,r),Fm(n.remoteStore,new Wt(vt(Tc(t.path)),r,"TargetPurposeLimboResolution",$s.ue))}}async function oo(n,e,t){const r=ee(n),o=[],s=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach(((c,l)=>{a.push(r.gu(l,e,t).then((u=>{var h;if((u||t)&&r.isPrimaryClient){const m=u?!u.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(u){o.push(u);const m=Pc.Es(l.targetId,u);s.push(m)}})))})),await Promise.all(a),r.hu.J_(o),await(async function(l,u){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>F.forEach(u,(g=>F.forEach(g.Is,(w=>h.persistence.referenceDelegate.addReference(m,g.targetId,w))).next((()=>F.forEach(g.ds,(w=>h.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))))))}catch(m){if(!lr(m))throw m;W(Dc,"Failed to update sequence numbers: "+m)}for(const m of u){const g=m.targetId;if(!m.fromCache){const w=h.Fs.get(g),I=w.snapshotVersion,E=w.withLastLimboFreeSnapshotVersion(I);h.Fs=h.Fs.insert(g,E)}}})(r.localStore,s))}async function kC(n,e){const t=ee(n);if(!t.currentUser.isEqual(e)){W(jc,"User change. New user:",e.toKey());const r=await Mm(t.localStore,e);t.currentUser=e,(function(s,a){s.Vu.forEach((c=>{c.forEach((l=>{l.reject(new G(j.CANCELLED,a))}))})),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await oo(t,r.Bs)}}function MC(n,e){const t=ee(n),r=t.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let o=ae();const s=t.Tu.get(e);if(!s)return o;for(const a of s){const c=t.Pu.get(a);o=o.unionWith(c.view.tu)}return o}}function eg(n){const e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SC.bind(null,e),e.hu.J_=yC.bind(null,e.eventManager),e.hu.pu=vC.bind(null,e.eventManager),e}function VC(n){const e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DC.bind(null,e),e}class ws{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xs(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return j0(this.persistence,new O0,e.initialUser,this.serializer)}Du(e){return new km(Sc.Vi,this.serializer)}bu(e){return new H0}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ws.provider={build:()=>new ws};class OC extends ws{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){de(this.persistence.referenceDelegate instanceof vs,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new E0(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?He.withCacheSize(this.cacheSizeBytes):He.DEFAULT;return new km((r=>vs.Vi(r,t)),this.serializer)}}class Oa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kC.bind(null,this.syncEngine),await pC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gC})()}createDatastore(e){const t=Xs(e.databaseInfo.databaseId),r=(function(s){return new Y0(s)})(e.databaseInfo);return(function(s,a,c,l){return new tC(s,a,c,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,s,a,c){return new rC(r,o,s,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>Hd(this.syncEngine,t,0)),(function(){return $d.C()?new $d:new G0})())}createSyncEngine(e,t){return(function(o,s,a,c,l,u,h){const m=new bC(o,s,a,c,l,u);return h&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const s=ee(o);W(An,"RemoteStore shutting down."),s.Ia.add(5),await ro(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Oa.provider={build:()=>new Oa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="FirestoreClient";class LC{constructor(e,t,r,o,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=$e.UNAUTHENTICATED,this.clientId=gc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{W(on,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(W(on,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Lc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Xi(n,e){n.asyncQueue.verifyOperationInProgress(),W(on,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Mm(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>{Jt("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{W("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Jt("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function Kd(n,e){n.asyncQueue.verifyOperationInProgress();const t=await FC(n);W(on,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Ud(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>Ud(e.remoteStore,o))),n._onlineComponents=e}async function FC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(on,"Using user provided OfflineComponentProvider");try{await Xi(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===j.FAILED_PRECONDITION||o.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Jt("Error using user provided cache. Falling back to memory cache: "+t),await Xi(n,new ws)}}else W(on,"Using default OfflineComponentProvider"),await Xi(n,new OC(void 0));return n._offlineComponents}async function ng(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(on,"Using user provided OnlineComponentProvider"),await Kd(n,n._uninitializedComponentsProvider._online)):(W(on,"Using default OnlineComponentProvider"),await Kd(n,new Oa))),n._onlineComponents}function jC(n){return ng(n).then((e=>e.syncEngine))}async function La(n){const e=await ng(n),t=e.eventManager;return t.onListen=TC.bind(null,e.syncEngine),t.onUnlisten=IC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CC.bind(null,e.syncEngine),t}function $C(n,e,t={}){const r=new Kt;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,c,l,u){const h=new tg({next:g=>{h.Ou(),a.enqueueAndForget((()=>qm(s,m))),g.fromCache&&l.source==="server"?u.reject(new G(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new Hm(c,h,{includeMetadataChanges:!0,ka:!0});return Wm(s,m)})(await La(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="firestore.googleapis.com",Xd=!0;class Yd{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=og,this.ssl=Xd}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Xd;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Nm;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_0)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zs{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new GA;switch(r.type){case"firstParty":return new YA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Qd.get(t);r&&(W("ComponentProvider","Removing Datastore"),Qd.delete(t),r.terminate())})(this),Promise.resolve()}}function BC(n,e,t,r={}){var o;n=it(n,Zs);const s=fc(e),a=n._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(bx(`https://${l}`),Ix("Firestore",!0)),a.host!==og&&a.host!==l&&Jt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!ls(u,c)&&(n._setSettings(u),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=$e.MOCK_USER;else{h=Tx(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new $e(g)}n._authCredentials=new KA(new Wp(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class Re{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Re(this.firestore,e,this._key)}toJSON(){return{type:Re._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(eo(t,Re._jsonSchema))return new Re(e,r||null,new Q(ye.fromString(t.referencePath)))}}Re._jsonSchemaVersion="firestore/documentReference/1.0",Re._jsonSchema={type:Ae("string",Re._jsonSchemaVersion),referencePath:Ae("string")};class Qt extends so{constructor(e,t,r){super(e,t,Tc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new Q(e))}withConverter(e){return new Qt(this.firestore,e,this._path)}}function Jd(n,e,...t){if(n=lt(n),Hp("collection","path",e),n instanceof Zs){const r=ye.fromString(e,...t);return dd(r),new Qt(n,null,r)}{if(!(n instanceof Re||n instanceof Qt))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ye.fromString(e,...t));return dd(r),new Qt(n.firestore,null,r)}}function Jo(n,e,...t){if(n=lt(n),arguments.length===1&&(e=gc.newId()),Hp("doc","path",e),n instanceof Zs){const r=ye.fromString(e,...t);return ud(r),new Re(n,null,new Q(r))}{if(!(n instanceof Re||n instanceof Qt))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ye.fromString(e,...t));return ud(r),new Re(n.firestore,n instanceof Qt?n.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="AsyncQueue";class eh{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Om(this,"async_queue_retry"),this.oc=()=>{const r=Qi();r&&W(Zd,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Qi();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Qi();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Kt;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!lr(e))throw e;W(Zd,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,Vt("INTERNAL UNHANDLED ERROR: ",th(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Oc.createAndSchedule(this,e,t,r,(s=>this.lc(s)));return this.ec.push(o),o}ac(){this.tc&&J(47125,{hc:th(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function th(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const s of r)if(s in o&&typeof o[s]=="function")return!0;return!1})(n,["next","error","complete"])}class sn extends Zs{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new eh,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eh(e),this._firestoreClient=void 0,await e}}}function UC(n,e){const t=typeof n=="object"?n:Mp(),r=typeof n=="string"?n:hs,o=DA(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const s=wx("firestore");s&&BC(o,...s)}return o}function ei(n){if(n._terminated)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zC(n),n._firestoreClient}function zC(n){var e,t,r;const o=n._freezeSettings(),s=(function(c,l,u,h){return new fI(c,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rg(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new LC(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(c){const l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nt(Ve.fromBase64String(e))}catch(t){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nt(Ve.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eo(e,nt._jsonSchema))return nt.fromBase64String(e.bytes)}}nt._jsonSchemaVersion="firestore/bytes/1.0",nt._jsonSchema={type:Ae("string",nt._jsonSchemaVersion),bytes:Ae("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Me(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wt._jsonSchemaVersion}}static fromJSON(e){if(eo(e,wt._jsonSchema))return new wt(e.latitude,e.longitude)}}wt._jsonSchemaVersion="firestore/geoPoint/1.0",wt._jsonSchema={type:Ae("string",wt._jsonSchemaVersion),latitude:Ae("number"),longitude:Ae("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==o[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Et._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eo(e,Et._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Et(e.vectorValues);throw new G(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Et._jsonSchemaVersion="firestore/vectorValue/1.0",Et._jsonSchema={type:Ae("string",Et._jsonSchemaVersion),vectorValues:Ae("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^__.*__$/;class qC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new un(e,this.data,this.fieldMask,t,this.fieldTransforms):new to(e,this.data,t,this.fieldTransforms)}}class sg{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new un(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ig(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ec:n})}}class Bc{constructor(e,t,r,o,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Es(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(ig(this.Ec)&&WC.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class HC{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xs(e)}Dc(e,t,r,o=!1){return new Bc({Ec:e,methodName:t,bc:r,path:Me.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uc(n){const e=n._freezeSettings(),t=Xs(n._databaseId);return new HC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ag(n,e,t,r,o,s={}){const a=n.Dc(s.merge||s.mergeFields?2:0,e,t,o);Wc("Data must be an object, but it was:",a,r);const c=ug(r,a);let l,u;if(s.merge)l=new Ze(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const g=Fa(e,m,t);if(!a.contains(g))throw new G(j.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);hg(h,g)||h.push(g)}l=new Ze(h),u=a.fieldTransforms.filter((m=>l.covers(m.field)))}else l=null,u=a.fieldTransforms;return new qC(new Ge(c),l,u)}class ni extends ti{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ni}}class zc extends ti{_toFieldTransform(e){return new $I(e.path,new Hr)}isEqual(e){return e instanceof zc}}function cg(n,e,t,r){const o=n.Dc(1,e,t);Wc("Data must be an object, but it was:",o,r);const s=[],a=Ge.empty();ln(r,((l,u)=>{const h=qc(e,l,t);u=lt(u);const m=o.gc(h);if(u instanceof ni)s.push(h);else{const g=ri(u,m);g!=null&&(s.push(h),a.set(h,g))}}));const c=new Ze(s);return new sg(a,c,o.fieldTransforms)}function lg(n,e,t,r,o,s){const a=n.Dc(1,e,t),c=[Fa(e,r,t)],l=[o];if(s.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)c.push(Fa(e,s[g])),l.push(s[g+1]);const u=[],h=Ge.empty();for(let g=c.length-1;g>=0;--g)if(!hg(u,c[g])){const w=c[g];let I=l[g];I=lt(I);const E=a.gc(w);if(I instanceof ni)u.push(w);else{const b=ri(I,E);b!=null&&(u.push(w),h.set(w,b))}}const m=new Ze(u);return new sg(h,m,a.fieldTransforms)}function ri(n,e){if(dg(n=lt(n)))return Wc("Unsupported field value:",e,n),ug(n,e);if(n instanceof ti)return(function(r,o){if(!ig(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(o);s&&o.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,o){const s=[];let a=0;for(const c of r){let l=ri(c,o.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,o){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LI(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pe.fromDate(r);return{timestampValue:ys(o.serializer,s)}}if(r instanceof pe){const s=new pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ys(o.serializer,s)}}if(r instanceof wt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nt)return{bytesValue:Am(o.serializer,r._byteString)};if(r instanceof Re){const s=o.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw o.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Cc(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Et)return(function(a,c){return{mapValue:{fields:{[tm]:{stringValue:nm},[fs]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw c.wc("VectorValues must only contain numeric values.");return xc(c.serializer,u)}))}}}}}})(r,o);throw o.wc(`Unsupported field value: ${yc(r)}`)})(n,e)}function ug(n,e){const t={};return Qp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ln(n,((r,o)=>{const s=ri(o,e.Vc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function dg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pe||n instanceof wt||n instanceof nt||n instanceof Re||n instanceof ti||n instanceof Et)}function Wc(n,e,t){if(!dg(t)||!Gp(t)){const r=yc(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Fa(n,e,t){if((e=lt(e))instanceof io)return e._internalPath;if(typeof e=="string")return qc(n,e);throw Es("Field path arguments must be of type string or ",n,!1,void 0,t)}const GC=new RegExp("[~\\*/\\[\\]]");function qc(n,e,t){if(e.search(GC)>=0)throw Es(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new io(...e.split("."))._internalPath}catch{throw Es(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Es(n,e,t,r,o){const s=r&&!r.isEmpty(),a=o!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${o}`),l+=")"),new G(j.INVALID_ARGUMENT,c+n+l)}function hg(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,r,o,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KC extends fg{data(){return super.data()}}function pg(n,e){return typeof e=="string"?qc(n,e):e instanceof io?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QC{convertValue(e,t="none"){switch(nn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ln(e,((o,s)=>{r[o]=this.convertValue(s,t)})),r}convertVectorValue(e){var t,r,o;const s=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[fs].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((a=>be(a.doubleValue)));return new Et(s)}convertGeoPoint(e){return new wt(be(e.latitude),be(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Us(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zr(e));default:return null}}convertTimestamp(e){const t=en(e);return new pe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ye.fromString(e);de(Dm(r),9688,{name:e});const o=new Wr(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return o.isEqual(t)||Vt(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Sr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wn extends fg{constructor(e,t,r,o,s,a){super(e,t,r,o,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wn._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wn._jsonSchemaVersion="firestore/documentSnapshot/1.0",wn._jsonSchema={type:Ae("string",wn._jsonSchemaVersion),bundleSource:Ae("string","DocumentSnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class Zo extends wn{data(e={}){return super.data(e)}}class En{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Sr(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Zo(this._firestore,this._userDataWriter,r.key,r,new Sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,s){if(o._snapshot.oldDocs.isEmpty()){let a=0;return o._snapshot.docChanges.map((c=>{const l=new Zo(o._firestore,o._userDataWriter,c.doc.key,c.doc,new Sr(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const l=new Zo(o._firestore,o._userDataWriter,c.doc.key,c.doc,new Sr(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter);let u=-1,h=-1;return c.type!==0&&(u=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),h=a.indexOf(c.doc.key)),{type:XC(c.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=En._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),o.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:n})}}En._jsonSchemaVersion="firestore/querySnapshot/1.0",En._jsonSchema={type:Ae("string",En._jsonSchemaVersion),bundleSource:Ae("string","QuerySnapshot"),bundleName:Ae("string"),bundle:Ae("string")};class Hc extends QC{constructor(e){super(),this.firestore=e}convertBytes(e){return new nt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}}function YC(n){n=it(n,so);const e=it(n.firestore,sn),t=ei(e),r=new Hc(e);return mg(n._query),$C(t,n._query).then((o=>new En(e,r,n,o)))}function JC(n,e,t,...r){n=it(n,Re);const o=it(n.firestore,sn),s=Uc(o);let a;return a=typeof(e=lt(e))=="string"||e instanceof io?lg(s,"updateDoc",n._key,e,t,r):cg(s,"updateDoc",n._key,e),oi(o,[a.toMutation(n._key,Ke.exists(!0))])}function ZC(n){return oi(it(n.firestore,sn),[new Ks(n._key,Ke.none())])}function eR(n,e){const t=it(n.firestore,sn),r=Jo(n),o=gg(n.converter,e);return oi(t,[ag(Uc(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Ke.exists(!1))]).then((()=>r))}function tR(n,...e){var t,r,o;n=lt(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||nh(e[a])||(s=e[a++]);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(nh(e[a])){const m=e[a];e[a]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(o=m.complete)===null||o===void 0?void 0:o.bind(m)}let l,u,h;if(n instanceof Re)u=it(n.firestore,sn),h=Tc(n._key.path),l={next:m=>{e[a]&&e[a](nR(u,n,m))},error:e[a+1],complete:e[a+2]};else{const m=it(n,so);u=it(m.firestore,sn),h=m._query;const g=new Hc(u);l={next:w=>{e[a]&&e[a](new En(u,g,m,w))},error:e[a+1],complete:e[a+2]},mg(n._query)}return(function(g,w,I,E){const b=new tg(E),P=new Hm(w,b,I);return g.asyncQueue.enqueueAndForget((async()=>Wm(await La(g),P))),()=>{b.Ou(),g.asyncQueue.enqueueAndForget((async()=>qm(await La(g),P)))}})(ei(u),h,c,l)}function oi(n,e){return(function(r,o){const s=new Kt;return r.asyncQueue.enqueueAndForget((async()=>RC(await jC(r),o,s))),s.promise})(ei(n),e)}function nR(n,e,t){const r=t.docs.get(e._key),o=new Hc(n);return new wn(n,o,e._key,r,new Sr(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Uc(e)}set(e,t,r){this._verifyNotCommitted();const o=Yi(e,this._firestore),s=gg(o.converter,t,r),a=ag(this._dataReader,"WriteBatch.set",o._key,s,o.converter!==null,r);return this._mutations.push(a.toMutation(o._key,Ke.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const s=Yi(e,this._firestore);let a;return a=typeof(t=lt(t))=="string"||t instanceof io?lg(this._dataReader,"WriteBatch.update",s._key,t,r,o):cg(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yi(e,this._firestore);return this._mutations=this._mutations.concat(new Ks(t._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yi(n,e){if((n=lt(n)).firestore!==e)throw new G(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function rh(){return new zc("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(n){return ei(n=it(n,sn)),new rR(n,(e=>oi(n,e)))}(function(e,t=!0){(function(o){ar=o})(VA),us(new jr("firestore",((r,{instanceIdentifier:o,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new sn(new QA(r.getProvider("auth-internal")),new JA(a,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wr(u.options.projectId,h)})(a,o),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),qn(sd,id,e),qn(sd,id,"esm2017")})();var sR="firebase",iR="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(sR,iR,"app");const aR={apiKey:"AIzaSyBMKc42PJ5_Iztm6zruI3QND6uv2t5ZaEg",authDomain:"batterybuddy-3fe86.firebaseapp.com",projectId:"batterybuddy-3fe86",storageBucket:"batterybuddy-3fe86.firebasestorage.app",messagingSenderId:"577036011593",appId:"1:577036011593:web:4afab6b249ead3923e1798"},cR=OA().length?Mp():kp(aR),Ln=UC(cR),lR=[{id:"1",brand:"HP",model:"63XL",color:"Black",stock:5,reorderThreshold:10,lastUpdated:new Date("2023-10-26T10:00:00Z"),imageUrl:"https://picsum.photos/100/100?random=1"},{id:"2",brand:"HP",model:"63",color:"Tri-Color",stock:12,reorderThreshold:10,lastUpdated:new Date("2023-10-25T14:30:00Z"),imageUrl:"https://picsum.photos/100/100?random=2"},{id:"3",brand:"Canon",model:"PG-245XL",color:"Black High-Yield",stock:18,reorderThreshold:15,lastUpdated:new Date("2023-10-24T09:00:00Z"),imageUrl:"https://picsum.photos/100/100?random=3"},{id:"4",brand:"Epson",model:"288",color:"Cyan",stock:3,reorderThreshold:5,lastUpdated:new Date("2023-10-27T11:00:00Z"),imageUrl:"https://picsum.photos/100/100?random=4"},{id:"5",brand:"Brother",model:"TN760",color:"Toner",stock:8,reorderThreshold:5,lastUpdated:new Date("2023-10-22T16:00:00Z"),imageUrl:"https://picsum.photos/100/100?random=5"}],yg=f.createContext(void 0);function uR({children:n}){const[e,t]=f.useState([]);f.useEffect(()=>{const c=Jd(Ln,"cartridges");(async()=>{if((await YC(c)).empty){console.log("Cartridges collection is empty, seeding with initial data...");const m=oR(Ln);lR.forEach(g=>{const{id:w,...I}=g,E=Jo(Ln,"cartridges",w);m.set(E,{...I,lastUpdated:pe.fromDate(I.lastUpdated)})}),await m.commit(),console.log("Database seeded successfully.")}})();const u=tR(c,h=>{const m=h.docs.map(g=>{const w=g.data();return{id:g.id,...w,lastUpdated:w.lastUpdated?.toDate()||new Date}});t(m)});return()=>u()},[]);const r=async c=>{try{await eR(Jd(Ln,"cartridges"),{...c,lastUpdated:rh()})}catch(l){console.error("Error adding cartridge: ",l)}},o=async(c,l)=>{try{const u=Jo(Ln,"cartridges",c);await JC(u,{...l,lastUpdated:rh()})}catch(u){console.error("Error updating cartridge: ",u)}},s=async c=>{try{await ZC(Jo(Ln,"cartridges",c))}catch(l){console.error("Error deleting cartridge: ",l)}},a=async(c,l)=>{l<0||await o(c,{stock:l})};return y.jsx(yg.Provider,{value:{cartridges:e,addCartridge:r,updateCartridge:o,deleteCartridge:s,updateStock:a},children:n})}const pP=()=>{const n=f.useContext(yg);if(n===void 0)throw new Error("useCartridgeData must be used within a CartridgeDataProvider");return n};var dR=(n,e,t,r,o,s,a,c)=>{let l=document.documentElement,u=["light","dark"];function h(w){(Array.isArray(n)?n:[n]).forEach(I=>{let E=I==="class",b=E&&s?o.map(P=>s[P]||P):o;E?(l.classList.remove(...b),l.classList.add(s&&s[w]?s[w]:w)):l.setAttribute(I,w)}),m(w)}function m(w){c&&u.includes(w)&&(l.style.colorScheme=w)}function g(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)h(r);else try{let w=localStorage.getItem(e)||t,I=a&&w==="system"?g():w;h(I)}catch{}},oh=["light","dark"],vg="(prefers-color-scheme: dark)",hR=typeof window>"u",Gc=f.createContext(void 0),fR={setTheme:n=>{},themes:[]},pR=()=>{var n;return(n=f.useContext(Gc))!=null?n:fR},mR=n=>f.useContext(Gc)?f.createElement(f.Fragment,null,n.children):f.createElement(yR,{...n}),gR=["light","dark"],yR=({forcedTheme:n,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:r=!0,storageKey:o="theme",themes:s=gR,defaultTheme:a=t?"system":"light",attribute:c="data-theme",value:l,children:u,nonce:h,scriptProps:m})=>{let[g,w]=f.useState(()=>_R(o,a)),[I,E]=f.useState(()=>g==="system"?Ji():g),b=l?Object.values(l):s,P=f.useCallback(O=>{let L=O;if(!L)return;O==="system"&&t&&(L=Ji());let x=l?l[L]:L,v=e?wR(h):null,T=document.documentElement,C=R=>{R==="class"?(T.classList.remove(...b),x&&T.classList.add(x)):R.startsWith("data-")&&(x?T.setAttribute(R,x):T.removeAttribute(R))};if(Array.isArray(c)?c.forEach(C):C(c),r){let R=oh.includes(a)?a:null,S=oh.includes(L)?L:R;T.style.colorScheme=S}v?.()},[h]),D=f.useCallback(O=>{let L=typeof O=="function"?O(g):O;w(L);try{localStorage.setItem(o,L)}catch{}},[g]),k=f.useCallback(O=>{let L=Ji(O);E(L),g==="system"&&t&&!n&&P("system")},[g,n]);f.useEffect(()=>{let O=window.matchMedia(vg);return O.addListener(k),k(O),()=>O.removeListener(k)},[k]),f.useEffect(()=>{let O=L=>{L.key===o&&(L.newValue?w(L.newValue):D(a))};return window.addEventListener("storage",O),()=>window.removeEventListener("storage",O)},[D]),f.useEffect(()=>{P(n??g)},[n,g]);let M=f.useMemo(()=>({theme:g,setTheme:D,forcedTheme:n,resolvedTheme:g==="system"?I:g,themes:t?[...s,"system"]:s,systemTheme:t?I:void 0}),[g,D,n,I,t,s]);return f.createElement(Gc.Provider,{value:M},f.createElement(vR,{forcedTheme:n,storageKey:o,attribute:c,enableSystem:t,enableColorScheme:r,defaultTheme:a,value:l,themes:s,nonce:h,scriptProps:m}),u)},vR=f.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:a,themes:c,nonce:l,scriptProps:u})=>{let h=JSON.stringify([t,e,s,n,c,a,r,o]).slice(1,-1);return f.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${dR.toString()})(${h})`}})}),_R=(n,e)=>{if(hR)return;let t;try{t=localStorage.getItem(n)||void 0}catch{}return t||e},wR=n=>{let e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Ji=n=>(n||(n=window.matchMedia(vg)),n.matches?"dark":"light");const ER="Settings",bR="Theme",TR="Light",xR="Dark",AR="System",IR="Language",CR="Dashboard",RR="Inventory",SR="Brand",PR="Model",DR="Color",NR="Status",kR="Image",MR="Stock",VR="Threshold",OR="Actions",LR="Low",FR="Edit",jR="Delete",$R="Cancel",BR="Quantity",UR="Barcode",zR={Settings:ER,Theme:bR,Light:TR,Dark:xR,System:AR,Language:IR,Dashboard:CR,Inventory:RR,"An overview of your cartridge inventory.":"An overview of your cartridge inventory.","Manage your cartridge inventory and reorder thresholds.":"Manage your cartridge inventory and reorder thresholds.","Total Cartridge Types":"Total Cartridge Types","Different models in inventory":"Different models in inventory","Total Stock Level":"Total Stock Level","Sum of all cartridges in stock":"Sum of all cartridges in stock","Needs Reordering":"Needs Reordering","Items at or below threshold":"Items at or below threshold","Restock Report":"Restock Report","These items are below their reorder threshold.":"These items are below their reorder threshold.","Export Report":"Export Report","Export as CSV":"Export as CSV","Export as Image":"Export as Image","Export as PDF":"Export as PDF","All Good!":"All Good!","No items currently require restocking.":"No items currently require restocking.",Brand:SR,Model:PR,Color:DR,"Current Stock":"Current Stock","Reorder Threshold":"Reorder Threshold",Status:NR,"Low Stock":"Low Stock","Add Cartridge":"Add Cartridge","All Cartridges":"All Cartridges",Image:kR,Stock:MR,Threshold:VR,"Last Updated":"Last Updated",Actions:OR,Low:LR,"No cartridges found.":"No cartridges found.",Edit:FR,Delete:jR,"Are you sure?":"Are you sure?","This action cannot be undone. This will permanently delete the cartridge from your inventory.":"This action cannot be undone. This will permanently delete the cartridge from your inventory.",Cancel:$R,"Edit Cartridge":"Edit Cartridge","Add New Cartridge":"Add New Cartridge","Update the details for this cartridge.":"Update the details for this cartridge.","Enter the details for the new cartridge.":"Enter the details for the new cartridge.","e.g., HP":"e.g., HP","e.g., 63XL":"e.g., 63XL","e.g., Black":"e.g., Black","Image URL":"Image URL","Save Changes":"Save Changes","Quantity to Reorder":"Quantity to Reorder",Quantity:BR,Barcode:UR},WR="Configuraes",qR="Tema",HR="Claro",GR="Escuro",KR="Sistema",QR="Idioma",XR="Painel",YR="Inventrio",JR="Marca",ZR="Modelo",eS="Cor",tS="Status",nS="Imagem",rS="Estoque",oS="Limite",sS="Aes",iS="Baixo",aS="Editar",cS="Excluir",lS="Cancelar",uS="Quantidade",dS="Cdigo de Barras",hS="Marcas",fS="Cores",pS={Settings:WR,Theme:qR,Light:HR,Dark:GR,System:KR,Language:QR,Dashboard:XR,Inventory:YR,"An overview of your cartridge inventory.":"Uma viso geral do seu inventrio de cartuchos.","Manage your cartridge inventory and reorder thresholds.":"Gerencie seu inventrio de cartuchos e limites de reposio.","Total Cartridge Types":"Tipos Totais de Cartucho","Different models in inventory":"Modelos diferentes no inventrio","Total Stock Level":"Nvel Total de Estoque","Sum of all cartridges in stock":"Soma de todos os cartuchos em estoque","Needs Reordering":"Precisa Repor","Items at or below threshold":"Itens no limite ou abaixo","Restock Report":"Relatrio de Reposio","These items are below their reorder threshold.":"Estes itens esto abaixo do limite de reposio.","Export Report":"Exportar Relatrio","Export as CSV":"Exportar como CSV","Export as Image":"Exportar como Imagem","Export as PDF":"Exportar como PDF","Export as ZIP":"Exportar como ZIP","All Good!":"Tudo Certo!","No items currently require restocking.":"Nenhum item precisa de reposio no momento.",Brand:JR,Model:ZR,Color:eS,"Current Stock":"Estoque Atual","Reorder Threshold":"Limite de Reposio",Status:tS,"Low Stock":"Estoque Baixo","Add Cartridge":"Adicionar Cartucho","All Cartridges":"Todos os Cartuchos",Image:nS,Stock:rS,Threshold:oS,"Last Updated":"ltima Atualizao",Actions:sS,Low:iS,"No cartridges found.":"Nenhum cartucho encontrado.",Edit:aS,Delete:cS,"Are you sure?":"Voc tem certeza?","This action cannot be undone. This will permanently delete the cartridge from your inventory.":"Esta ao no pode ser desfeita. Isso excluir permanentemente o cartucho do seu inventrio.",Cancel:lS,"Edit Cartridge":"Editar Cartucho","Add New Cartridge":"Adicionar Novo Cartucho","Update the details for this cartridge.":"Atualize os detalhes deste cartucho.","Enter the details for the new cartridge.":"Insira os detalhes do novo cartucho.","e.g., HP":"ex., HP","e.g., 63XL":"ex., 63XL","e.g., Black":"ex., Preto","e.g., 123456789":"ex., 123456789","Image URL":"URL da Imagem","Save Changes":"Salvar Alteraes","Quantity to Reorder":"Quantidade para Repor",Quantity:uS,Barcode:dS,Brands:hS,Colors:fS,"CSV exported successfully.":"CSV exportado com sucesso.","Failed to export CSV.":"Falha ao exportar CSV.","Generating image...":"Gerando imagem...","Image exported successfully.":"Imagem exportada com sucesso.","Failed to export image.":"Falha ao exportar imagem.","Generating ZIP file... This may take a moment.":"Gerando arquivo ZIP... Isso pode levar um momento.","ZIP exported successfully.":"ZIP exportado com sucesso.","Failed to export ZIP.":"Falha ao exportar ZIP.","Generating PDF...":"Gerando PDF...","PDF exported successfully.":"PDF exportado com sucesso.","Failed to export PDF.":"Falha ao exportar PDF.","Search cartridges...":"Pesquisar cartuchos...","Select a brand":"Selecione uma marca","Select a model":"Selecione um modelo"},sh={en:zR,pt:pS},_g=f.createContext(void 0);function mS(){if(typeof window>"u")return"en";const n=localStorage.getItem("locale");if(n)try{if(JSON.parse(n)==="pt")return"pt"}catch{return"en"}return"en"}function gS({children:n}){const[e,t]=f.useState(mS),r=s=>{t(s),localStorage.setItem("locale",JSON.stringify(s))},o=f.useCallback(s=>{const a=s.split(".");let c=sh[e];for(const l of a)if(c=c?.[l],c===void 0){let u=sh.en;for(const h of a)u=u?.[h];return u||s}return c||s},[e]);return y.jsx(_g.Provider,{value:{locale:e,setLocale:r,t:o},children:n})}const Kc=()=>{const n=f.useContext(_g);if(n===void 0)throw new Error("useI18n must be used within an I18nProvider");return n};function yS({children:n}){return y.jsx(mR,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:y.jsx(gS,{children:n})})}var vS=f.createContext(void 0);function wg(n){const e=f.useContext(vS);return n||e||"ltr"}var Zi="rovingFocusGroup.onEntryFocus",_S={bubbles:!1,cancelable:!0},ao="RovingFocusGroup",[ja,Eg,wS]=cc(ao),[ES,bg]=cn(ao,[wS]),[bS,TS]=ES(ao),Tg=f.forwardRef((n,e)=>y.jsx(ja.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(ja.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(xS,{...n,ref:e})})}));Tg.displayName=ao;var xS=f.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:o=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...m}=n,g=f.useRef(null),w=Te(e,g),I=wg(s),[E,b]=rr({prop:a,defaultProp:c??null,onChange:l,caller:ao}),[P,D]=f.useState(!1),k=Qe(u),M=Eg(t),O=f.useRef(!1),[L,x]=f.useState(0);return f.useEffect(()=>{const v=g.current;if(v)return v.addEventListener(Zi,k),()=>v.removeEventListener(Zi,k)},[k]),y.jsx(bS,{scope:t,orientation:r,dir:I,loop:o,currentTabStopId:E,onItemFocus:f.useCallback(v=>b(v),[b]),onItemShiftTab:f.useCallback(()=>D(!0),[]),onFocusableItemAdd:f.useCallback(()=>x(v=>v+1),[]),onFocusableItemRemove:f.useCallback(()=>x(v=>v-1),[]),children:y.jsx(he.div,{tabIndex:P||L===0?-1:0,"data-orientation":r,...m,ref:w,style:{outline:"none",...n.style},onMouseDown:K(n.onMouseDown,()=>{O.current=!0}),onFocus:K(n.onFocus,v=>{const T=!O.current;if(v.target===v.currentTarget&&T&&!P){const C=new CustomEvent(Zi,_S);if(v.currentTarget.dispatchEvent(C),!C.defaultPrevented){const R=M().filter(Y=>Y.focusable),S=R.find(Y=>Y.active),A=R.find(Y=>Y.id===E),oe=[S,A,...R].filter(Boolean).map(Y=>Y.ref.current);Ig(oe,h)}}O.current=!1}),onBlur:K(n.onBlur,()=>D(!1))})})}),xg="RovingFocusGroupItem",Ag=f.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:o=!1,tabStopId:s,children:a,...c}=n,l=Pt(),u=s||l,h=TS(xg,t),m=h.currentTabStopId===u,g=Eg(t),{onFocusableItemAdd:w,onFocusableItemRemove:I,currentTabStopId:E}=h;return f.useEffect(()=>{if(r)return w(),()=>I()},[r,w,I]),y.jsx(ja.ItemSlot,{scope:t,id:u,focusable:r,active:o,children:y.jsx(he.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...c,ref:e,onMouseDown:K(n.onMouseDown,b=>{r?h.onItemFocus(u):b.preventDefault()}),onFocus:K(n.onFocus,()=>h.onItemFocus(u)),onKeyDown:K(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const P=CS(b,h.orientation,h.dir);if(P!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let k=g().filter(M=>M.focusable).map(M=>M.ref.current);if(P==="last")k.reverse();else if(P==="prev"||P==="next"){P==="prev"&&k.reverse();const M=k.indexOf(b.currentTarget);k=h.loop?RS(k,M+1):k.slice(M+1)}setTimeout(()=>Ig(k))}}),children:typeof a=="function"?a({isCurrentTabStop:m,hasTabStop:E!=null}):a})})});Ag.displayName=xg;var AS={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IS(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function CS(n,e,t){const r=IS(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return AS[r]}function Ig(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function RS(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var SS=Tg,PS=Ag;function DS(n){const e=NS(n),t=f.forwardRef((r,o)=>{const{children:s,...a}=r,c=f.Children.toArray(s),l=c.find(MS);if(l){const u=l.props.children,h=c.map(m=>m===l?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return y.jsx(e,{...a,ref:o,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return y.jsx(e,{...a,ref:o,children:s})});return t.displayName=`${n}.Slot`,t}function NS(n){const e=f.forwardRef((t,r)=>{const{children:o,...s}=t;if(f.isValidElement(o)){const a=OS(o),c=VS(s,o.props);return o.type!==f.Fragment&&(c.ref=r?an(r,a):a),f.cloneElement(o,c)}return f.Children.count(o)>1?f.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var kS=Symbol("radix.slottable");function MS(n){return f.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===kS}function VS(n,e){const t={...e};for(const r in e){const o=n[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?t[r]=(...c)=>{const l=s(...c);return o(...c),l}:o&&(t[r]=o):r==="style"?t[r]={...o,...s}:r==="className"&&(t[r]=[o,s].filter(Boolean).join(" "))}return{...n,...t}}function OS(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var $a=["Enter"," "],LS=["ArrowDown","PageUp","Home"],Cg=["ArrowUp","PageDown","End"],FS=[...LS,...Cg],jS={ltr:[...$a,"ArrowRight"],rtl:[...$a,"ArrowLeft"]},$S={ltr:["ArrowLeft"],rtl:["ArrowRight"]},co="Menu",[Qr,BS,US]=cc(co),[Rn,Rg]=cn(co,[US,ks,bg]),lo=ks(),Sg=bg(),[Pg,dn]=Rn(co),[zS,uo]=Rn(co),Dg=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:o,onOpenChange:s,modal:a=!0}=n,c=lo(e),[l,u]=f.useState(null),h=f.useRef(!1),m=Qe(s),g=wg(o);return f.useEffect(()=>{const w=()=>{h.current=!0,document.addEventListener("pointerdown",I,{capture:!0,once:!0}),document.addEventListener("pointermove",I,{capture:!0,once:!0})},I=()=>h.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",I,{capture:!0}),document.removeEventListener("pointermove",I,{capture:!0})}},[]),y.jsx(ic,{...c,children:y.jsx(Pg,{scope:e,open:t,onOpenChange:m,content:l,onContentChange:u,children:y.jsx(zS,{scope:e,onClose:f.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:g,modal:a,children:r})})})};Dg.displayName=co;var WS="MenuAnchor",Qc=f.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,o=lo(t);return y.jsx(Mf,{...o,...r,ref:e})});Qc.displayName=WS;var Xc="MenuPortal",[qS,Ng]=Rn(Xc,{forceMount:void 0}),kg=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:o}=n,s=dn(Xc,e);return y.jsx(qS,{scope:e,forceMount:t,children:y.jsx(At,{present:t||s.open,children:y.jsx(Is,{asChild:!0,container:o,children:r})})})};kg.displayName=Xc;var rt="MenuContent",[HS,Yc]=Rn(rt),Mg=f.forwardRef((n,e)=>{const t=Ng(rt,n.__scopeMenu),{forceMount:r=t.forceMount,...o}=n,s=dn(rt,n.__scopeMenu),a=uo(rt,n.__scopeMenu);return y.jsx(Qr.Provider,{scope:n.__scopeMenu,children:y.jsx(At,{present:r||s.open,children:y.jsx(Qr.Slot,{scope:n.__scopeMenu,children:a.modal?y.jsx(GS,{...o,ref:e}):y.jsx(KS,{...o,ref:e})})})})}),GS=f.forwardRef((n,e)=>{const t=dn(rt,n.__scopeMenu),r=f.useRef(null),o=Te(e,r);return f.useEffect(()=>{const s=r.current;if(s)return zh(s)},[]),y.jsx(Jc,{...n,ref:o,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:K(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),KS=f.forwardRef((n,e)=>{const t=dn(rt,n.__scopeMenu);return y.jsx(Jc,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),QS=DS("MenuContent.ScrollLock"),Jc=f.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:g,onDismiss:w,disableOutsideScroll:I,...E}=n,b=dn(rt,t),P=uo(rt,t),D=lo(t),k=Sg(t),M=BS(t),[O,L]=f.useState(null),x=f.useRef(null),v=Te(e,x,b.onContentChange),T=f.useRef(0),C=f.useRef(""),R=f.useRef(0),S=f.useRef(null),A=f.useRef("right"),U=f.useRef(0),oe=I?Ka:f.Fragment,Y=I?{as:QS,allowPinchZoom:!0}:void 0,re=z=>{const me=C.current+z,De=M().filter(ne=>!ne.disabled),ve=document.activeElement,te=De.find(ne=>ne.ref.current===ve)?.textValue,_e=De.map(ne=>ne.textValue),ze=a1(_e,me,te),tt=De.find(ne=>ne.textValue===ze)?.ref.current;(function ne(dt){C.current=dt,window.clearTimeout(T.current),dt!==""&&(T.current=window.setTimeout(()=>ne(""),1e3))})(me),tt&&setTimeout(()=>tt.focus())};f.useEffect(()=>()=>window.clearTimeout(T.current),[]),Mh();const $=f.useCallback(z=>A.current===S.current?.side&&l1(z,S.current?.area),[]);return y.jsx(HS,{scope:t,searchRef:C,onItemEnter:f.useCallback(z=>{$(z)&&z.preventDefault()},[$]),onItemLeave:f.useCallback(z=>{$(z)||(x.current?.focus(),L(null))},[$]),onTriggerLeave:f.useCallback(z=>{$(z)&&z.preventDefault()},[$]),pointerGraceTimerRef:R,onPointerGraceIntentChange:f.useCallback(z=>{S.current=z},[]),children:y.jsx(oe,{...Y,children:y.jsx(Ga,{asChild:!0,trapped:o,onMountAutoFocus:K(s,z=>{z.preventDefault(),x.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:y.jsx(Yr,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:g,onDismiss:w,children:y.jsx(SS,{asChild:!0,...k,dir:P.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:L,onEntryFocus:K(l,z=>{P.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(Vf,{role:"menu","aria-orientation":"vertical","data-state":Yg(b.open),"data-radix-menu-content":"",dir:P.dir,...D,...E,ref:v,style:{outline:"none",...E.style},onKeyDown:K(E.onKeyDown,z=>{const De=z.target.closest("[data-radix-menu-content]")===z.currentTarget,ve=z.ctrlKey||z.altKey||z.metaKey,te=z.key.length===1;De&&(z.key==="Tab"&&z.preventDefault(),!ve&&te&&re(z.key));const _e=x.current;if(z.target!==_e||!FS.includes(z.key))return;z.preventDefault();const tt=M().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);Cg.includes(z.key)&&tt.reverse(),s1(tt)}),onBlur:K(n.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(T.current),C.current="")}),onPointerMove:K(n.onPointerMove,Xr(z=>{const me=z.target,De=U.current!==z.clientX;if(z.currentTarget.contains(me)&&De){const ve=z.clientX>U.current?"right":"left";A.current=ve,U.current=z.clientX}}))})})})})})})});Mg.displayName=rt;var XS="MenuGroup",Zc=f.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(he.div,{role:"group",...r,ref:e})});Zc.displayName=XS;var YS="MenuLabel",Vg=f.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(he.div,{...r,ref:e})});Vg.displayName=YS;var bs="MenuItem",ih="menu.itemSelect",si=f.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...o}=n,s=f.useRef(null),a=uo(bs,n.__scopeMenu),c=Yc(bs,n.__scopeMenu),l=Te(e,s),u=f.useRef(!1),h=()=>{const m=s.current;if(!t&&m){const g=new CustomEvent(ih,{bubbles:!0,cancelable:!0});m.addEventListener(ih,w=>r?.(w),{once:!0}),Ha(m,g),g.defaultPrevented?u.current=!1:a.onClose()}};return y.jsx(Og,{...o,ref:l,disabled:t,onClick:K(n.onClick,h),onPointerDown:m=>{n.onPointerDown?.(m),u.current=!0},onPointerUp:K(n.onPointerUp,m=>{u.current||m.currentTarget?.click()}),onKeyDown:K(n.onKeyDown,m=>{const g=c.searchRef.current!=="";t||g&&m.key===" "||$a.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});si.displayName=bs;var Og=f.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:o,...s}=n,a=Yc(bs,t),c=Sg(t),l=f.useRef(null),u=Te(e,l),[h,m]=f.useState(!1),[g,w]=f.useState("");return f.useEffect(()=>{const I=l.current;I&&w((I.textContent??"").trim())},[s.children]),y.jsx(Qr.ItemSlot,{scope:t,disabled:r,textValue:o??g,children:y.jsx(PS,{asChild:!0,...c,focusable:!r,children:y.jsx(he.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:K(n.onPointerMove,Xr(I=>{r?a.onItemLeave(I):(a.onItemEnter(I),I.defaultPrevented||I.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:K(n.onPointerLeave,Xr(I=>a.onItemLeave(I))),onFocus:K(n.onFocus,()=>m(!0)),onBlur:K(n.onBlur,()=>m(!1))})})})}),JS="MenuCheckboxItem",Lg=f.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...o}=n;return y.jsx(Ug,{scope:n.__scopeMenu,checked:t,children:y.jsx(si,{role:"menuitemcheckbox","aria-checked":Ts(t)?"mixed":t,...o,ref:e,"data-state":nl(t),onSelect:K(o.onSelect,()=>r?.(Ts(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Lg.displayName=JS;var Fg="MenuRadioGroup",[ZS,e1]=Rn(Fg,{value:void 0,onValueChange:()=>{}}),jg=f.forwardRef((n,e)=>{const{value:t,onValueChange:r,...o}=n,s=Qe(r);return y.jsx(ZS,{scope:n.__scopeMenu,value:t,onValueChange:s,children:y.jsx(Zc,{...o,ref:e})})});jg.displayName=Fg;var $g="MenuRadioItem",Bg=f.forwardRef((n,e)=>{const{value:t,...r}=n,o=e1($g,n.__scopeMenu),s=t===o.value;return y.jsx(Ug,{scope:n.__scopeMenu,checked:s,children:y.jsx(si,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":nl(s),onSelect:K(r.onSelect,()=>o.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});Bg.displayName=$g;var el="MenuItemIndicator",[Ug,t1]=Rn(el,{checked:!1}),zg=f.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...o}=n,s=t1(el,t);return y.jsx(At,{present:r||Ts(s.checked)||s.checked===!0,children:y.jsx(he.span,{...o,ref:e,"data-state":nl(s.checked)})})});zg.displayName=el;var n1="MenuSeparator",Wg=f.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(he.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Wg.displayName=n1;var r1="MenuArrow",qg=f.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,o=lo(t);return y.jsx(Of,{...o,...r,ref:e})});qg.displayName=r1;var tl="MenuSub",[o1,Hg]=Rn(tl),Gg=n=>{const{__scopeMenu:e,children:t,open:r=!1,onOpenChange:o}=n,s=dn(tl,e),a=lo(e),[c,l]=f.useState(null),[u,h]=f.useState(null),m=Qe(o);return f.useEffect(()=>(s.open===!1&&m(!1),()=>m(!1)),[s.open,m]),y.jsx(ic,{...a,children:y.jsx(Pg,{scope:e,open:r,onOpenChange:m,content:u,onContentChange:h,children:y.jsx(o1,{scope:e,contentId:Pt(),triggerId:Pt(),trigger:c,onTriggerChange:l,children:t})})})};Gg.displayName=tl;var Pr="MenuSubTrigger",Kg=f.forwardRef((n,e)=>{const t=dn(Pr,n.__scopeMenu),r=uo(Pr,n.__scopeMenu),o=Hg(Pr,n.__scopeMenu),s=Yc(Pr,n.__scopeMenu),a=f.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=s,u={__scopeMenu:n.__scopeMenu},h=f.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return f.useEffect(()=>h,[h]),f.useEffect(()=>{const m=c.current;return()=>{window.clearTimeout(m),l(null)}},[c,l]),y.jsx(Qc,{asChild:!0,...u,children:y.jsx(Og,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":o.contentId,"data-state":Yg(t.open),...n,ref:an(e,o.onTriggerChange),onClick:m=>{n.onClick?.(m),!(n.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:K(n.onPointerMove,Xr(m=>{s.onItemEnter(m),!m.defaultPrevented&&!n.disabled&&!t.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{t.onOpenChange(!0),h()},100))})),onPointerLeave:K(n.onPointerLeave,Xr(m=>{h();const g=t.content?.getBoundingClientRect();if(g){const w=t.content?.dataset.side,I=w==="right",E=I?-5:5,b=g[I?"left":"right"],P=g[I?"right":"left"];s.onPointerGraceIntentChange({area:[{x:m.clientX+E,y:m.clientY},{x:b,y:g.top},{x:P,y:g.top},{x:P,y:g.bottom},{x:b,y:g.bottom}],side:w}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(m),m.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:K(n.onKeyDown,m=>{const g=s.searchRef.current!=="";n.disabled||g&&m.key===" "||jS[r.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});Kg.displayName=Pr;var Qg="MenuSubContent",Xg=f.forwardRef((n,e)=>{const t=Ng(rt,n.__scopeMenu),{forceMount:r=t.forceMount,...o}=n,s=dn(rt,n.__scopeMenu),a=uo(rt,n.__scopeMenu),c=Hg(Qg,n.__scopeMenu),l=f.useRef(null),u=Te(e,l);return y.jsx(Qr.Provider,{scope:n.__scopeMenu,children:y.jsx(At,{present:r||s.open,children:y.jsx(Qr.Slot,{scope:n.__scopeMenu,children:y.jsx(Jc,{id:c.contentId,"aria-labelledby":c.triggerId,...o,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{a.isUsingKeyboardRef.current&&l.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:K(n.onFocusOutside,h=>{h.target!==c.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:K(n.onEscapeKeyDown,h=>{a.onClose(),h.preventDefault()}),onKeyDown:K(n.onKeyDown,h=>{const m=h.currentTarget.contains(h.target),g=$S[a.dir].includes(h.key);m&&g&&(s.onOpenChange(!1),c.trigger?.focus(),h.preventDefault())})})})})})});Xg.displayName=Qg;function Yg(n){return n?"open":"closed"}function Ts(n){return n==="indeterminate"}function nl(n){return Ts(n)?"indeterminate":n?"checked":"unchecked"}function s1(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function i1(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function a1(n,e,t){const o=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let a=i1(n,Math.max(s,0));o.length===1&&(a=a.filter(u=>u!==t));const l=a.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return l!==t?l:void 0}function c1(n,e){const{x:t,y:r}=n;let o=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const c=e[s],l=e[a],u=c.x,h=c.y,m=l.x,g=l.y;h>r!=g>r&&t<(m-u)*(r-h)/(g-h)+u&&(o=!o)}return o}function l1(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return c1(t,e)}function Xr(n){return e=>e.pointerType==="mouse"?n(e):void 0}var u1=Dg,d1=Qc,h1=kg,f1=Mg,p1=Zc,m1=Vg,g1=si,y1=Lg,v1=jg,_1=Bg,w1=zg,E1=Wg,b1=qg,T1=Gg,x1=Kg,A1=Xg,ii="DropdownMenu",[I1]=cn(ii,[Rg]),Ue=Rg(),[C1,Jg]=I1(ii),Zg=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:o,defaultOpen:s,onOpenChange:a,modal:c=!0}=n,l=Ue(e),u=f.useRef(null),[h,m]=rr({prop:o,defaultProp:s??!1,onChange:a,caller:ii});return y.jsx(C1,{scope:e,triggerId:Pt(),triggerRef:u,contentId:Pt(),open:h,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(g=>!g),[m]),modal:c,children:y.jsx(u1,{...l,open:h,onOpenChange:m,dir:r,modal:c,children:t})})};Zg.displayName=ii;var ey="DropdownMenuTrigger",ty=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...o}=n,s=Jg(ey,t),a=Ue(t);return y.jsx(d1,{asChild:!0,...a,children:y.jsx(he.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:an(e,s.triggerRef),onPointerDown:K(n.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(s.onOpenToggle(),s.open||c.preventDefault())}),onKeyDown:K(n.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&s.onOpenToggle(),c.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});ty.displayName=ey;var R1="DropdownMenuPortal",ny=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Ue(e);return y.jsx(h1,{...r,...t})};ny.displayName=R1;var ry="DropdownMenuContent",oy=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Jg(ry,t),s=Ue(t),a=f.useRef(!1);return y.jsx(f1,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:e,onCloseAutoFocus:K(n.onCloseAutoFocus,c=>{a.current||o.triggerRef.current?.focus(),a.current=!1,c.preventDefault()}),onInteractOutside:K(n.onInteractOutside,c=>{const l=c.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,h=l.button===2||u;(!o.modal||h)&&(a.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oy.displayName=ry;var S1="DropdownMenuGroup",P1=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(p1,{...o,...r,ref:e})});P1.displayName=S1;var D1="DropdownMenuLabel",sy=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(m1,{...o,...r,ref:e})});sy.displayName=D1;var N1="DropdownMenuItem",iy=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(g1,{...o,...r,ref:e})});iy.displayName=N1;var k1="DropdownMenuCheckboxItem",ay=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(y1,{...o,...r,ref:e})});ay.displayName=k1;var M1="DropdownMenuRadioGroup",V1=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(v1,{...o,...r,ref:e})});V1.displayName=M1;var O1="DropdownMenuRadioItem",cy=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(_1,{...o,...r,ref:e})});cy.displayName=O1;var L1="DropdownMenuItemIndicator",ly=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(w1,{...o,...r,ref:e})});ly.displayName=L1;var F1="DropdownMenuSeparator",uy=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(E1,{...o,...r,ref:e})});uy.displayName=F1;var j1="DropdownMenuArrow",$1=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(b1,{...o,...r,ref:e})});$1.displayName=j1;var B1=n=>{const{__scopeDropdownMenu:e,children:t,open:r,onOpenChange:o,defaultOpen:s}=n,a=Ue(e),[c,l]=rr({prop:r,defaultProp:s??!1,onChange:o,caller:"DropdownMenuSub"});return y.jsx(T1,{...a,open:c,onOpenChange:l,children:t})},U1="DropdownMenuSubTrigger",dy=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(x1,{...o,...r,ref:e})});dy.displayName=U1;var z1="DropdownMenuSubContent",hy=f.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Ue(t);return y.jsx(A1,{...o,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hy.displayName=z1;var W1=Zg,q1=ty,fy=ny,py=oy,my=sy,gy=iy,yy=ay,vy=cy,_y=ly,wy=uy,H1=B1,Ey=dy,by=hy;const G1=W1,K1=q1,ah=fy,ch=H1,Ba=f.forwardRef(({className:n,inset:e,children:t,...r},o)=>y.jsxs(Ey,{ref:o,className:X("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...r,children:[t,y.jsx(wv,{className:"ml-auto"})]}));Ba.displayName=Ey.displayName;const Ua=f.forwardRef(({className:n,...e},t)=>y.jsx(by,{ref:t,className:X("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));Ua.displayName=by.displayName;const Ty=f.forwardRef(({className:n,sideOffset:e=4,...t},r)=>y.jsx(fy,{children:y.jsx(py,{ref:r,sideOffset:e,className:X("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));Ty.displayName=py.displayName;const Un=f.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(gy,{ref:r,className:X("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...t}));Un.displayName=gy.displayName;const Q1=f.forwardRef(({className:n,children:e,checked:t,...r},o)=>y.jsxs(yy,{ref:o,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(_y,{children:y.jsx(vv,{className:"h-4 w-4"})})}),e]}));Q1.displayName=yy.displayName;const X1=f.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(vy,{ref:r,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(_y,{children:y.jsx(bv,{className:"h-2 w-2 fill-current"})})}),e]}));X1.displayName=vy.displayName;const Y1=f.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(my,{ref:r,className:X("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));Y1.displayName=my.displayName;const xy=f.forwardRef(({className:n,...e},t)=>y.jsx(wy,{ref:t,className:X("-mx-1 my-1 h-px bg-muted",n),...e}));xy.displayName=wy.displayName;function J1(){const{setTheme:n}=pR(),{setLocale:e,t}=Kc();return y.jsxs(G1,{children:[y.jsx(K1,{asChild:!0,children:y.jsxs(qa,{variant:"ghost",size:"icon",className:"w-full justify-start gap-2 px-2",children:[y.jsx(Ov,{className:"shrink-0"}),y.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:t("Settings")})]})}),y.jsxs(Ty,{className:"w-56",align:"end",forceMount:!0,children:[y.jsxs(ch,{children:[y.jsxs(Ba,{children:[y.jsx(cu,{className:"mr-2 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),y.jsx(au,{className:"absolute mr-2 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),y.jsx("span",{children:t("Theme")})]}),y.jsx(ah,{children:y.jsxs(Ua,{children:[y.jsxs(Un,{onClick:()=>n("light"),children:[y.jsx(cu,{className:"mr-2"}),t("Light")]}),y.jsxs(Un,{onClick:()=>n("dark"),children:[y.jsx(au,{className:"mr-2"}),t("Dark")]}),y.jsxs(Un,{onClick:()=>n("system"),children:[y.jsx(Rv,{className:"mr-2"}),t("System")]})]})})]}),y.jsx(xy,{}),y.jsxs(ch,{children:[y.jsxs(Ba,{children:[y.jsx(xv,{className:"mr-2"}),y.jsx("span",{children:t("Language")})]}),y.jsx(ah,{children:y.jsxs(Ua,{children:[y.jsx(Un,{onClick:()=>e("en"),children:"English"}),y.jsx(Un,{onClick:()=>e("pt"),children:"Portugus"})]})})]})]})]})}function Z1({pathname:n}){const{t:e}=Kc(),t={"/":e("Dashboard"),"/inventory":e("Inventory")},r={"/":e("An overview of your cartridge inventory."),"/inventory":e("Manage your cartridge inventory and reorder thresholds.")},o=t[n]||"StockPilot",s=r[n]||"";return y.jsx("header",{className:"flex items-center justify-between border-b p-4 md:p-6 lg:p-8",children:y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Xf,{}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:o}),s&&y.jsx("p",{className:"text-muted-foreground",children:s})]})]})})}function eP(){const{t:n}=Kc();return y.jsxs(y.Fragment,{children:[y.jsx(da,{children:y.jsx(ha,{asChild:!0,tooltip:{children:n("Dashboard")},children:y.jsxs("a",{href:"/",children:[y.jsx(Iv,{}),y.jsx("span",{children:n("Dashboard")})]})})}),y.jsx(da,{children:y.jsx(ha,{asChild:!0,tooltip:{children:n("Inventory")},children:y.jsxs("a",{href:"/inventory",children:[y.jsx(gv,{}),y.jsx("span",{children:n("Inventory")})]})})})]})}function mP({children:n,pathname:e}){return y.jsx(yS,{children:y.jsxs(uR,{children:[y.jsxs(Kf,{children:[y.jsxs(Qf,{children:[y.jsx(Jf,{children:y.jsx(lx,{})}),y.jsx(ep,{children:y.jsx(tp,{children:y.jsx(eP,{})})}),y.jsx(Zf,{children:y.jsx(J1,{})})]}),y.jsxs(Yf,{children:[y.jsx(Z1,{pathname:e}),y.jsx("main",{className:"p-4 md:p-6 lg:p-8",children:n})]})]}),y.jsx(cx,{})]})})}const tP=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:X("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));tP.displayName="Card";const nP=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:X("flex flex-col space-y-1.5 p-6",n),...e}));nP.displayName="CardHeader";const rP=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:X("text-2xl font-semibold leading-none tracking-tight",n),...e}));rP.displayName="CardTitle";const oP=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:X("text-sm text-muted-foreground",n),...e}));oP.displayName="CardDescription";const sP=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:X("p-6 pt-0",n),...e}));sP.displayName="CardContent";const iP=f.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:X("flex items-center p-6 pt-0",n),...e}));iP.displayName="CardFooter";export{Of as $,Mf as A,qa as B,tP as C,G1 as D,Is as E,As as F,Pt as G,ks as H,cc as I,Qe as J,zh as K,Mh as L,Ka as M,Ga as N,af as O,cP as P,Yr as Q,mP as R,er as S,lf as T,cn as U,Vf as V,wg as W,ts as X,rr as Y,ic as Z,zb as _,sP as a,vv as a0,Ih as a1,uP as a2,lP as a3,dP as a4,S_ as a5,oP as a6,iP as b,Xe as c,VT as d,K1 as e,Ty as f,Un as g,Q1 as h,pP as i,y as j,nP as k,rP as l,X as m,yE as n,cf as o,df as p,uf as q,gE as r,uh as s,xs as t,Kc as u,an as v,Te as w,he as x,K as y,Dt as z};
